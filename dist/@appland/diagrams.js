!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("d3")):"function"==typeof define&&define.amd?define(["exports","d3"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).Appmap={},t.d3)}(this,(function(t,e){"use strict";function n(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var r=n(e),i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function o(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function a(t,e,n){return t(n={path:e,exports:{},require:function(t,e){return u(null==e&&n.path)}},n.exports),n.exports}function u(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var s=function(){this.__data__=[],this.size=0};var c=function(t,e){return t===e||t!=t&&e!=e};var l=function(t,e){for(var n=t.length;n--;)if(c(t[n][0],e))return n;return-1},h=Array.prototype.splice;var f=function(t){var e=this.__data__,n=l(e,t);return!(n<0)&&(n==e.length-1?e.pop():h.call(e,n,1),--this.size,!0)};var d=function(t){var e=this.__data__,n=l(e,t);return n<0?void 0:e[n][1]};var p=function(t){return l(this.__data__,t)>-1};var v=function(t,e){var n=this.__data__,r=l(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};function g(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}g.prototype.clear=s,g.prototype.delete=f,g.prototype.get=d,g.prototype.has=p,g.prototype.set=v;var E=g;var m=function(){this.__data__=new E,this.size=0};var y=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n};var _=function(t){return this.__data__.get(t)};var T=function(t){return this.__data__.has(t)},N="object"==typeof i&&i&&i.Object===Object&&i,w="object"==typeof self&&self&&self.Object===Object&&self,R=N||w||Function("return this")(),b=R.Symbol,A=Object.prototype,O=A.hasOwnProperty,I=A.toString,S=b?b.toStringTag:void 0;var L=function(t){var e=O.call(t,S),n=t[S];try{t[S]=void 0;var r=!0}catch(t){}var i=I.call(t);return r&&(e?t[S]=n:delete t[S]),i},C=Object.prototype.toString;var x=function(t){return C.call(t)},M=b?b.toStringTag:void 0;var P=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":M&&M in Object(t)?L(t):x(t)};var k=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)};var D,U=function(t){if(!k(t))return!1;var e=P(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},j=R["__core-js_shared__"],G=(D=/[^.]+$/.exec(j&&j.keys&&j.keys.IE_PROTO||""))?"Symbol(src)_1."+D:"";var B=function(t){return!!G&&G in t},F=Function.prototype.toString;var H=function(t){if(null!=t){try{return F.call(t)}catch(t){}try{return t+""}catch(t){}}return""},V=/^\[object .+?Constructor\]$/,W=Function.prototype,Y=Object.prototype,X=W.toString,z=Y.hasOwnProperty,$=RegExp("^"+X.call(z).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var q=function(t){return!(!k(t)||B(t))&&(U(t)?$:V).test(H(t))};var K=function(t,e){return null==t?void 0:t[e]};var Q=function(t,e){var n=K(t,e);return q(n)?n:void 0},Z=Q(R,"Map"),J=Q(Object,"create");var tt=function(){this.__data__=J?J(null):{},this.size=0};var et=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},nt=Object.prototype.hasOwnProperty;var rt=function(t){var e=this.__data__;if(J){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return nt.call(e,t)?e[t]:void 0},it=Object.prototype.hasOwnProperty;var ot=function(t){var e=this.__data__;return J?void 0!==e[t]:it.call(e,t)};var at=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=J&&void 0===e?"__lodash_hash_undefined__":e,this};function ut(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}ut.prototype.clear=tt,ut.prototype.delete=et,ut.prototype.get=rt,ut.prototype.has=ot,ut.prototype.set=at;var st=ut;var ct=function(){this.size=0,this.__data__={hash:new st,map:new(Z||E),string:new st}};var lt=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var ht=function(t,e){var n=t.__data__;return lt(e)?n["string"==typeof e?"string":"hash"]:n.map};var ft=function(t){var e=ht(this,t).delete(t);return this.size-=e?1:0,e};var dt=function(t){return ht(this,t).get(t)};var pt=function(t){return ht(this,t).has(t)};var vt=function(t,e){var n=ht(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};function gt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}gt.prototype.clear=ct,gt.prototype.delete=ft,gt.prototype.get=dt,gt.prototype.has=pt,gt.prototype.set=vt;var Et=gt;var mt=function(t,e){var n=this.__data__;if(n instanceof E){var r=n.__data__;if(!Z||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Et(r)}return n.set(t,e),this.size=n.size,this};function yt(t){var e=this.__data__=new E(t);this.size=e.size}yt.prototype.clear=m,yt.prototype.delete=y,yt.prototype.get=_,yt.prototype.has=T,yt.prototype.set=mt;var _t=yt;var Tt=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t},Nt=function(){try{var t=Q(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();var wt=function(t,e,n){"__proto__"==e&&Nt?Nt(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n},Rt=Object.prototype.hasOwnProperty;var bt=function(t,e,n){var r=t[e];Rt.call(t,e)&&c(r,n)&&(void 0!==n||e in t)||wt(t,e,n)};var At=function(t,e,n,r){var i=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var u=e[o],s=r?r(n[u],t[u],u,n,t):void 0;void 0===s&&(s=t[u]),i?wt(n,u,s):bt(n,u,s)}return n};var Ot=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r};var It=function(t){return null!=t&&"object"==typeof t};var St=function(t){return It(t)&&"[object Arguments]"==P(t)},Lt=Object.prototype,Ct=Lt.hasOwnProperty,xt=Lt.propertyIsEnumerable,Mt=St(function(){return arguments}())?St:function(t){return It(t)&&Ct.call(t,"callee")&&!xt.call(t,"callee")},Pt=Array.isArray;var kt=function(){return!1},Dt=a((function(t,e){var n=e&&!e.nodeType&&e,r=n&&t&&!t.nodeType&&t,i=r&&r.exports===n?R.Buffer:void 0,o=(i?i.isBuffer:void 0)||kt;t.exports=o})),Ut=/^(?:0|[1-9]\d*)$/;var jt=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&Ut.test(t))&&t>-1&&t%1==0&&t<e};var Gt=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},Bt={};Bt["[object Float32Array]"]=Bt["[object Float64Array]"]=Bt["[object Int8Array]"]=Bt["[object Int16Array]"]=Bt["[object Int32Array]"]=Bt["[object Uint8Array]"]=Bt["[object Uint8ClampedArray]"]=Bt["[object Uint16Array]"]=Bt["[object Uint32Array]"]=!0,Bt["[object Arguments]"]=Bt["[object Array]"]=Bt["[object ArrayBuffer]"]=Bt["[object Boolean]"]=Bt["[object DataView]"]=Bt["[object Date]"]=Bt["[object Error]"]=Bt["[object Function]"]=Bt["[object Map]"]=Bt["[object Number]"]=Bt["[object Object]"]=Bt["[object RegExp]"]=Bt["[object Set]"]=Bt["[object String]"]=Bt["[object WeakMap]"]=!1;var Ft=function(t){return It(t)&&Gt(t.length)&&!!Bt[P(t)]};var Ht=function(t){return function(e){return t(e)}},Vt=a((function(t,e){var n=e&&!e.nodeType&&e,r=n&&t&&!t.nodeType&&t,i=r&&r.exports===n&&N.process,o=function(){try{var t=r&&r.require&&r.require("util").types;return t||i&&i.binding&&i.binding("util")}catch(t){}}();t.exports=o})),Wt=Vt&&Vt.isTypedArray,Yt=Wt?Ht(Wt):Ft,Xt=Object.prototype.hasOwnProperty;var zt=function(t,e){var n=Pt(t),r=!n&&Mt(t),i=!n&&!r&&Dt(t),o=!n&&!r&&!i&&Yt(t),a=n||r||i||o,u=a?Ot(t.length,String):[],s=u.length;for(var c in t)!e&&!Xt.call(t,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||jt(c,s))||u.push(c);return u},$t=Object.prototype;var qt=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||$t)};var Kt=function(t,e){return function(n){return t(e(n))}},Qt=Kt(Object.keys,Object),Zt=Object.prototype.hasOwnProperty;var Jt=function(t){if(!qt(t))return Qt(t);var e=[];for(var n in Object(t))Zt.call(t,n)&&"constructor"!=n&&e.push(n);return e};var te=function(t){return null!=t&&Gt(t.length)&&!U(t)};var ee=function(t){return te(t)?zt(t):Jt(t)};var ne=function(t,e){return t&&At(e,ee(e),t)};var re=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e},ie=Object.prototype.hasOwnProperty;var oe=function(t){if(!k(t))return re(t);var e=qt(t),n=[];for(var r in t)("constructor"!=r||!e&&ie.call(t,r))&&n.push(r);return n};var ae=function(t){return te(t)?zt(t,!0):oe(t)};var ue=function(t,e){return t&&At(e,ae(e),t)},se=a((function(t,e){var n=e&&!e.nodeType&&e,r=n&&t&&!t.nodeType&&t,i=r&&r.exports===n?R.Buffer:void 0,o=i?i.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,r=o?o(n):new t.constructor(n);return t.copy(r),r}}));var ce=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e};var le=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o};var he=function(){return[]},fe=Object.prototype.propertyIsEnumerable,de=Object.getOwnPropertySymbols,pe=de?function(t){return null==t?[]:(t=Object(t),le(de(t),(function(e){return fe.call(t,e)})))}:he;var ve=function(t,e){return At(t,pe(t),e)};var ge=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t},Ee=Kt(Object.getPrototypeOf,Object),me=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)ge(e,pe(t)),t=Ee(t);return e}:he;var ye=function(t,e){return At(t,me(t),e)};var _e=function(t,e,n){var r=e(t);return Pt(t)?r:ge(r,n(t))};var Te=function(t){return _e(t,ee,pe)};var Ne=function(t){return _e(t,ae,me)},we=Q(R,"DataView"),Re=Q(R,"Promise"),be=Q(R,"Set"),Ae=Q(R,"WeakMap"),Oe="[object Map]",Ie="[object Promise]",Se="[object Set]",Le="[object WeakMap]",Ce="[object DataView]",xe=H(we),Me=H(Z),Pe=H(Re),ke=H(be),De=H(Ae),Ue=P;(we&&Ue(new we(new ArrayBuffer(1)))!=Ce||Z&&Ue(new Z)!=Oe||Re&&Ue(Re.resolve())!=Ie||be&&Ue(new be)!=Se||Ae&&Ue(new Ae)!=Le)&&(Ue=function(t){var e=P(t),n="[object Object]"==e?t.constructor:void 0,r=n?H(n):"";if(r)switch(r){case xe:return Ce;case Me:return Oe;case Pe:return Ie;case ke:return Se;case De:return Le}return e});var je=Ue,Ge=Object.prototype.hasOwnProperty;var Be=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&Ge.call(t,"index")&&(n.index=t.index,n.input=t.input),n},Fe=R.Uint8Array;var He=function(t){var e=new t.constructor(t.byteLength);return new Fe(e).set(new Fe(t)),e};var Ve=function(t,e){var n=e?He(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)},We=/\w*$/;var Ye=function(t){var e=new t.constructor(t.source,We.exec(t));return e.lastIndex=t.lastIndex,e},Xe=b?b.prototype:void 0,ze=Xe?Xe.valueOf:void 0;var $e=function(t){return ze?Object(ze.call(t)):{}};var qe=function(t,e){var n=e?He(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)};var Ke=function(t,e,n){var r=t.constructor;switch(e){case"[object ArrayBuffer]":return He(t);case"[object Boolean]":case"[object Date]":return new r(+t);case"[object DataView]":return Ve(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return qe(t,n);case"[object Map]":return new r;case"[object Number]":case"[object String]":return new r(t);case"[object RegExp]":return Ye(t);case"[object Set]":return new r;case"[object Symbol]":return $e(t)}},Qe=Object.create,Ze=function(){function t(){}return function(e){if(!k(e))return{};if(Qe)return Qe(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();var Je=function(t){return"function"!=typeof t.constructor||qt(t)?{}:Ze(Ee(t))};var tn=function(t){return It(t)&&"[object Map]"==je(t)},en=Vt&&Vt.isMap,nn=en?Ht(en):tn;var rn=function(t){return It(t)&&"[object Set]"==je(t)},on=Vt&&Vt.isSet,an=on?Ht(on):rn,un="[object Arguments]",sn="[object Function]",cn="[object Object]",ln={};ln[un]=ln["[object Array]"]=ln["[object ArrayBuffer]"]=ln["[object DataView]"]=ln["[object Boolean]"]=ln["[object Date]"]=ln["[object Float32Array]"]=ln["[object Float64Array]"]=ln["[object Int8Array]"]=ln["[object Int16Array]"]=ln["[object Int32Array]"]=ln["[object Map]"]=ln["[object Number]"]=ln[cn]=ln["[object RegExp]"]=ln["[object Set]"]=ln["[object String]"]=ln["[object Symbol]"]=ln["[object Uint8Array]"]=ln["[object Uint8ClampedArray]"]=ln["[object Uint16Array]"]=ln["[object Uint32Array]"]=!0,ln["[object Error]"]=ln[sn]=ln["[object WeakMap]"]=!1;var hn=function t(e,n,r,i,o,a){var u,s=1&n,c=2&n,l=4&n;if(r&&(u=o?r(e,i,o,a):r(e)),void 0!==u)return u;if(!k(e))return e;var h=Pt(e);if(h){if(u=Be(e),!s)return ce(e,u)}else{var f=je(e),d=f==sn||"[object GeneratorFunction]"==f;if(Dt(e))return se(e,s);if(f==cn||f==un||d&&!o){if(u=c||d?{}:Je(e),!s)return c?ye(e,ue(u,e)):ve(e,ne(u,e))}else{if(!ln[f])return o?e:{};u=Ke(e,f,s)}}a||(a=new _t);var p=a.get(e);if(p)return p;a.set(e,u),an(e)?e.forEach((function(i){u.add(t(i,n,r,i,e,a))})):nn(e)&&e.forEach((function(i,o){u.set(o,t(i,n,r,o,e,a))}));var v=h?void 0:(l?c?Ne:Te:c?ae:ee)(e);return Tt(v||e,(function(i,o){v&&(i=e[o=i]),bt(u,o,t(i,n,r,o,e,a))})),u};var fn=function(t){return hn(t,4)};var dn=function(t){return function(){return t}};var pn=function(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),u=a.length;u--;){var s=a[t?u:++i];if(!1===n(o[s],s,o))break}return e}}();var vn=function(t,e){return t&&pn(t,e,ee)};var gn=function(t,e){return function(n,r){if(null==n)return n;if(!te(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=Object(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}}(vn);var En=function(t){return t};var mn=function(t){return"function"==typeof t?t:En};var yn=function(t,e){return(Pt(t)?Tt:gn)(t,mn(e))},_n=yn;var Tn=function(t,e){var n=[];return gn(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n};var Nn=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this};var wn=function(t){return this.__data__.has(t)};function Rn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Et;++e<n;)this.add(t[e])}Rn.prototype.add=Rn.prototype.push=Nn,Rn.prototype.has=wn;var bn=Rn;var An=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1};var On=function(t,e){return t.has(e)};var In=function(t,e,n,r,i,o){var a=1&n,u=t.length,s=e.length;if(u!=s&&!(a&&s>u))return!1;var c=o.get(t),l=o.get(e);if(c&&l)return c==e&&l==t;var h=-1,f=!0,d=2&n?new bn:void 0;for(o.set(t,e),o.set(e,t);++h<u;){var p=t[h],v=e[h];if(r)var g=a?r(v,p,h,e,t,o):r(p,v,h,t,e,o);if(void 0!==g){if(g)continue;f=!1;break}if(d){if(!An(e,(function(t,e){if(!On(d,e)&&(p===t||i(p,t,n,r,o)))return d.push(e)}))){f=!1;break}}else if(p!==v&&!i(p,v,n,r,o)){f=!1;break}}return o.delete(t),o.delete(e),f};var Sn=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n};var Ln=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n},Cn=b?b.prototype:void 0,xn=Cn?Cn.valueOf:void 0;var Mn=function(t,e,n,r,i,o,a){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!o(new Fe(t),new Fe(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return c(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var u=Sn;case"[object Set]":var s=1&r;if(u||(u=Ln),t.size!=e.size&&!s)return!1;var l=a.get(t);if(l)return l==e;r|=2,a.set(t,e);var h=In(u(t),u(e),r,i,o,a);return a.delete(t),h;case"[object Symbol]":if(xn)return xn.call(t)==xn.call(e)}return!1},Pn=Object.prototype.hasOwnProperty;var kn=function(t,e,n,r,i,o){var a=1&n,u=Te(t),s=u.length;if(s!=Te(e).length&&!a)return!1;for(var c=s;c--;){var l=u[c];if(!(a?l in e:Pn.call(e,l)))return!1}var h=o.get(t),f=o.get(e);if(h&&f)return h==e&&f==t;var d=!0;o.set(t,e),o.set(e,t);for(var p=a;++c<s;){var v=t[l=u[c]],g=e[l];if(r)var E=a?r(g,v,l,e,t,o):r(v,g,l,t,e,o);if(!(void 0===E?v===g||i(v,g,n,r,o):E)){d=!1;break}p||(p="constructor"==l)}if(d&&!p){var m=t.constructor,y=e.constructor;m==y||!("constructor"in t)||!("constructor"in e)||"function"==typeof m&&m instanceof m&&"function"==typeof y&&y instanceof y||(d=!1)}return o.delete(t),o.delete(e),d},Dn="[object Arguments]",Un="[object Array]",jn="[object Object]",Gn=Object.prototype.hasOwnProperty;var Bn=function(t,e,n,r,i,o){var a=Pt(t),u=Pt(e),s=a?Un:je(t),c=u?Un:je(e),l=(s=s==Dn?jn:s)==jn,h=(c=c==Dn?jn:c)==jn,f=s==c;if(f&&Dt(t)){if(!Dt(e))return!1;a=!0,l=!1}if(f&&!l)return o||(o=new _t),a||Yt(t)?In(t,e,n,r,i,o):Mn(t,e,s,n,r,i,o);if(!(1&n)){var d=l&&Gn.call(t,"__wrapped__"),p=h&&Gn.call(e,"__wrapped__");if(d||p){var v=d?t.value():t,g=p?e.value():e;return o||(o=new _t),i(v,g,n,r,o)}}return!!f&&(o||(o=new _t),kn(t,e,n,r,i,o))};var Fn=function t(e,n,r,i,o){return e===n||(null==e||null==n||!It(e)&&!It(n)?e!=e&&n!=n:Bn(e,n,r,i,t,o))};var Hn=function(t,e,n,r){var i=n.length,o=i,a=!r;if(null==t)return!o;for(t=Object(t);i--;){var u=n[i];if(a&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++i<o;){var s=(u=n[i])[0],c=t[s],l=u[1];if(a&&u[2]){if(void 0===c&&!(s in t))return!1}else{var h=new _t;if(r)var f=r(c,l,s,t,e,h);if(!(void 0===f?Fn(l,c,3,r,h):f))return!1}}return!0};var Vn=function(t){return t==t&&!k(t)};var Wn=function(t){for(var e=ee(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Vn(i)]}return e};var Yn=function(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}};var Xn=function(t){var e=Wn(t);return 1==e.length&&e[0][2]?Yn(e[0][0],e[0][1]):function(n){return n===t||Hn(n,t,e)}};var zn=function(t){return"symbol"==typeof t||It(t)&&"[object Symbol]"==P(t)},$n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,qn=/^\w*$/;var Kn=function(t,e){if(Pt(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!zn(t))||(qn.test(t)||!$n.test(t)||null!=e&&t in Object(e))};function Qn(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Qn.Cache||Et),n}Qn.Cache=Et;var Zn=Qn;var Jn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,tr=/\\(\\)?/g,er=function(t){var e=Zn(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Jn,(function(t,n,r,i){e.push(r?i.replace(tr,"$1"):n||t)})),e}));var nr=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i},rr=b?b.prototype:void 0,ir=rr?rr.toString:void 0;var or=function t(e){if("string"==typeof e)return e;if(Pt(e))return nr(e,t)+"";if(zn(e))return ir?ir.call(e):"";var n=e+"";return"0"==n&&1/e==-Infinity?"-0":n};var ar=function(t){return null==t?"":or(t)};var ur=function(t,e){return Pt(t)?t:Kn(t,e)?[t]:er(ar(t))};var sr=function(t){if("string"==typeof t||zn(t))return t;var e=t+"";return"0"==e&&1/t==-Infinity?"-0":e};var cr=function(t,e){for(var n=0,r=(e=ur(e,t)).length;null!=t&&n<r;)t=t[sr(e[n++])];return n&&n==r?t:void 0};var lr=function(t,e,n){var r=null==t?void 0:cr(t,e);return void 0===r?n:r};var hr=function(t,e){return null!=t&&e in Object(t)};var fr=function(t,e,n){for(var r=-1,i=(e=ur(e,t)).length,o=!1;++r<i;){var a=sr(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&Gt(i)&&jt(a,i)&&(Pt(t)||Mt(t))};var dr=function(t,e){return null!=t&&fr(t,e,hr)};var pr=function(t,e){return Kn(t)&&Vn(e)?Yn(sr(t),e):function(n){var r=lr(n,t);return void 0===r&&r===e?dr(n,t):Fn(e,r,3)}};var vr=function(t){return function(e){return null==e?void 0:e[t]}};var gr=function(t){return function(e){return cr(e,t)}};var Er=function(t){return Kn(t)?vr(sr(t)):gr(t)};var mr=function(t){return"function"==typeof t?t:null==t?En:"object"==typeof t?Pt(t)?pr(t[0],t[1]):Xn(t):Er(t)};var yr=function(t,e){return(Pt(t)?le:Tn)(t,mr(e))},_r=Object.prototype.hasOwnProperty;var Tr=function(t,e){return null!=t&&_r.call(t,e)};var Nr=function(t,e){return null!=t&&fr(t,e,Tr)},wr=Object.prototype.hasOwnProperty;var Rr=function(t){if(null==t)return!0;if(te(t)&&(Pt(t)||"string"==typeof t||"function"==typeof t.splice||Dt(t)||Yt(t)||Mt(t)))return!t.length;var e=je(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(qt(t))return!Jt(t).length;for(var n in t)if(wr.call(t,n))return!1;return!0};var br=function(t){return void 0===t};var Ar=function(t,e){var n=-1,r=te(t)?Array(t.length):[];return gn(t,(function(t,i,o){r[++n]=e(t,i,o)})),r};var Or=function(t,e){return(Pt(t)?nr:Ar)(t,mr(e))};var Ir=function(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n};var Sr=function(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n};var Lr=function(t,e,n){var r=Pt(t)?Ir:Sr,i=arguments.length<3;return r(t,mr(e),n,i,gn)};var Cr=function(t){return"string"==typeof t||!Pt(t)&&It(t)&&"[object String]"==P(t)},xr=vr("length"),Mr=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var Pr=function(t){return Mr.test(t)},kr="[\\ud800-\\udfff]",Dr="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Ur="\\ud83c[\\udffb-\\udfff]",jr="[^\\ud800-\\udfff]",Gr="(?:\\ud83c[\\udde6-\\uddff]){2}",Br="[\\ud800-\\udbff][\\udc00-\\udfff]",Fr="(?:"+Dr+"|"+Ur+")"+"?",Hr="[\\ufe0e\\ufe0f]?",Vr=Hr+Fr+("(?:\\u200d(?:"+[jr,Gr,Br].join("|")+")"+Hr+Fr+")*"),Wr="(?:"+[jr+Dr+"?",Dr,Gr,Br,kr].join("|")+")",Yr=RegExp(Ur+"(?="+Ur+")|"+Wr+Vr,"g");var Xr=function(t){for(var e=Yr.lastIndex=0;Yr.test(t);)++e;return e};var zr=function(t){return Pr(t)?Xr(t):xr(t)};var $r=function(t){if(null==t)return 0;if(te(t))return Cr(t)?zr(t):t.length;var e=je(t);return"[object Map]"==e||"[object Set]"==e?t.size:Jt(t).length};var qr=function(t,e,n){var r=Pt(t),i=r||Dt(t)||Yt(t);if(e=mr(e),null==n){var o=t&&t.constructor;n=i?r?new o:[]:k(t)&&U(o)?Ze(Ee(t)):{}}return(i?Tt:vn)(t,(function(t,r,i){return e(n,t,r,i)})),n},Kr=b?b.isConcatSpreadable:void 0;var Qr=function(t){return Pt(t)||Mt(t)||!!(Kr&&t&&t[Kr])};var Zr=function t(e,n,r,i,o){var a=-1,u=e.length;for(r||(r=Qr),o||(o=[]);++a<u;){var s=e[a];n>0&&r(s)?n>1?t(s,n-1,r,i,o):ge(o,s):i||(o[o.length]=s)}return o};var Jr=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)},ti=Math.max;var ei=function(t,e,n){return e=ti(void 0===e?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=ti(r.length-e,0),a=Array(o);++i<o;)a[i]=r[e+i];i=-1;for(var u=Array(e+1);++i<e;)u[i]=r[i];return u[e]=n(a),Jr(t,this,u)}},ni=Nt?function(t,e){return Nt(t,"toString",{configurable:!0,enumerable:!1,value:dn(e),writable:!0})}:En,ri=Date.now;var ii=function(t){var e=0,n=0;return function(){var r=ri(),i=16-(r-n);if(n=r,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(ni);var oi=function(t,e){return ii(ei(t,e,En),t+"")};var ai=function(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1};var ui=function(t){return t!=t};var si=function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1};var ci=function(t,e,n){return e==e?si(t,e,n):ai(t,ui,n)};var li=function(t,e){return!!(null==t?0:t.length)&&ci(t,e,0)>-1};var hi=function(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1};var fi=function(){},di=be&&1/Ln(new be([,-0]))[1]==1/0?function(t){return new be(t)}:fi;var pi=function(t,e,n){var r=-1,i=li,o=t.length,a=!0,u=[],s=u;if(n)a=!1,i=hi;else if(o>=200){var c=e?null:di(t);if(c)return Ln(c);a=!1,i=On,s=new bn}else s=e?[]:u;t:for(;++r<o;){var l=t[r],h=e?e(l):l;if(l=n||0!==l?l:0,a&&h==h){for(var f=s.length;f--;)if(s[f]===h)continue t;e&&s.push(h),u.push(l)}else i(s,h,n)||(s!==u&&s.push(h),u.push(l))}return u};var vi=function(t){return It(t)&&te(t)},gi=oi((function(t){return pi(Zr(t,1,vi,!0))}));var Ei=function(t,e){return nr(e,(function(e){return t[e]}))};var mi,yi=function(t){return null==t?[]:Ei(t,ee(t))};try{mi={clone:fn,constant:dn,each:_n,filter:yr,has:Nr,isArray:Pt,isEmpty:Rr,isFunction:U,isUndefined:br,keys:ee,map:Or,reduce:Lr,size:$r,transform:qr,union:gi,values:yi}}catch(t){}mi||(mi=window._);var _i=mi,Ti=wi,Ni="\0";function wi(t){this._isDirected=!_i.has(t,"directed")||t.directed,this._isMultigraph=!!_i.has(t,"multigraph")&&t.multigraph,this._isCompound=!!_i.has(t,"compound")&&t.compound,this._label=void 0,this._defaultNodeLabelFn=_i.constant(void 0),this._defaultEdgeLabelFn=_i.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function Ri(t,e){t[e]?t[e]++:t[e]=1}function bi(t,e){--t[e]||delete t[e]}function Ai(t,e,n,r){var i=""+e,o=""+n;if(!t&&i>o){var a=i;i=o,o=a}return i+""+o+""+(_i.isUndefined(r)?"\0":r)}function Oi(t,e,n,r){var i=""+e,o=""+n;if(!t&&i>o){var a=i;i=o,o=a}var u={v:i,w:o};return r&&(u.name=r),u}function Ii(t,e){return Ai(t,e.v,e.w,e.name)}wi.prototype._nodeCount=0,wi.prototype._edgeCount=0,wi.prototype.isDirected=function(){return this._isDirected},wi.prototype.isMultigraph=function(){return this._isMultigraph},wi.prototype.isCompound=function(){return this._isCompound},wi.prototype.setGraph=function(t){return this._label=t,this},wi.prototype.graph=function(){return this._label},wi.prototype.setDefaultNodeLabel=function(t){return _i.isFunction(t)||(t=_i.constant(t)),this._defaultNodeLabelFn=t,this},wi.prototype.nodeCount=function(){return this._nodeCount},wi.prototype.nodes=function(){return _i.keys(this._nodes)},wi.prototype.sources=function(){var t=this;return _i.filter(this.nodes(),(function(e){return _i.isEmpty(t._in[e])}))},wi.prototype.sinks=function(){var t=this;return _i.filter(this.nodes(),(function(e){return _i.isEmpty(t._out[e])}))},wi.prototype.setNodes=function(t,e){var n=arguments,r=this;return _i.each(t,(function(t){n.length>1?r.setNode(t,e):r.setNode(t)})),this},wi.prototype.setNode=function(t,e){return _i.has(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=e),this):(this._nodes[t]=arguments.length>1?e:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]=Ni,this._children[t]={},this._children["\0"][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)},wi.prototype.node=function(t){return this._nodes[t]},wi.prototype.hasNode=function(t){return _i.has(this._nodes,t)},wi.prototype.removeNode=function(t){var e=this;if(_i.has(this._nodes,t)){var n=function(t){e.removeEdge(e._edgeObjs[t])};delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],_i.each(this.children(t),(function(t){e.setParent(t)})),delete this._children[t]),_i.each(_i.keys(this._in[t]),n),delete this._in[t],delete this._preds[t],_i.each(_i.keys(this._out[t]),n),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this},wi.prototype.setParent=function(t,e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(_i.isUndefined(e))e=Ni;else{for(var n=e+="";!_i.isUndefined(n);n=this.parent(n))if(n===t)throw new Error("Setting "+e+" as parent of "+t+" would create a cycle");this.setNode(e)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=e,this._children[e][t]=!0,this},wi.prototype._removeFromParentsChildList=function(t){delete this._children[this._parent[t]][t]},wi.prototype.parent=function(t){if(this._isCompound){var e=this._parent[t];if(e!==Ni)return e}},wi.prototype.children=function(t){if(_i.isUndefined(t)&&(t=Ni),this._isCompound){var e=this._children[t];if(e)return _i.keys(e)}else{if(t===Ni)return this.nodes();if(this.hasNode(t))return[]}},wi.prototype.predecessors=function(t){var e=this._preds[t];if(e)return _i.keys(e)},wi.prototype.successors=function(t){var e=this._sucs[t];if(e)return _i.keys(e)},wi.prototype.neighbors=function(t){var e=this.predecessors(t);if(e)return _i.union(e,this.successors(t))},wi.prototype.isLeaf=function(t){return 0===(this.isDirected()?this.successors(t):this.neighbors(t)).length},wi.prototype.filterNodes=function(t){var e=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});e.setGraph(this.graph());var n=this;_i.each(this._nodes,(function(n,r){t(r)&&e.setNode(r,n)})),_i.each(this._edgeObjs,(function(t){e.hasNode(t.v)&&e.hasNode(t.w)&&e.setEdge(t,n.edge(t))}));var r={};function i(t){var o=n.parent(t);return void 0===o||e.hasNode(o)?(r[t]=o,o):o in r?r[o]:i(o)}return this._isCompound&&_i.each(e.nodes(),(function(t){e.setParent(t,i(t))})),e},wi.prototype.setDefaultEdgeLabel=function(t){return _i.isFunction(t)||(t=_i.constant(t)),this._defaultEdgeLabelFn=t,this},wi.prototype.edgeCount=function(){return this._edgeCount},wi.prototype.edges=function(){return _i.values(this._edgeObjs)},wi.prototype.setPath=function(t,e){var n=this,r=arguments;return _i.reduce(t,(function(t,i){return r.length>1?n.setEdge(t,i,e):n.setEdge(t,i),i})),this},wi.prototype.setEdge=function(){var t,e,n,r,i=!1,o=arguments[0];"object"==typeof o&&null!==o&&"v"in o?(t=o.v,e=o.w,n=o.name,2===arguments.length&&(r=arguments[1],i=!0)):(t=o,e=arguments[1],n=arguments[3],arguments.length>2&&(r=arguments[2],i=!0)),t=""+t,e=""+e,_i.isUndefined(n)||(n=""+n);var a=Ai(this._isDirected,t,e,n);if(_i.has(this._edgeLabels,a))return i&&(this._edgeLabels[a]=r),this;if(!_i.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(e),this._edgeLabels[a]=i?r:this._defaultEdgeLabelFn(t,e,n);var u=Oi(this._isDirected,t,e,n);return t=u.v,e=u.w,Object.freeze(u),this._edgeObjs[a]=u,Ri(this._preds[e],t),Ri(this._sucs[t],e),this._in[e][a]=u,this._out[t][a]=u,this._edgeCount++,this},wi.prototype.edge=function(t,e,n){var r=1===arguments.length?Ii(this._isDirected,arguments[0]):Ai(this._isDirected,t,e,n);return this._edgeLabels[r]},wi.prototype.hasEdge=function(t,e,n){var r=1===arguments.length?Ii(this._isDirected,arguments[0]):Ai(this._isDirected,t,e,n);return _i.has(this._edgeLabels,r)},wi.prototype.removeEdge=function(t,e,n){var r=1===arguments.length?Ii(this._isDirected,arguments[0]):Ai(this._isDirected,t,e,n),i=this._edgeObjs[r];return i&&(t=i.v,e=i.w,delete this._edgeLabels[r],delete this._edgeObjs[r],bi(this._preds[e],t),bi(this._sucs[t],e),delete this._in[e][r],delete this._out[t][r],this._edgeCount--),this},wi.prototype.inEdges=function(t,e){var n=this._in[t];if(n){var r=_i.values(n);return e?_i.filter(r,(function(t){return t.v===e})):r}},wi.prototype.outEdges=function(t,e){var n=this._out[t];if(n){var r=_i.values(n);return e?_i.filter(r,(function(t){return t.w===e})):r}},wi.prototype.nodeEdges=function(t,e){var n=this.inEdges(t,e);if(n)return n.concat(this.outEdges(t,e))};var Si={Graph:Ti,version:"2.1.8"},Li={write:function(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:Ci(t),edges:xi(t)};_i.isUndefined(t.graph())||(e.value=_i.clone(t.graph()));return e},read:function(t){var e=new Ti(t.options).setGraph(t.value);return _i.each(t.nodes,(function(t){e.setNode(t.v,t.value),t.parent&&e.setParent(t.v,t.parent)})),_i.each(t.edges,(function(t){e.setEdge({v:t.v,w:t.w,name:t.name},t.value)})),e}};function Ci(t){return _i.map(t.nodes(),(function(e){var n=t.node(e),r=t.parent(e),i={v:e};return _i.isUndefined(n)||(i.value=n),_i.isUndefined(r)||(i.parent=r),i}))}function xi(t){return _i.map(t.edges(),(function(e){var n=t.edge(e),r={v:e.v,w:e.w};return _i.isUndefined(e.name)||(r.name=e.name),_i.isUndefined(n)||(r.value=n),r}))}var Mi=function(t){var e,n={},r=[];function i(r){_i.has(n,r)||(n[r]=!0,e.push(r),_i.each(t.successors(r),i),_i.each(t.predecessors(r),i))}return _i.each(t.nodes(),(function(t){e=[],i(t),e.length&&r.push(e)})),r};var Pi=ki;function ki(){this._arr=[],this._keyIndices={}}ki.prototype.size=function(){return this._arr.length},ki.prototype.keys=function(){return this._arr.map((function(t){return t.key}))},ki.prototype.has=function(t){return _i.has(this._keyIndices,t)},ki.prototype.priority=function(t){var e=this._keyIndices[t];if(void 0!==e)return this._arr[e].priority},ki.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},ki.prototype.add=function(t,e){var n=this._keyIndices;if(t=String(t),!_i.has(n,t)){var r=this._arr,i=r.length;return n[t]=i,r.push({key:t,priority:e}),this._decrease(i),!0}return!1},ki.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},ki.prototype.decrease=function(t,e){var n=this._keyIndices[t];if(e>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[n].priority+" New: "+e);this._arr[n].priority=e,this._decrease(n)},ki.prototype._heapify=function(t){var e=this._arr,n=2*t,r=n+1,i=t;n<e.length&&(i=e[n].priority<e[i].priority?n:i,r<e.length&&(i=e[r].priority<e[i].priority?r:i),i!==t&&(this._swap(t,i),this._heapify(i)))},ki.prototype._decrease=function(t){for(var e,n=this._arr,r=n[t].priority;0!==t&&!(n[e=t>>1].priority<r);)this._swap(t,e),t=e},ki.prototype._swap=function(t,e){var n=this._arr,r=this._keyIndices,i=n[t],o=n[e];n[t]=o,n[e]=i,r[o.key]=t,r[i.key]=e};var Di=function(t,e,n,r){return function(t,e,n,r){var i,o,a={},u=new Pi,s=function(t){var e=t.v!==i?t.v:t.w,r=a[e],s=n(t),c=o.distance+s;if(s<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+t+" Weight: "+s);c<r.distance&&(r.distance=c,r.predecessor=i,u.decrease(e,c))};t.nodes().forEach((function(t){var n=t===e?0:Number.POSITIVE_INFINITY;a[t]={distance:n},u.add(t,n)}));for(;u.size()>0&&(i=u.removeMin(),(o=a[i]).distance!==Number.POSITIVE_INFINITY);)r(i).forEach(s);return a}(t,String(e),n||Ui,r||function(e){return t.outEdges(e)})},Ui=_i.constant(1);var ji=function(t,e,n){return _i.transform(t.nodes(),(function(r,i){r[i]=Di(t,i,e,n)}),{})};var Gi=function(t){var e=0,n=[],r={},i=[];function o(a){var u=r[a]={onStack:!0,lowlink:e,index:e++};if(n.push(a),t.successors(a).forEach((function(t){_i.has(r,t)?r[t].onStack&&(u.lowlink=Math.min(u.lowlink,r[t].index)):(o(t),u.lowlink=Math.min(u.lowlink,r[t].lowlink))})),u.lowlink===u.index){var s,c=[];do{s=n.pop(),r[s].onStack=!1,c.push(s)}while(a!==s);i.push(c)}}return t.nodes().forEach((function(t){_i.has(r,t)||o(t)})),i};var Bi=function(t){return _i.filter(Gi(t),(function(e){return e.length>1||1===e.length&&t.hasEdge(e[0],e[0])}))};var Fi=function(t,e,n){return function(t,e,n){var r={},i=t.nodes();return i.forEach((function(t){r[t]={},r[t][t]={distance:0},i.forEach((function(e){t!==e&&(r[t][e]={distance:Number.POSITIVE_INFINITY})})),n(t).forEach((function(n){var i=n.v===t?n.w:n.v,o=e(n);r[t][i]={distance:o,predecessor:t}}))})),i.forEach((function(t){var e=r[t];i.forEach((function(n){var o=r[n];i.forEach((function(n){var r=o[t],i=e[n],a=o[n],u=r.distance+i.distance;u<a.distance&&(a.distance=u,a.predecessor=i.predecessor)}))}))})),r}(t,e||Hi,n||function(e){return t.outEdges(e)})},Hi=_i.constant(1);var Vi=Wi;function Wi(t){var e={},n={},r=[];if(_i.each(t.sinks(),(function i(o){if(_i.has(n,o))throw new Yi;_i.has(e,o)||(n[o]=!0,e[o]=!0,_i.each(t.predecessors(o),i),delete n[o],r.push(o))})),_i.size(e)!==t.nodeCount())throw new Yi;return r}function Yi(){}Wi.CycleException=Yi,Yi.prototype=new Error;var Xi=function(t,e,n){_i.isArray(e)||(e=[e]);var r=(t.isDirected()?t.successors:t.neighbors).bind(t),i=[],o={};return _i.each(e,(function(e){if(!t.hasNode(e))throw new Error("Graph does not have node: "+e);zi(t,e,"post"===n,o,r,i)})),i};function zi(t,e,n,r,i,o){_i.has(r,e)||(r[e]=!0,n||o.push(e),_i.each(i(e),(function(e){zi(t,e,n,r,i,o)})),n&&o.push(e))}var $i,qi={Graph:Si.Graph,json:Li,alg:{components:Mi,dijkstra:Di,dijkstraAll:ji,findCycles:Bi,floydWarshall:Fi,isAcyclic:function(t){try{Vi(t)}catch(t){if(t instanceof Vi.CycleException)return!1;throw t}return!0},postorder:function(t,e){return Xi(t,e,"post")},preorder:function(t,e){return Xi(t,e,"pre")},prim:function(t,e){var n,r=new Ti,i={},o=new Pi;function a(t){var r=t.v===n?t.w:t.v,a=o.priority(r);if(void 0!==a){var u=e(t);u<a&&(i[r]=n,o.decrease(r,u))}}if(0===t.nodeCount())return r;_i.each(t.nodes(),(function(t){o.add(t,Number.POSITIVE_INFINITY),r.setNode(t)})),o.decrease(t.nodes()[0],0);var u=!1;for(;o.size()>0;){if(n=o.removeMin(),_i.has(i,n))r.setEdge(n,i[n]);else{if(u)throw new Error("Input graph is not connected: "+t);u=!0}t.nodeEdges(n).forEach(a)}return r},tarjan:Gi,topsort:Vi},version:Si.version};try{$i=qi}catch(t){}$i||($i=window.graphlib);var Ki,Qi=$i;try{Ki=qi}catch(t){}Ki||(Ki=window.graphlib);var Zi=Ki;var Ji=function(t){return hn(t,5)};var to=function(t,e,n){if(!k(n))return!1;var r=typeof e;return!!("number"==r?te(n)&&jt(e,n.length):"string"==r&&e in n)&&c(n[e],t)},eo=Object.prototype,no=eo.hasOwnProperty,ro=oi((function(t,e){t=Object(t);var n=-1,r=e.length,i=r>2?e[2]:void 0;for(i&&to(e[0],e[1],i)&&(r=1);++n<r;)for(var o=e[n],a=ae(o),u=-1,s=a.length;++u<s;){var l=a[u],h=t[l];(void 0===h||c(h,eo[l])&&!no.call(t,l))&&(t[l]=o[l])}return t}));var io=function(t){return function(e,n,r){var i=Object(e);if(!te(e)){var o=mr(n);e=ee(e),n=function(t){return o(i[t],t,i)}}var a=t(e,n,r);return a>-1?i[o?e[a]:a]:void 0}},oo=/^\s+|\s+$/g,ao=/^[-+]0x[0-9a-f]+$/i,uo=/^0b[01]+$/i,so=/^0o[0-7]+$/i,co=parseInt;var lo=function(t){if("number"==typeof t)return t;if(zn(t))return NaN;if(k(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=k(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(oo,"");var n=uo.test(t);return n||so.test(t)?co(t.slice(2),n?2:8):ao.test(t)?NaN:+t},ho=1/0;var fo=function(t){return t?(t=lo(t))===ho||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0};var po=function(t){var e=fo(t),n=e%1;return e==e?n?e-n:e:0},vo=Math.max;var go=io((function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:po(n);return i<0&&(i=vo(r+i,0)),ai(t,mr(e),i)}));var Eo=function(t){return(null==t?0:t.length)?Zr(t,1):[]};var mo=function(t,e){return null==t?t:pn(t,mn(e),ae)};var yo=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0};var _o=function(t,e){var n={};return e=mr(e),vn(t,(function(t,r,i){wt(n,r,e(t,r,i))})),n};var To=function(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],a=e(o);if(null!=a&&(void 0===u?a==a&&!zn(a):n(a,u)))var u=a,s=o}return s};var No=function(t,e){return t>e};var wo=function(t){return t&&t.length?To(t,En,No):void 0};var Ro=function(t,e,n){(void 0!==n&&!c(t[e],n)||void 0===n&&!(e in t))&&wt(t,e,n)},bo=Function.prototype,Ao=Object.prototype,Oo=bo.toString,Io=Ao.hasOwnProperty,So=Oo.call(Object);var Lo=function(t){if(!It(t)||"[object Object]"!=P(t))return!1;var e=Ee(t);if(null===e)return!0;var n=Io.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Oo.call(n)==So};var Co=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]};var xo=function(t){return At(t,ae(t))};var Mo=function(t,e,n,r,i,o,a){var u=Co(t,n),s=Co(e,n),c=a.get(s);if(c)Ro(t,n,c);else{var l=o?o(u,s,n+"",t,e,a):void 0,h=void 0===l;if(h){var f=Pt(s),d=!f&&Dt(s),p=!f&&!d&&Yt(s);l=s,f||d||p?Pt(u)?l=u:vi(u)?l=ce(u):d?(h=!1,l=se(s,!0)):p?(h=!1,l=qe(s,!0)):l=[]:Lo(s)||Mt(s)?(l=u,Mt(u)?l=xo(u):k(u)&&!U(u)||(l=Je(s))):h=!1}h&&(a.set(s,l),i(l,s,r,o,a),a.delete(s)),Ro(t,n,l)}};var Po=function t(e,n,r,i,o){e!==n&&pn(n,(function(a,u){if(o||(o=new _t),k(a))Mo(e,n,u,r,t,i,o);else{var s=i?i(Co(e,u),a,u+"",e,n,o):void 0;void 0===s&&(s=a),Ro(e,u,s)}}),ae)};var ko=function(t){return oi((function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=t.length>3&&"function"==typeof o?(i--,o):void 0,a&&to(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),e=Object(e);++r<i;){var u=n[r];u&&t(e,u,r,o)}return e}))}((function(t,e,n){Po(t,e,n)}));var Do=function(t,e){return t<e};var Uo=function(t){return t&&t.length?To(t,En,Do):void 0};var jo=function(t,e){return t&&t.length?To(t,mr(e),Do):void 0},Go=function(){return R.Date.now()};var Bo=function(t,e,n,r){if(!k(t))return t;for(var i=-1,o=(e=ur(e,t)).length,a=o-1,u=t;null!=u&&++i<o;){var s=sr(e[i]),c=n;if("__proto__"===s||"constructor"===s||"prototype"===s)return t;if(i!=a){var l=u[s];void 0===(c=r?r(l,s,u):void 0)&&(c=k(l)?l:jt(e[i+1])?[]:{})}bt(u,s,c),u=u[s]}return t};var Fo=function(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],u=cr(t,a);n(u,a)&&Bo(o,ur(a,t),u)}return o};var Ho=function(t,e){return Fo(t,e,(function(e,n){return dr(t,n)}))};var Vo=function(t){return ii(ei(t,void 0,Eo),t+"")}((function(t,e){return null==t?{}:Ho(t,e)})),Wo=Math.ceil,Yo=Math.max;var Xo=function(t,e,n,r){for(var i=-1,o=Yo(Wo((e-t)/(n||1)),0),a=Array(o);o--;)a[r?o:++i]=t,t+=n;return a};var zo=function(t){return function(e,n,r){return r&&"number"!=typeof r&&to(e,n,r)&&(n=r=void 0),e=fo(e),void 0===n?(n=e,e=0):n=fo(n),r=void 0===r?e<n?1:-1:fo(r),Xo(e,n,r,t)}}();var $o=function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t};var qo=function(t,e){if(t!==e){var n=void 0!==t,r=null===t,i=t==t,o=zn(t),a=void 0!==e,u=null===e,s=e==e,c=zn(e);if(!u&&!c&&!o&&t>e||o&&a&&s&&!u&&!c||r&&a&&s||!n&&s||!i)return 1;if(!r&&!o&&!c&&t<e||c&&n&&i&&!r&&!o||u&&n&&i||!a&&i||!s)return-1}return 0};var Ko=function(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,u=n.length;++r<a;){var s=qo(i[r],o[r]);if(s)return r>=u?s:s*("desc"==n[r]?-1:1)}return t.index-e.index};var Qo=function(t,e,n){e=e.length?nr(e,(function(t){return Pt(t)?function(e){return cr(e,1===t.length?t[0]:t)}:t})):[En];var r=-1;e=nr(e,Ht(mr));var i=Ar(t,(function(t,n,i){return{criteria:nr(e,(function(e){return e(t)})),index:++r,value:t}}));return $o(i,(function(t,e){return Ko(t,e,n)}))},Zo=oi((function(t,e){if(null==t)return[];var n=e.length;return n>1&&to(t,e[0],e[1])?e=[]:n>2&&to(e[0],e[1],e[2])&&(e=[e[0]]),Qo(t,Zr(e,1),[])})),Jo=0;var ta=function(t){var e=++Jo;return ar(t)+e};var ea=function(t,e,n){for(var r=-1,i=t.length,o=e.length,a={};++r<i;){var u=r<o?e[r]:void 0;n(a,t[r],u)}return a};var na,ra=function(t,e){return ea(t||[],e||[],bt)};try{na={cloneDeep:Ji,constant:dn,defaults:ro,each:_n,filter:yr,find:go,flatten:Eo,forEach:yn,forIn:mo,has:Nr,isUndefined:br,last:yo,map:Or,mapValues:_o,max:wo,merge:ko,min:Uo,minBy:jo,now:Go,pick:Vo,range:zo,reduce:Lr,sortBy:Zo,uniqueId:ta,values:yi,zipObject:ra}}catch(t){}na||(na=window._);var ia=na,oa=aa;function aa(){var t={};t._next=t._prev=t,this._sentinel=t}function ua(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function sa(t,e){if("_next"!==t&&"_prev"!==t)return e}aa.prototype.dequeue=function(){var t=this._sentinel,e=t._prev;if(e!==t)return ua(e),e},aa.prototype.enqueue=function(t){var e=this._sentinel;t._prev&&t._next&&ua(t),t._next=e._next,e._next._prev=t,e._next=t,t._prev=e},aa.prototype.toString=function(){for(var t=[],e=this._sentinel,n=e._prev;n!==e;)t.push(JSON.stringify(n,sa)),n=n._prev;return"["+t.join(", ")+"]"};var ca=Zi.Graph,la=function(t,e){if(t.nodeCount()<=1)return[];var n=function(t,e){var n=new ca,r=0,i=0;ia.forEach(t.nodes(),(function(t){n.setNode(t,{v:t,in:0,out:0})})),ia.forEach(t.edges(),(function(t){var o=n.edge(t.v,t.w)||0,a=e(t),u=o+a;n.setEdge(t.v,t.w,u),i=Math.max(i,n.node(t.v).out+=a),r=Math.max(r,n.node(t.w).in+=a)}));var o=ia.range(i+r+3).map((function(){return new oa})),a=r+1;return ia.forEach(n.nodes(),(function(t){da(o,a,n.node(t))})),{graph:n,buckets:o,zeroIdx:a}}(t,e||ha),r=function(t,e,n){var r,i=[],o=e[e.length-1],a=e[0];for(;t.nodeCount();){for(;r=a.dequeue();)fa(t,e,n,r);for(;r=o.dequeue();)fa(t,e,n,r);if(t.nodeCount())for(var u=e.length-2;u>0;--u)if(r=e[u].dequeue()){i=i.concat(fa(t,e,n,r,!0));break}}return i}(n.graph,n.buckets,n.zeroIdx);return ia.flatten(ia.map(r,(function(e){return t.outEdges(e.v,e.w)})),!0)},ha=ia.constant(1);function fa(t,e,n,r,i){var o=i?[]:void 0;return ia.forEach(t.inEdges(r.v),(function(r){var a=t.edge(r),u=t.node(r.v);i&&o.push({v:r.v,w:r.w}),u.out-=a,da(e,n,u)})),ia.forEach(t.outEdges(r.v),(function(r){var i=t.edge(r),o=r.w,a=t.node(o);a.in-=i,da(e,n,a)})),t.removeNode(r.v),o}function da(t,e,n){n.out?n.in?t[n.out-n.in+e].enqueue(n):t[t.length-1].enqueue(n):t[0].enqueue(n)}var pa={run:function(t){var e="greedy"===t.graph().acyclicer?la(t,function(t){return function(e){return t.edge(e).weight}}(t)):function(t){var e=[],n={},r={};function i(o){ia.has(r,o)||(r[o]=!0,n[o]=!0,ia.forEach(t.outEdges(o),(function(t){ia.has(n,t.w)?e.push(t):i(t.w)})),delete n[o])}return ia.forEach(t.nodes(),i),e}(t);ia.forEach(e,(function(e){var n=t.edge(e);t.removeEdge(e),n.forwardName=e.name,n.reversed=!0,t.setEdge(e.w,e.v,n,ia.uniqueId("rev"))}))},undo:function(t){ia.forEach(t.edges(),(function(e){var n=t.edge(e);if(n.reversed){t.removeEdge(e);var r=n.forwardName;delete n.reversed,delete n.forwardName,t.setEdge(e.w,e.v,n,r)}}))}};var va=Zi.Graph,ga={addDummyNode:Ea,simplify:function(t){var e=(new va).setGraph(t.graph());return ia.forEach(t.nodes(),(function(n){e.setNode(n,t.node(n))})),ia.forEach(t.edges(),(function(n){var r=e.edge(n.v,n.w)||{weight:0,minlen:1},i=t.edge(n);e.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})})),e},asNonCompoundGraph:function(t){var e=new va({multigraph:t.isMultigraph()}).setGraph(t.graph());return ia.forEach(t.nodes(),(function(n){t.children(n).length||e.setNode(n,t.node(n))})),ia.forEach(t.edges(),(function(n){e.setEdge(n,t.edge(n))})),e},successorWeights:function(t){var e=ia.map(t.nodes(),(function(e){var n={};return ia.forEach(t.outEdges(e),(function(e){n[e.w]=(n[e.w]||0)+t.edge(e).weight})),n}));return ia.zipObject(t.nodes(),e)},predecessorWeights:function(t){var e=ia.map(t.nodes(),(function(e){var n={};return ia.forEach(t.inEdges(e),(function(e){n[e.v]=(n[e.v]||0)+t.edge(e).weight})),n}));return ia.zipObject(t.nodes(),e)},intersectRect:function(t,e){var n,r,i=t.x,o=t.y,a=e.x-i,u=e.y-o,s=t.width/2,c=t.height/2;if(!a&&!u)throw new Error("Not possible to find intersection inside of the rectangle");Math.abs(u)*s>Math.abs(a)*c?(u<0&&(c=-c),n=c*a/u,r=c):(a<0&&(s=-s),n=s,r=s*u/a);return{x:i+n,y:o+r}},buildLayerMatrix:function(t){var e=ia.map(ia.range(ma(t)+1),(function(){return[]}));return ia.forEach(t.nodes(),(function(n){var r=t.node(n),i=r.rank;ia.isUndefined(i)||(e[i][r.order]=n)})),e},normalizeRanks:function(t){var e=ia.min(ia.map(t.nodes(),(function(e){return t.node(e).rank})));ia.forEach(t.nodes(),(function(n){var r=t.node(n);ia.has(r,"rank")&&(r.rank-=e)}))},removeEmptyRanks:function(t){var e=ia.min(ia.map(t.nodes(),(function(e){return t.node(e).rank}))),n=[];ia.forEach(t.nodes(),(function(r){var i=t.node(r).rank-e;n[i]||(n[i]=[]),n[i].push(r)}));var r=0,i=t.graph().nodeRankFactor;ia.forEach(n,(function(e,n){ia.isUndefined(e)&&n%i!=0?--r:r&&ia.forEach(e,(function(e){t.node(e).rank+=r}))}))},addBorderNode:function(t,e,n,r){var i={width:0,height:0};arguments.length>=4&&(i.rank=n,i.order=r);return Ea(t,"border",i,e)},maxRank:ma,partition:function(t,e){var n={lhs:[],rhs:[]};return ia.forEach(t,(function(t){e(t)?n.lhs.push(t):n.rhs.push(t)})),n},time:function(t,e){var n=ia.now();try{return e()}finally{console.log(t+" time: "+(ia.now()-n)+"ms")}},notime:function(t,e){return e()}};function Ea(t,e,n,r){var i;do{i=ia.uniqueId(r)}while(t.hasNode(i));return n.dummy=e,t.setNode(i,n),i}function ma(t){return ia.max(ia.map(t.nodes(),(function(e){var n=t.node(e).rank;if(!ia.isUndefined(n))return n})))}var ya={run:function(t){t.graph().dummyChains=[],ia.forEach(t.edges(),(function(e){!function(t,e){var n,r,i,o=e.v,a=t.node(o).rank,u=e.w,s=t.node(u).rank,c=e.name,l=t.edge(e),h=l.labelRank;if(s===a+1)return;for(t.removeEdge(e),i=0,++a;a<s;++i,++a)l.points=[],r={width:0,height:0,edgeLabel:l,edgeObj:e,rank:a},n=ga.addDummyNode(t,"edge",r,"_d"),a===h&&(r.width=l.width,r.height=l.height,r.dummy="edge-label",r.labelpos=l.labelpos),t.setEdge(o,n,{weight:l.weight},c),0===i&&t.graph().dummyChains.push(n),o=n;t.setEdge(o,u,{weight:l.weight},c)}(t,e)}))},undo:function(t){ia.forEach(t.graph().dummyChains,(function(e){var n,r=t.node(e),i=r.edgeLabel;for(t.setEdge(r.edgeObj,i);r.dummy;)n=t.successors(e)[0],t.removeNode(e),i.points.push({x:r.x,y:r.y}),"edge-label"===r.dummy&&(i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height),e=n,r=t.node(e)}))}};var _a=function(t){var e={};ia.forEach(t.sources(),(function n(r){var i=t.node(r);if(ia.has(e,r))return i.rank;e[r]=!0;var o=ia.min(ia.map(t.outEdges(r),(function(e){return n(e.w)-t.edge(e).minlen})));return o!==Number.POSITIVE_INFINITY&&null!=o||(o=0),i.rank=o}))},Ta=function(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen};var Na=Zi.Graph,wa=Ta,Ra=function(t){var e,n,r=new Na({directed:!1}),i=t.nodes()[0],o=t.nodeCount();r.setNode(i,{});for(;ba(r,t)<o;)e=Aa(r,t),n=r.hasNode(e.v)?wa(t,e):-wa(t,e),Oa(r,t,n);return r};function ba(t,e){return ia.forEach(t.nodes(),(function n(r){ia.forEach(e.nodeEdges(r),(function(i){var o=i.v,a=r===o?i.w:o;t.hasNode(a)||wa(e,i)||(t.setNode(a,{}),t.setEdge(r,a,{}),n(a))}))})),t.nodeCount()}function Aa(t,e){return ia.minBy(e.edges(),(function(n){if(t.hasNode(n.v)!==t.hasNode(n.w))return wa(e,n)}))}function Oa(t,e,n){ia.forEach(t.nodes(),(function(t){e.node(t).rank+=n}))}var Ia=Ta,Sa=_a,La=Zi.alg.preorder,Ca=Zi.alg.postorder,xa=ga.simplify,Ma=Pa;function Pa(t){t=xa(t),Sa(t);var e,n=Ra(t);for(Ua(n),ka(n,t);e=Ga(n);)Fa(n,t,e,Ba(n,t,e))}function ka(t,e){var n=Ca(t,t.nodes());n=n.slice(0,n.length-1),ia.forEach(n,(function(n){!function(t,e,n){var r=t.node(n).parent;t.edge(n,r).cutvalue=Da(t,e,n)}(t,e,n)}))}function Da(t,e,n){var r=t.node(n).parent,i=!0,o=e.edge(n,r),a=0;return o||(i=!1,o=e.edge(r,n)),a=o.weight,ia.forEach(e.nodeEdges(n),(function(o){var u,s,c=o.v===n,l=c?o.w:o.v;if(l!==r){var h=c===i,f=e.edge(o).weight;if(a+=h?f:-f,u=n,s=l,t.hasEdge(u,s)){var d=t.edge(n,l).cutvalue;a+=h?-d:d}}})),a}function Ua(t,e){arguments.length<2&&(e=t.nodes()[0]),ja(t,{},1,e)}function ja(t,e,n,r,i){var o=n,a=t.node(r);return e[r]=!0,ia.forEach(t.neighbors(r),(function(i){ia.has(e,i)||(n=ja(t,e,n,i,r))})),a.low=o,a.lim=n++,i?a.parent=i:delete a.parent,n}function Ga(t){return ia.find(t.edges(),(function(e){return t.edge(e).cutvalue<0}))}function Ba(t,e,n){var r=n.v,i=n.w;e.hasEdge(r,i)||(r=n.w,i=n.v);var o=t.node(r),a=t.node(i),u=o,s=!1;o.lim>a.lim&&(u=a,s=!0);var c=ia.filter(e.edges(),(function(e){return s===Ha(t,t.node(e.v),u)&&s!==Ha(t,t.node(e.w),u)}));return ia.minBy(c,(function(t){return Ia(e,t)}))}function Fa(t,e,n,r){var i=n.v,o=n.w;t.removeEdge(i,o),t.setEdge(r.v,r.w,{}),Ua(t),ka(t,e),function(t,e){var n=ia.find(t.nodes(),(function(t){return!e.node(t).parent})),r=La(t,n);r=r.slice(1),ia.forEach(r,(function(n){var r=t.node(n).parent,i=e.edge(n,r),o=!1;i||(i=e.edge(r,n),o=!0),e.node(n).rank=e.node(r).rank+(o?i.minlen:-i.minlen)}))}(t,e)}function Ha(t,e,n){return n.low<=e.lim&&e.lim<=n.lim}Pa.initLowLimValues=Ua,Pa.initCutValues=ka,Pa.calcCutValue=Da,Pa.leaveEdge=Ga,Pa.enterEdge=Ba,Pa.exchangeEdges=Fa;var Va=_a,Wa=function(t){switch(t.graph().ranker){case"network-simplex":Xa(t);break;case"tight-tree":!function(t){Va(t),Ra(t)}(t);break;case"longest-path":Ya(t);break;default:Xa(t)}};var Ya=Va;function Xa(t){Ma(t)}var za=function(t){var e=function(t){var e={},n=0;function r(i){var o=n;ia.forEach(t.children(i),r),e[i]={low:o,lim:n++}}return ia.forEach(t.children(),r),e}(t);ia.forEach(t.graph().dummyChains,(function(n){for(var r=t.node(n),i=r.edgeObj,o=function(t,e,n,r){var i,o,a=[],u=[],s=Math.min(e[n].low,e[r].low),c=Math.max(e[n].lim,e[r].lim);i=n;do{i=t.parent(i),a.push(i)}while(i&&(e[i].low>s||c>e[i].lim));o=i,i=r;for(;(i=t.parent(i))!==o;)u.push(i);return{path:a.concat(u.reverse()),lca:o}}(t,e,i.v,i.w),a=o.path,u=o.lca,s=0,c=a[s],l=!0;n!==i.w;){if(r=t.node(n),l){for(;(c=a[s])!==u&&t.node(c).maxRank<r.rank;)s++;c===u&&(l=!1)}if(!l){for(;s<a.length-1&&t.node(c=a[s+1]).minRank<=r.rank;)s++;c=a[s]}t.setParent(n,c),n=t.successors(n)[0]}}))};var $a={run:function(t){var e=ga.addDummyNode(t,"root",{},"_root"),n=function(t){var e={};function n(r,i){var o=t.children(r);o&&o.length&&ia.forEach(o,(function(t){n(t,i+1)})),e[r]=i}return ia.forEach(t.children(),(function(t){n(t,1)})),e}(t),r=ia.max(ia.values(n))-1,i=2*r+1;t.graph().nestingRoot=e,ia.forEach(t.edges(),(function(e){t.edge(e).minlen*=i}));var o=function(t){return ia.reduce(t.edges(),(function(e,n){return e+t.edge(n).weight}),0)}(t)+1;ia.forEach(t.children(),(function(a){qa(t,e,i,o,r,n,a)})),t.graph().nodeRankFactor=i},cleanup:function(t){var e=t.graph();t.removeNode(e.nestingRoot),delete e.nestingRoot,ia.forEach(t.edges(),(function(e){t.edge(e).nestingEdge&&t.removeEdge(e)}))}};function qa(t,e,n,r,i,o,a){var u=t.children(a);if(u.length){var s=ga.addBorderNode(t,"_bt"),c=ga.addBorderNode(t,"_bb"),l=t.node(a);t.setParent(s,a),l.borderTop=s,t.setParent(c,a),l.borderBottom=c,ia.forEach(u,(function(u){qa(t,e,n,r,i,o,u);var l=t.node(u),h=l.borderTop?l.borderTop:u,f=l.borderBottom?l.borderBottom:u,d=l.borderTop?r:2*r,p=h!==f?1:i-o[a]+1;t.setEdge(s,h,{weight:d,minlen:p,nestingEdge:!0}),t.setEdge(f,c,{weight:d,minlen:p,nestingEdge:!0})})),t.parent(a)||t.setEdge(e,s,{weight:0,minlen:i+o[a]})}else a!==e&&t.setEdge(e,a,{weight:0,minlen:n})}var Ka=function(t){ia.forEach(t.children(),(function e(n){var r=t.children(n),i=t.node(n);if(r.length&&ia.forEach(r,e),ia.has(i,"minRank")){i.borderLeft=[],i.borderRight=[];for(var o=i.minRank,a=i.maxRank+1;o<a;++o)Qa(t,"borderLeft","_bl",n,i,o),Qa(t,"borderRight","_br",n,i,o)}}))};function Qa(t,e,n,r,i,o){var a={width:0,height:0,rank:o,borderType:e},u=i[e][o-1],s=ga.addDummyNode(t,"border",a,n);i[e][o]=s,t.setParent(s,r),u&&t.setEdge(u,s,{weight:1})}var Za={adjust:function(t){var e=t.graph().rankdir.toLowerCase();"lr"!==e&&"rl"!==e||Ja(t)},undo:function(t){var e=t.graph().rankdir.toLowerCase();"bt"!==e&&"rl"!==e||function(t){ia.forEach(t.nodes(),(function(e){eu(t.node(e))})),ia.forEach(t.edges(),(function(e){var n=t.edge(e);ia.forEach(n.points,eu),ia.has(n,"y")&&eu(n)}))}(t);"lr"!==e&&"rl"!==e||(!function(t){ia.forEach(t.nodes(),(function(e){nu(t.node(e))})),ia.forEach(t.edges(),(function(e){var n=t.edge(e);ia.forEach(n.points,nu),ia.has(n,"x")&&nu(n)}))}(t),Ja(t))}};function Ja(t){ia.forEach(t.nodes(),(function(e){tu(t.node(e))})),ia.forEach(t.edges(),(function(e){tu(t.edge(e))}))}function tu(t){var e=t.width;t.width=t.height,t.height=e}function eu(t){t.y=-t.y}function nu(t){var e=t.x;t.x=t.y,t.y=e}var ru=function(t){var e={},n=ia.filter(t.nodes(),(function(e){return!t.children(e).length})),r=ia.max(ia.map(n,(function(e){return t.node(e).rank}))),i=ia.map(ia.range(r+1),(function(){return[]}));function o(n){if(!ia.has(e,n)){e[n]=!0;var r=t.node(n);i[r.rank].push(n),ia.forEach(t.successors(n),o)}}var a=ia.sortBy(n,(function(e){return t.node(e).rank}));return ia.forEach(a,o),i};var iu=function(t,e){for(var n=0,r=1;r<e.length;++r)n+=ou(t,e[r-1],e[r]);return n};function ou(t,e,n){for(var r=ia.zipObject(n,ia.map(n,(function(t,e){return e}))),i=ia.flatten(ia.map(e,(function(e){return ia.sortBy(ia.map(t.outEdges(e),(function(e){return{pos:r[e.w],weight:t.edge(e).weight}})),"pos")})),!0),o=1;o<n.length;)o<<=1;var a=2*o-1;o-=1;var u=ia.map(new Array(a),(function(){return 0})),s=0;return ia.forEach(i.forEach((function(t){var e=t.pos+o;u[e]+=t.weight;for(var n=0;e>0;)e%2&&(n+=u[e+1]),u[e=e-1>>1]+=t.weight;s+=t.weight*n}))),s}var au=function(t,e){return ia.map(e,(function(e){var n=t.inEdges(e);if(n.length){var r=ia.reduce(n,(function(e,n){var r=t.edge(n),i=t.node(n.v);return{sum:e.sum+r.weight*i.order,weight:e.weight+r.weight}}),{sum:0,weight:0});return{v:e,barycenter:r.sum/r.weight,weight:r.weight}}return{v:e}}))};var uu=function(t,e){var n={};return ia.forEach(t,(function(t,e){var r=n[t.v]={indegree:0,in:[],out:[],vs:[t.v],i:e};ia.isUndefined(t.barycenter)||(r.barycenter=t.barycenter,r.weight=t.weight)})),ia.forEach(e.edges(),(function(t){var e=n[t.v],r=n[t.w];ia.isUndefined(e)||ia.isUndefined(r)||(r.indegree++,e.out.push(n[t.w]))})),function(t){var e=[];function n(t){return function(e){e.merged||(ia.isUndefined(e.barycenter)||ia.isUndefined(t.barycenter)||e.barycenter>=t.barycenter)&&function(t,e){var n=0,r=0;t.weight&&(n+=t.barycenter*t.weight,r+=t.weight);e.weight&&(n+=e.barycenter*e.weight,r+=e.weight);t.vs=e.vs.concat(t.vs),t.barycenter=n/r,t.weight=r,t.i=Math.min(e.i,t.i),e.merged=!0}(t,e)}}function r(e){return function(n){n.in.push(e),0==--n.indegree&&t.push(n)}}for(;t.length;){var i=t.pop();e.push(i),ia.forEach(i.in.reverse(),n(i)),ia.forEach(i.out,r(i))}return ia.map(ia.filter(e,(function(t){return!t.merged})),(function(t){return ia.pick(t,["vs","i","barycenter","weight"])}))}(ia.filter(n,(function(t){return!t.indegree})))};var su=function(t,e){var n=ga.partition(t,(function(t){return ia.has(t,"barycenter")})),r=n.lhs,i=ia.sortBy(n.rhs,(function(t){return-t.i})),o=[],a=0,u=0,s=0;r.sort((c=!!e,function(t,e){return t.barycenter<e.barycenter?-1:t.barycenter>e.barycenter?1:c?e.i-t.i:t.i-e.i})),s=cu(o,i,s),ia.forEach(r,(function(t){s+=t.vs.length,o.push(t.vs),a+=t.barycenter*t.weight,u+=t.weight,s=cu(o,i,s)}));var c;var l={vs:ia.flatten(o,!0)};u&&(l.barycenter=a/u,l.weight=u);return l};function cu(t,e,n){for(var r;e.length&&(r=ia.last(e)).i<=n;)e.pop(),t.push(r.vs),n++;return n}var lu=function t(e,n,r,i){var o=e.children(n),a=e.node(n),u=a?a.borderLeft:void 0,s=a?a.borderRight:void 0,c={};u&&(o=ia.filter(o,(function(t){return t!==u&&t!==s})));var l=au(e,o);ia.forEach(l,(function(n){if(e.children(n.v).length){var o=t(e,n.v,r,i);c[n.v]=o,ia.has(o,"barycenter")&&(a=n,u=o,ia.isUndefined(a.barycenter)?(a.barycenter=u.barycenter,a.weight=u.weight):(a.barycenter=(a.barycenter*a.weight+u.barycenter*u.weight)/(a.weight+u.weight),a.weight+=u.weight))}var a,u}));var h=uu(l,r);!function(t,e){ia.forEach(t,(function(t){t.vs=ia.flatten(t.vs.map((function(t){return e[t]?e[t].vs:t})),!0)}))}(h,c);var f=su(h,i);if(u&&(f.vs=ia.flatten([u,f.vs,s],!0),e.predecessors(u).length)){var d=e.node(e.predecessors(u)[0]),p=e.node(e.predecessors(s)[0]);ia.has(f,"barycenter")||(f.barycenter=0,f.weight=0),f.barycenter=(f.barycenter*f.weight+d.order+p.order)/(f.weight+2),f.weight+=2}return f};var hu=Zi.Graph,fu=function(t,e,n){var r=function(t){var e;for(;t.hasNode(e=ia.uniqueId("_root")););return e}(t),i=new hu({compound:!0}).setGraph({root:r}).setDefaultNodeLabel((function(e){return t.node(e)}));return ia.forEach(t.nodes(),(function(o){var a=t.node(o),u=t.parent(o);(a.rank===e||a.minRank<=e&&e<=a.maxRank)&&(i.setNode(o),i.setParent(o,u||r),ia.forEach(t[n](o),(function(e){var n=e.v===o?e.w:e.v,r=i.edge(n,o),a=ia.isUndefined(r)?0:r.weight;i.setEdge(n,o,{weight:t.edge(e).weight+a})})),ia.has(a,"minRank")&&i.setNode(o,{borderLeft:a.borderLeft[e],borderRight:a.borderRight[e]}))})),i};var du=function(t,e,n){var r,i={};ia.forEach(n,(function(n){for(var o,a,u=t.parent(n);u;){if((o=t.parent(u))?(a=i[o],i[o]=u):(a=r,r=u),a&&a!==u)return void e.setEdge(a,u);u=o}}))};var pu=Zi.Graph,vu=function(t){var e=ga.maxRank(t),n=gu(t,ia.range(1,e+1),"inEdges"),r=gu(t,ia.range(e-1,-1,-1),"outEdges"),i=ru(t);mu(t,i);for(var o,a=Number.POSITIVE_INFINITY,u=0,s=0;s<4;++u,++s){Eu(u%2?n:r,u%4>=2),i=ga.buildLayerMatrix(t);var c=iu(t,i);c<a&&(s=0,o=ia.cloneDeep(i),a=c)}mu(t,o)};function gu(t,e,n){return ia.map(e,(function(e){return fu(t,e,n)}))}function Eu(t,e){var n=new pu;ia.forEach(t,(function(t){var r=t.graph().root,i=lu(t,r,n,e);ia.forEach(i.vs,(function(e,n){t.node(e).order=n})),du(t,n,i.vs)}))}function mu(t,e){ia.forEach(e,(function(e){ia.forEach(e,(function(e,n){t.node(e).order=n}))}))}var yu=Zi.Graph,_u=function(t){var e,n=ga.buildLayerMatrix(t),r=ia.merge(Tu(t,n),Nu(t,n)),i={};ia.forEach(["u","d"],(function(o){e="u"===o?n:ia.values(n).reverse(),ia.forEach(["l","r"],(function(n){"r"===n&&(e=ia.map(e,(function(t){return ia.values(t).reverse()})));var a=("u"===o?t.predecessors:t.successors).bind(t),u=bu(t,e,r,a),s=Au(t,e,u.root,u.align,"r"===n);"r"===n&&(s=ia.mapValues(s,(function(t){return-t}))),i[o+n]=s}))}));var o=Ou(t,i);return Iu(i,o),Su(i,t.graph().align)};function Tu(t,e){var n={};return ia.reduce(e,(function(e,r){var i=0,o=0,a=e.length,u=ia.last(r);return ia.forEach(r,(function(e,s){var c=function(t,e){if(t.node(e).dummy)return ia.find(t.predecessors(e),(function(e){return t.node(e).dummy}))}(t,e),l=c?t.node(c).order:a;(c||e===u)&&(ia.forEach(r.slice(o,s+1),(function(e){ia.forEach(t.predecessors(e),(function(r){var o=t.node(r),a=o.order;!(a<i||l<a)||o.dummy&&t.node(e).dummy||wu(n,r,e)}))})),o=s+1,i=l)})),r})),n}function Nu(t,e){var n={};function r(e,r,i,o,a){var u;ia.forEach(ia.range(r,i),(function(r){u=e[r],t.node(u).dummy&&ia.forEach(t.predecessors(u),(function(e){var r=t.node(e);r.dummy&&(r.order<o||r.order>a)&&wu(n,e,u)}))}))}return ia.reduce(e,(function(e,n){var i,o=-1,a=0;return ia.forEach(n,(function(u,s){if("border"===t.node(u).dummy){var c=t.predecessors(u);c.length&&(i=t.node(c[0]).order,r(n,a,s,o,i),a=s,o=i)}r(n,a,n.length,i,e.length)})),n})),n}function wu(t,e,n){if(e>n){var r=e;e=n,n=r}var i=t[e];i||(t[e]=i={}),i[n]=!0}function Ru(t,e,n){if(e>n){var r=e;e=n,n=r}return ia.has(t[e],n)}function bu(t,e,n,r){var i={},o={},a={};return ia.forEach(e,(function(t){ia.forEach(t,(function(t,e){i[t]=t,o[t]=t,a[t]=e}))})),ia.forEach(e,(function(t){var e=-1;ia.forEach(t,(function(t){var u=r(t);if(u.length)for(var s=((u=ia.sortBy(u,(function(t){return a[t]}))).length-1)/2,c=Math.floor(s),l=Math.ceil(s);c<=l;++c){var h=u[c];o[t]===t&&e<a[h]&&!Ru(n,t,h)&&(o[h]=t,o[t]=i[t]=i[h],e=a[h])}}))})),{root:i,align:o}}function Au(t,e,n,r,i){var o={},a=function(t,e,n,r){var i=new yu,o=t.graph(),a=function(t,e,n){return function(r,i,o){var a,u=r.node(i),s=r.node(o),c=0;if(c+=u.width/2,ia.has(u,"labelpos"))switch(u.labelpos.toLowerCase()){case"l":a=-u.width/2;break;case"r":a=u.width/2}if(a&&(c+=n?a:-a),a=0,c+=(u.dummy?e:t)/2,c+=(s.dummy?e:t)/2,c+=s.width/2,ia.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":a=s.width/2;break;case"r":a=-s.width/2}return a&&(c+=n?a:-a),a=0,c}}(o.nodesep,o.edgesep,r);return ia.forEach(e,(function(e){var r;ia.forEach(e,(function(e){var o=n[e];if(i.setNode(o),r){var u=n[r],s=i.edge(u,o);i.setEdge(u,o,Math.max(a(t,e,r),s||0))}r=e}))})),i}(t,e,n,i),u=i?"borderLeft":"borderRight";function s(t,e){for(var n=a.nodes(),r=n.pop(),i={};r;)i[r]?t(r):(i[r]=!0,n.push(r),n=n.concat(e(r))),r=n.pop()}return s((function(t){o[t]=a.inEdges(t).reduce((function(t,e){return Math.max(t,o[e.v]+a.edge(e))}),0)}),a.predecessors.bind(a)),s((function(e){var n=a.outEdges(e).reduce((function(t,e){return Math.min(t,o[e.w]-a.edge(e))}),Number.POSITIVE_INFINITY),r=t.node(e);n!==Number.POSITIVE_INFINITY&&r.borderType!==u&&(o[e]=Math.max(o[e],n))}),a.successors.bind(a)),ia.forEach(r,(function(t){o[t]=o[n[t]]})),o}function Ou(t,e){return ia.minBy(ia.values(e),(function(e){var n=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;return ia.forIn(e,(function(e,i){var o=function(t,e){return t.node(e).width}(t,i)/2;n=Math.max(e+o,n),r=Math.min(e-o,r)})),n-r}))}function Iu(t,e){var n=ia.values(e),r=ia.min(n),i=ia.max(n);ia.forEach(["u","d"],(function(n){ia.forEach(["l","r"],(function(o){var a,u=n+o,s=t[u];if(s!==e){var c=ia.values(s);(a="l"===o?r-ia.min(c):i-ia.max(c))&&(t[u]=ia.mapValues(s,(function(t){return t+a})))}}))}))}function Su(t,e){return ia.mapValues(t.ul,(function(n,r){if(e)return t[e.toLowerCase()][r];var i=ia.sortBy(ia.map(t,r));return(i[1]+i[2])/2}))}var Lu=_u,Cu=function(t){(function(t){var e=ga.buildLayerMatrix(t),n=t.graph().ranksep,r=0;ia.forEach(e,(function(e){var i=ia.max(ia.map(e,(function(e){return t.node(e).height})));ia.forEach(e,(function(e){t.node(e).y=r+i/2})),r+=i+n}))})(t=ga.asNonCompoundGraph(t)),ia.forEach(Lu(t),(function(e,n){t.node(n).x=e}))};var xu=ga.normalizeRanks,Mu=ga.removeEmptyRanks,Pu=ga,ku=Zi.Graph,Du=function(t,e){var n=e&&e.debugTiming?Pu.time:Pu.notime;n("layout",(function(){var e=n("  buildLayoutGraph",(function(){return function(t){var e=new ku({multigraph:!0,compound:!0}),n=Xu(t.graph());return e.setGraph(ia.merge({},ju,Yu(n,Uu),ia.pick(n,Gu))),ia.forEach(t.nodes(),(function(n){var r=Xu(t.node(n));e.setNode(n,ia.defaults(Yu(r,Bu),Fu)),e.setParent(n,t.parent(n))})),ia.forEach(t.edges(),(function(n){var r=Xu(t.edge(n));e.setEdge(n,ia.merge({},Vu,Yu(r,Hu),ia.pick(r,Wu)))})),e}(t)}));n("  runLayout",(function(){!function(t,e){e("    makeSpaceForEdgeLabels",(function(){!function(t){var e=t.graph();e.ranksep/=2,ia.forEach(t.edges(),(function(n){var r=t.edge(n);r.minlen*=2,"c"!==r.labelpos.toLowerCase()&&("TB"===e.rankdir||"BT"===e.rankdir?r.width+=r.labeloffset:r.height+=r.labeloffset)}))}(t)})),e("    removeSelfEdges",(function(){!function(t){ia.forEach(t.edges(),(function(e){if(e.v===e.w){var n=t.node(e.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:e,label:t.edge(e)}),t.removeEdge(e)}}))}(t)})),e("    acyclic",(function(){pa.run(t)})),e("    nestingGraph.run",(function(){$a.run(t)})),e("    rank",(function(){Wa(Pu.asNonCompoundGraph(t))})),e("    injectEdgeLabelProxies",(function(){!function(t){ia.forEach(t.edges(),(function(e){var n=t.edge(e);if(n.width&&n.height){var r=t.node(e.v),i={rank:(t.node(e.w).rank-r.rank)/2+r.rank,e:e};Pu.addDummyNode(t,"edge-proxy",i,"_ep")}}))}(t)})),e("    removeEmptyRanks",(function(){Mu(t)})),e("    nestingGraph.cleanup",(function(){$a.cleanup(t)})),e("    normalizeRanks",(function(){xu(t)})),e("    assignRankMinMax",(function(){!function(t){var e=0;ia.forEach(t.nodes(),(function(n){var r=t.node(n);r.borderTop&&(r.minRank=t.node(r.borderTop).rank,r.maxRank=t.node(r.borderBottom).rank,e=ia.max(e,r.maxRank))})),t.graph().maxRank=e}(t)})),e("    removeEdgeLabelProxies",(function(){!function(t){ia.forEach(t.nodes(),(function(e){var n=t.node(e);"edge-proxy"===n.dummy&&(t.edge(n.e).labelRank=n.rank,t.removeNode(e))}))}(t)})),e("    normalize.run",(function(){ya.run(t)})),e("    parentDummyChains",(function(){za(t)})),e("    addBorderSegments",(function(){Ka(t)})),e("    order",(function(){vu(t)})),e("    insertSelfEdges",(function(){!function(t){var e=Pu.buildLayerMatrix(t);ia.forEach(e,(function(e){var n=0;ia.forEach(e,(function(e,r){var i=t.node(e);i.order=r+n,ia.forEach(i.selfEdges,(function(e){Pu.addDummyNode(t,"selfedge",{width:e.label.width,height:e.label.height,rank:i.rank,order:r+ ++n,e:e.e,label:e.label},"_se")})),delete i.selfEdges}))}))}(t)})),e("    adjustCoordinateSystem",(function(){Za.adjust(t)})),e("    position",(function(){Cu(t)})),e("    positionSelfEdges",(function(){!function(t){ia.forEach(t.nodes(),(function(e){var n=t.node(e);if("selfedge"===n.dummy){var r=t.node(n.e.v),i=r.x+r.width/2,o=r.y,a=n.x-i,u=r.height/2;t.setEdge(n.e,n.label),t.removeNode(e),n.label.points=[{x:i+2*a/3,y:o-u},{x:i+5*a/6,y:o-u},{x:i+a,y:o},{x:i+5*a/6,y:o+u},{x:i+2*a/3,y:o+u}],n.label.x=n.x,n.label.y=n.y}}))}(t)})),e("    removeBorderNodes",(function(){!function(t){ia.forEach(t.nodes(),(function(e){if(t.children(e).length){var n=t.node(e),r=t.node(n.borderTop),i=t.node(n.borderBottom),o=t.node(ia.last(n.borderLeft)),a=t.node(ia.last(n.borderRight));n.width=Math.abs(a.x-o.x),n.height=Math.abs(i.y-r.y),n.x=o.x+n.width/2,n.y=r.y+n.height/2}})),ia.forEach(t.nodes(),(function(e){"border"===t.node(e).dummy&&t.removeNode(e)}))}(t)})),e("    normalize.undo",(function(){ya.undo(t)})),e("    fixupEdgeLabelCoords",(function(){!function(t){ia.forEach(t.edges(),(function(e){var n=t.edge(e);if(ia.has(n,"x"))switch("l"!==n.labelpos&&"r"!==n.labelpos||(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset}}))}(t)})),e("    undoCoordinateSystem",(function(){Za.undo(t)})),e("    translateGraph",(function(){!function(t){var e=Number.POSITIVE_INFINITY,n=0,r=Number.POSITIVE_INFINITY,i=0,o=t.graph(),a=o.marginx||0,u=o.marginy||0;function s(t){var o=t.x,a=t.y,u=t.width,s=t.height;e=Math.min(e,o-u/2),n=Math.max(n,o+u/2),r=Math.min(r,a-s/2),i=Math.max(i,a+s/2)}ia.forEach(t.nodes(),(function(e){s(t.node(e))})),ia.forEach(t.edges(),(function(e){var n=t.edge(e);ia.has(n,"x")&&s(n)})),e-=a,r-=u,ia.forEach(t.nodes(),(function(n){var i=t.node(n);i.x-=e,i.y-=r})),ia.forEach(t.edges(),(function(n){var i=t.edge(n);ia.forEach(i.points,(function(t){t.x-=e,t.y-=r})),ia.has(i,"x")&&(i.x-=e),ia.has(i,"y")&&(i.y-=r)})),o.width=n-e+a,o.height=i-r+u}(t)})),e("    assignNodeIntersects",(function(){!function(t){ia.forEach(t.edges(),(function(e){var n,r,i=t.edge(e),o=t.node(e.v),a=t.node(e.w);i.points?(n=i.points[0],r=i.points[i.points.length-1]):(i.points=[],n=a,r=o),i.points.unshift(Pu.intersectRect(o,n)),i.points.push(Pu.intersectRect(a,r))}))}(t)})),e("    reversePoints",(function(){!function(t){ia.forEach(t.edges(),(function(e){var n=t.edge(e);n.reversed&&n.points.reverse()}))}(t)})),e("    acyclic.undo",(function(){pa.undo(t)}))}(e,n)})),n("  updateInputGraph",(function(){!function(t,e){ia.forEach(t.nodes(),(function(n){var r=t.node(n),i=e.node(n);r&&(r.x=i.x,r.y=i.y,e.children(n).length&&(r.width=i.width,r.height=i.height))})),ia.forEach(t.edges(),(function(n){var r=t.edge(n),i=e.edge(n);r.points=i.points,ia.has(i,"x")&&(r.x=i.x,r.y=i.y)})),t.graph().width=e.graph().width,t.graph().height=e.graph().height}(t,e)}))}))};var Uu=["nodesep","edgesep","ranksep","marginx","marginy"],ju={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},Gu=["acyclicer","ranker","rankdir","align"],Bu=["width","height"],Fu={width:0,height:0},Hu=["minlen","weight","width","height","labeloffset"],Vu={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Wu=["labelpos"];function Yu(t,e){return ia.mapValues(ia.pick(t,e),Number)}function Xu(t){var e={};return ia.forEach(t,(function(t,n){e[n.toLowerCase()]=t})),e}var zu=Zi.Graph;var $u,qu={graphlib:Zi,layout:Du,debug:{debugOrdering:function(t){var e=ga.buildLayerMatrix(t),n=new zu({compound:!0,multigraph:!0}).setGraph({});return ia.forEach(t.nodes(),(function(e){n.setNode(e,{label:e}),n.setParent(e,"layer"+t.node(e).rank)})),ia.forEach(t.edges(),(function(t){n.setEdge(t.v,t.w,{},t.name)})),ia.forEach(e,(function(t,e){var r="layer"+e;n.setNode(r,{rank:"same"}),ia.reduce(t,(function(t,e){return n.setEdge(t,e,{style:"invis"}),e}))})),n}},util:{time:ga.time,notime:ga.notime},version:"0.8.5"};try{$u=qu}catch(t){}$u||($u=window.dagre);var Ku=$u,Qu=function(t,e){return t.intersect(e)};var Zu=function(t,e,n,r){var i=t.x,o=t.y,a=i-r.x,u=o-r.y,s=Math.sqrt(e*e*u*u+n*n*a*a),c=Math.abs(e*n*a/s);r.x<i&&(c=-c);var l=Math.abs(e*n*u/s);r.y<o&&(l=-l);return{x:i+c,y:o+l}};var Ju=function(t,e,n){return Zu(t,e,e,n)};var ts=function(t,e,n,r){var i,o,a,u,s,c,l,h,f,d,p,v,g;if(i=e.y-t.y,a=t.x-e.x,s=e.x*t.y-t.x*e.y,f=i*n.x+a*n.y+s,d=i*r.x+a*r.y+s,0!==f&&0!==d&&es(f,d))return;if(o=r.y-n.y,u=n.x-r.x,c=r.x*n.y-n.x*r.y,l=o*t.x+u*t.y+c,h=o*e.x+u*e.y+c,0!==l&&0!==h&&es(l,h))return;if(0===(p=i*u-o*a))return;return v=Math.abs(p/2),{x:(g=a*c-u*s)<0?(g-v)/p:(g+v)/p,y:(g=o*s-i*c)<0?(g-v)/p:(g+v)/p}};function es(t,e){return t*e>0}var ns=function(t,e,n){var r=t.x,i=t.y,o=[],a=Number.POSITIVE_INFINITY,u=Number.POSITIVE_INFINITY;e.forEach((function(t){a=Math.min(a,t.x),u=Math.min(u,t.y)}));for(var s=r-t.width/2-a,c=i-t.height/2-u,l=0;l<e.length;l++){var h=e[l],f=e[l<e.length-1?l+1:0],d=ts(t,n,{x:s+h.x,y:c+h.y},{x:s+f.x,y:c+f.y});d&&o.push(d)}if(!o.length)return console.log("NO INTERSECTION FOUND, RETURN NODE CENTER",t),t;o.length>1&&o.sort((function(t,e){var r=t.x-n.x,i=t.y-n.y,o=Math.sqrt(r*r+i*i),a=e.x-n.x,u=e.y-n.y,s=Math.sqrt(a*a+u*u);return o<s?-1:o===s?0:1}));return o[0]};var rs=function(t,e){var n,r,i=t.x,o=t.y,a=e.x-i,u=e.y-o,s=t.width/2,c=t.height/2;Math.abs(u)*s>Math.abs(a)*c?(u<0&&(c=-c),n=0===u?0:c*a/u,r=c):(a<0&&(s=-s),n=s,r=0===a?0:s*u/a);return{x:i+n,y:o+r}};var is,os={node:Qu,circle:Ju,ellipse:Zu,polygon:ns,rect:rs};try{is={defaults:ro,each:_n,isFunction:U,isPlainObject:Lo,pick:Vo,has:Nr,range:zo,uniqueId:ta}}catch(t){}is||(is=window._);var as,us=is;if(!as)try{as=r.default}catch(t){}as||(as=window.d3);var ss=as,cs={isSubgraph:function(t,e){return!!t.children(e).length},edgeToId:function(t){return hs(t.v)+":"+hs(t.w)+":"+hs(t.name)},applyStyle:function(t,e){e&&t.attr("style",e)},applyClass:function(t,e,n){e&&t.attr("class",e).attr("class",n+" "+t.attr("class"))},applyTransition:function(t,e){var n=e.graph();if(us.isPlainObject(n)){var r=n.transition;if(us.isFunction(r))return r(t)}return t}};var ls=/:/g;function hs(t){return t?String(t).replace(ls,"\\:"):""}var fs=function(t,e){for(var n=t.append("text"),r=function(t){for(var e,n="",r=!1,i=0;i<t.length;++i)if(e=t[i],r){switch(e){case"n":n+="\n";break;default:n+=e}r=!1}else"\\"===e?r=!0:n+=e;return n}(e.label).split("\n"),i=0;i<r.length;i++)n.append("tspan").attr("xml:space","preserve").attr("dy","1em").attr("x","1").text(r[i]);return cs.applyStyle(n,e.labelStyle),n};var ds=function(t,e){var n=t.append("foreignObject").attr("width","100000"),r=n.append("xhtml:div");r.attr("xmlns","http://www.w3.org/1999/xhtml");var i=e.label;switch(typeof i){case"function":r.insert(i);break;case"object":r.insert((function(){return i}));break;default:r.html(i)}cs.applyStyle(r,e.labelStyle),r.style("display","inline-block"),r.style("white-space","nowrap");var o=r.node().getBoundingClientRect();return n.attr("width",o.width).attr("height",o.height),n};var ps=function(t,e){var n=t;return n.node().appendChild(e.label),cs.applyStyle(n,e.labelStyle),n};var vs=function(t,e,n){var r=e.label,i=t.append("g");"svg"===e.labelType?ps(i,e):"string"!=typeof r||"html"===e.labelType?ds(i,e):fs(i,e);var o,a=i.node().getBBox();switch(n){case"top":o=-e.height/2;break;case"bottom":o=e.height/2-a.height;break;default:o=-a.height/2}return i.attr("transform","translate("+-a.width/2+","+o+")"),i};var gs=function(t,e,n){var r,i=e.nodes().filter((function(t){return!cs.isSubgraph(e,t)})),o=t.selectAll("g.node").data(i,(function(t){return t})).classed("update",!0);o.exit().remove(),o.enter().append("g").attr("class","node").style("opacity",0),(o=t.selectAll("g.node")).each((function(t){var r=e.node(t),i=ss.select(this);cs.applyClass(i,r.class,(i.classed("update")?"update ":"")+"node"),i.select("g.label").remove();var o=i.append("g").attr("class","label"),a=vs(o,r),u=n[r.shape],s=us.pick(a.node().getBBox(),"width","height");r.elem=this,r.id&&i.attr("id",r.id),r.labelId&&o.attr("id",r.labelId),us.has(r,"width")&&(s.width=r.width),us.has(r,"height")&&(s.height=r.height),s.width+=r.paddingLeft+r.paddingRight,s.height+=r.paddingTop+r.paddingBottom,o.attr("transform","translate("+(r.paddingLeft-r.paddingRight)/2+","+(r.paddingTop-r.paddingBottom)/2+")");var c=ss.select(this);c.select(".label-container").remove();var l=u(c,s,r).classed("label-container",!0);cs.applyStyle(l,r.style);var h=l.node().getBBox();r.width=h.width,r.height=h.height})),r=o.exit?o.exit():o.selectAll(null);return cs.applyTransition(r,e).style("opacity",0).remove(),o};var Es=function(t,e){var n,r=e.nodes().filter((function(t){return cs.isSubgraph(e,t)})),i=t.selectAll("g.cluster").data(r,(function(t){return t}));i.selectAll("*").remove(),i.enter().append("g").attr("class","cluster").attr("id",(function(t){return e.node(t).id})).style("opacity",0),i=t.selectAll("g.cluster"),cs.applyTransition(i,e).style("opacity",1),i.each((function(t){var n=e.node(t),r=ss.select(this);ss.select(this).append("rect");var i=r.append("g").attr("class","label");vs(i,n,n.clusterLabelPos)})),i.selectAll("rect").each((function(t){var n=e.node(t),r=ss.select(this);cs.applyStyle(r,n.style)})),n=i.exit?i.exit():i.selectAll(null);return cs.applyTransition(n,e).style("opacity",0).remove(),i};var ms=function(t,e){var n,r=t.selectAll("g.edgeLabel").data(e.edges(),(function(t){return cs.edgeToId(t)})).classed("update",!0);r.exit().remove(),r.enter().append("g").classed("edgeLabel",!0).style("opacity",0),(r=t.selectAll("g.edgeLabel")).each((function(t){var n=ss.select(this);n.select(".label").remove();var r=e.edge(t),i=vs(n,e.edge(t),0).classed("label",!0),o=i.node().getBBox();r.labelId&&i.attr("id",r.labelId),us.has(r,"width")||(r.width=o.width),us.has(r,"height")||(r.height=o.height)})),n=r.exit?r.exit():r.selectAll(null);return cs.applyTransition(n,e).style("opacity",0).remove(),r};var ys=function(t,e,n){var r=t.selectAll("g.edgePath").data(e.edges(),(function(t){return cs.edgeToId(t)})).classed("update",!0),i=function(t,e){var n=t.enter().append("g").attr("class","edgePath").style("opacity",0);return n.append("path").attr("class","path").attr("d",(function(t){var n=e.edge(t),r=e.node(t.v).elem;return _s(n,us.range(n.points.length).map((function(){return e=(t=r).getBBox(),{x:(n=t.ownerSVGElement.getScreenCTM().inverse().multiply(t.getScreenCTM()).translate(e.width/2,e.height/2)).e,y:n.f};var t,e,n})))})),n.append("defs"),n}(r,e);!function(t,e){var n=t.exit();cs.applyTransition(n,e).style("opacity",0).remove()}(r,e);var o=void 0!==r.merge?r.merge(i):r;return cs.applyTransition(o,e).style("opacity",1),o.each((function(t){var n=ss.select(this),r=e.edge(t);r.elem=this,r.id&&n.attr("id",r.id),cs.applyClass(n,r.class,(n.classed("update")?"update ":"")+"edgePath")})),o.selectAll("path.path").each((function(t){var n=e.edge(t);n.arrowheadId=us.uniqueId("arrowhead");var r=ss.select(this).attr("marker-end",(function(){return"url("+(t=location.href,e=n.arrowheadId,t.split("#")[0]+"#"+e+")");var t,e})).style("fill","none");cs.applyTransition(r,e).attr("d",(function(t){return function(t,e){var n=t.edge(e),r=t.node(e.v),i=t.node(e.w),o=n.points.slice(1,n.points.length-1);return o.unshift(Qu(r,o[0])),o.push(Qu(i,o[o.length-1])),_s(n,o)}(e,t)})),cs.applyStyle(r,n.style)})),o.selectAll("defs *").remove(),o.selectAll("defs").each((function(t){var r=e.edge(t);(0,n[r.arrowhead])(ss.select(this),r.arrowheadId,r,"arrowhead")})),o};function _s(t,e){var n=(ss.line||ss.svg.line)().x((function(t){return t.x})).y((function(t){return t.y}));return(n.curve||n.interpolate)(t.curve),n(e)}var Ts=function(t,e){function n(t){var n=e.node(t);return"translate("+n.x+","+n.y+")"}t.filter((function(){return!ss.select(this).classed("update")})).attr("transform",n),cs.applyTransition(t,e).style("opacity",1).attr("transform",n)};var Ns=function(t,e){function n(t){var n=e.edge(t);return us.has(n,"x")?"translate("+n.x+","+n.y+")":""}t.filter((function(){return!ss.select(this).classed("update")})).attr("transform",n),cs.applyTransition(t,e).style("opacity",1).attr("transform",n)};var ws=function(t,e){var n=t.filter((function(){return!ss.select(this).classed("update")}));function r(t){var n=e.node(t);return"translate("+n.x+","+n.y+")"}n.attr("transform",r),cs.applyTransition(t,e).style("opacity",1).attr("transform",r),cs.applyTransition(n.selectAll("rect"),e).attr("width",(function(t){return e.node(t).width})).attr("height",(function(t){return e.node(t).height})).attr("x",(function(t){return-e.node(t).width/2})).attr("y",(function(t){return-e.node(t).height/2}))};var Rs={rect:function(t,e,n){var r=t.insert("rect",":first-child").attr("rx",n.rx).attr("ry",n.ry).attr("x",-e.width/2).attr("y",-e.height/2).attr("width",e.width).attr("height",e.height);return n.intersect=function(t){return rs(n,t)},r},ellipse:function(t,e,n){var r=e.width/2,i=e.height/2,o=t.insert("ellipse",":first-child").attr("x",-e.width/2).attr("y",-e.height/2).attr("rx",r).attr("ry",i);return n.intersect=function(t){return Zu(n,r,i,t)},o},circle:function(t,e,n){var r=Math.max(e.width,e.height)/2,i=t.insert("circle",":first-child").attr("x",-e.width/2).attr("y",-e.height/2).attr("r",r);return n.intersect=function(t){return Ju(n,r,t)},i},diamond:function(t,e,n){var r=e.width*Math.SQRT2/2,i=e.height*Math.SQRT2/2,o=[{x:0,y:-i},{x:-r,y:0},{x:0,y:i},{x:r,y:0}],a=t.insert("polygon",":first-child").attr("points",o.map((function(t){return t.x+","+t.y})).join(" "));return n.intersect=function(t){return ns(n,o,t)},a}};var bs={default:As,normal:As,vee:function(t,e,n,r){var i=t.append("marker").attr("id",e).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 L 4 5 z").style("stroke-width",1).style("stroke-dasharray","1,0");cs.applyStyle(i,n[r+"Style"]),n[r+"Class"]&&i.attr("class",n[r+"Class"])},undirected:function(t,e,n,r){var i=t.append("marker").attr("id",e).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 5 L 10 5").style("stroke-width",1).style("stroke-dasharray","1,0");cs.applyStyle(i,n[r+"Style"]),n[r+"Class"]&&i.attr("class",n[r+"Class"])}};function As(t,e,n,r){var i=t.append("marker").attr("id",e).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").style("stroke-width",1).style("stroke-dasharray","1,0");cs.applyStyle(i,n[r+"Style"]),n[r+"Class"]&&i.attr("class",n[r+"Class"])}var Os=Ku.layout,Is=function(){var t=gs,e=Es,n=ms,r=ys,i=Ts,o=Ns,a=ws,u=Rs,s=bs,c=function(c,l){!function(t){t.nodes().forEach((function(e){var n=t.node(e);us.has(n,"label")||t.children(e).length||(n.label=e),us.has(n,"paddingX")&&us.defaults(n,{paddingLeft:n.paddingX,paddingRight:n.paddingX}),us.has(n,"paddingY")&&us.defaults(n,{paddingTop:n.paddingY,paddingBottom:n.paddingY}),us.has(n,"padding")&&us.defaults(n,{paddingLeft:n.padding,paddingRight:n.padding,paddingTop:n.padding,paddingBottom:n.padding}),us.defaults(n,Ss),us.each(["paddingLeft","paddingRight","paddingTop","paddingBottom"],(function(t){n[t]=Number(n[t])})),us.has(n,"width")&&(n._prevWidth=n.width),us.has(n,"height")&&(n._prevHeight=n.height)})),t.edges().forEach((function(e){var n=t.edge(e);us.has(n,"label")||(n.label=""),us.defaults(n,Ls)}))}(l);var h=Cs(c,"output"),f=Cs(h,"clusters"),d=Cs(h,"edgePaths"),p=n(Cs(h,"edgeLabels"),l),v=t(Cs(h,"nodes"),l,u);Os(l),i(v,l),o(p,l),r(d,l,s);var g=e(f,l);a(g,l),function(t){us.each(t.nodes(),(function(e){var n=t.node(e);us.has(n,"_prevWidth")?n.width=n._prevWidth:delete n.width,us.has(n,"_prevHeight")?n.height=n._prevHeight:delete n.height,delete n._prevWidth,delete n._prevHeight}))}(l)};return c.createNodes=function(e){return arguments.length?(t=e,c):t},c.createClusters=function(t){return arguments.length?(e=t,c):e},c.createEdgeLabels=function(t){return arguments.length?(n=t,c):n},c.createEdgePaths=function(t){return arguments.length?(r=t,c):r},c.shapes=function(t){return arguments.length?(u=t,c):u},c.arrows=function(t){return arguments.length?(s=t,c):s},c};var Ss={paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,rx:0,ry:0,shape:"rect"},Ls={arrowhead:"normal",curve:ss.curveLinear};function Cs(t,e){var n=t.select("g."+e);return n.empty()&&(n=t.append("g").attr("class",e)),n}var xs={graphlib:Qi,dagre:Ku,intersect:os,render:Is,util:cs,version:"0.6.4"},Ms=function(t){return function(t){return!!t&&"object"==typeof t}(t)&&!function(t){var e=Object.prototype.toString.call(t);return"[object RegExp]"===e||"[object Date]"===e||function(t){return t.$$typeof===Ps}(t)}(t)};
/**
	 * @license
	 * Copyright (c) 2012-2013 Chris Pettitt
	 *
	 * Permission is hereby granted, free of charge, to any person obtaining a copy
	 * of this software and associated documentation files (the "Software"), to deal
	 * in the Software without restriction, including without limitation the rights
	 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
	 * copies of the Software, and to permit persons to whom the Software is
	 * furnished to do so, subject to the following conditions:
	 *
	 * The above copyright notice and this permission notice shall be included in
	 * all copies or substantial portions of the Software.
	 *
	 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
	 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
	 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
	 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
	 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
	 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
	 * THE SOFTWARE.
	 */var Ps="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function ks(t,e){return!1!==e.clone&&e.isMergeableObject(t)?Bs((n=t,Array.isArray(n)?[]:{}),t,e):t;var n}function Ds(t,e,n){return t.concat(e).map((function(t){return ks(t,n)}))}function Us(t){return Object.keys(t).concat(function(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter((function(e){return t.propertyIsEnumerable(e)})):[]}(t))}function js(t,e){try{return e in t}catch(t){return!1}}function Gs(t,e,n){var r={};return n.isMergeableObject(t)&&Us(t).forEach((function(e){r[e]=ks(t[e],n)})),Us(e).forEach((function(i){(function(t,e){return js(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))})(t,i)||(js(t,i)&&n.isMergeableObject(e[i])?r[i]=function(t,e){if(!e.customMerge)return Bs;var n=e.customMerge(t);return"function"==typeof n?n:Bs}(i,n)(t[i],e[i],n):r[i]=ks(e[i],n))})),r}function Bs(t,e,n){(n=n||{}).arrayMerge=n.arrayMerge||Ds,n.isMergeableObject=n.isMergeableObject||Ms,n.cloneUnlessOtherwiseSpecified=ks;var r=Array.isArray(e);return r===Array.isArray(t)?r?n.arrayMerge(t,e,n):Gs(t,e,n):ks(e,n)}Bs.all=function(t,e){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce((function(t,n){return Bs(t,n,e)}),{})};var Fs=Bs;class Hs{constructor(t=0,e=0,n=1){this.x=t,this.y=e,this.k=n}toString(){return[0!==this.x?`translateX(${this.x}px)`:null,0!==this.y?`translateY(${this.y}px)`:null,1!==this.k?`scale(${this.k}`:null].join(" ")}}var Vs={contains:(t,e)=>t.top<=e.top&&t.bottom>=e.bottom&&t.left<=e.left&&t.right>=e.right,delta(t,e){let n=0,r=0;return t.left>=e.left?n=t.left-e.left:t.right<=e.right&&(n=t.right-e.right),t.top>=e.top?r=t.top-e.top:t.bottom<=e.bottom&&(r=t.bottom-e.bottom),{x:n,y:r}},shift:(t,e)=>new Hs(t.x-e.x,t.y-e.y),Transform:Hs};r.default.scaleOrdinal().range(r.default.schemeCategory10.map((t=>{const e=r.default.rgb(t);return e.opacity=.05,e}))),r.default.scaleOrdinal().range(r.default.schemeCategory10.map((t=>{const e=r.default.rgb(t);return e.opacity=.8,e})));const Ws=Object.prototype.hasOwnProperty,Ys=t=>"string"!=typeof t?"":t.slice(0,1).toUpperCase()+t.slice(1).toLowerCase(),Xs=t=>null===/[A-Z]/.exec(t)?16:1,zs=t=>{const e=t.length;if(e<1)return[];const n=(t=>t.length<=2?null:{firstCase:Xs(t[0]),secondCase:Xs(t[1])})(t);if(!n)return[t];const{firstCase:r,secondCase:i}=n,o=[];let a=!1;for(let n=2;n<e;n+=1){const e=Xs(t[n]);if(1===e){if(16===r||16===i){const e=t.slice(0,n);o.push(e),o.push(...zs(t.slice(n))),a=!0;break}}else if(16===e&&1===r&&1===i){const e=t.slice(0,n-1);o.push(e),o.push(...zs(t.slice(n-1))),a=!0;break}}return a||o.push(t),o},$s=new Set(["insert","update","select","delete","alter","create","drop","rename","truncate","replace","savepoint","release","rollback","lock","unlock","set","start","call","delete","do","perform","handler","load","purge","reset","prepare","execute","deallocate","xa"]),qs=t=>{let e=(t=>{if(!1===Ws.call(t,"http_server_request"))return null;const e=t.http_server_request.request_method,n=t.http_server_request.path_info;let r;try{r=`${e} ${new URL(n,"http://hostname").pathname}`}catch(t){r="HTTP Request"}return r})(t);return e||(e=(t=>{if(!1===Ws.call(t,"sql_query"))return null;const e=[...(t.sql_query.normalized_sql||t.sql_query.sql||"").trimLeft()];e.length>0&&"("===e[0]&&e.shift();let n=0;const r=e.reduce(((t,e)=>("("===e&&++n,0===n&&t.push(e),")"===e&&--n,t)),[]).join("");let i=null;return i=-1===r.search(/\s/)?r:r.replace(/[^\w]+/g," ").toLowerCase().split(" ").find((t=>$s.has(t))),["SQL",Ys(i)||null].join(" ")})(t)),e};const Ks={github:t=>{const e=t.url.match(/github.com[:|/]?(.*).git/);if(!e||e.length<=1)return;const n="number"==typeof t.lineNumber?`#L${t.lineNumber}`:"";return`https://github.com/${e[1]}/blob/${t.commit}/${t.path}${n}`}};function Qs(t,e){return!!e&&Vs.contains(t.element.getBoundingClientRect(),e.getBoundingClientRect())}const Zs={http:function(t,e,n){const r=e.width,i=e.height,o=[{x:-2*i/6,y:0},{x:r-i/6,y:0},{x:r+2*i/6,y:-i},{x:i/6,y:-i}],a=t.insert("polygon",":first-child").attr("points",o.map((function(t){return`${t.x},${t.y}`})).join()).attr("transform",`translate(${.5*-r}, ${.5*i})`).attr("class","shape");return n.intersect=function(t){return xs.intersect.polygon(n,o,t)},a},database:function(t,e,n){const r=e.width,i=r/2,o=i/(2.5+r/50),a=e.height+o,u="M 0,"+o+" a "+i+","+o+" 0,0,0 "+r+" 0 a "+i+","+o+" 0,0,0 "+-r+" 0 l 0,"+a+" a "+i+","+o+" 0,0,0 "+r+" 0 l 0,"+-a,s=t.attr("label-offset-y",o).insert("path",":first-child").attr("d",u).attr("transform",`translate(${-r/2}, ${-(a/2+o)})`).attr("class","shape");return n.intersect=function(t){const e=xs.intersect.rect(n,t),r=e.x-n.x;if(0!=i&&(Math.abs(r)<n.width/2||Math.abs(r)==n.width/2&&Math.abs(e.y-n.y)>n.height/2-o)){let a=o*o*(1-r*r/(i*i));0!=a&&(a=Math.sqrt(a)),a=o-a,t.y-n.y>0&&(a=-a),e.y+=a}return e},s},hexagon:function(t,e,n){const r=e.height,i=r/4,o=e.width+2*i,a=[{x:i,y:0},{x:o-i,y:0},{x:o,y:-r/2},{x:o-i,y:-r},{x:i,y:-r},{x:0,y:-r/2}],u=t.insert("polygon",":first-child").attr("points",a.map((function(t){return t.x+","+t.y})).join()).attr("transform",`translate(${.5*-o}, ${.5*r})`).attr("class","shape");return n.intersect=function(t){return xs.intersect.polygon(n,a,t)},u}};const Js=Object.prototype.hasOwnProperty,tc=new Set(["insert","update","select","delete","alter","create","drop","rename","truncate","replace","savepoint","release","rollback","lock","unlock","set","start","call","delete","do","perform","handler","load","purge","reset","prepare","execute","deallocate","xa"]),ec=t=>{let e=(t=>{if(!1===Js.call(t,"http_server_request"))return null;const e=t.http_server_request.request_method,n=t.http_server_request.path_info;let r;try{r=`${e} ${new URL(n,"http://hostname").pathname}`}catch(t){r="HTTP Request"}return r})(t);return e||(e=(t=>{if(!1===Js.call(t,"sql_query"))return null;const e=[...(t.sql_query.normalized_sql||t.sql_query.sql||"").trimLeft()];e.length>0&&"("===e[0]&&e.shift();let n=0;const r=e.reduce(((t,e)=>("("===e&&++n,0===n&&t.push(e),")"===e&&--n,t)),[]).join("");let i=null;return i=-1===r.search(/\s/)?r:r.replace(/[^\w]+/g," ").toLowerCase().split(" ").find((t=>tc.has(t))),["SQL",(o=i,("string"!=typeof o?"":o.slice(0,1).toUpperCase()+o.slice(1).toLowerCase())||null)].join(" ");var o})(t)),e};function nc(t,e){return"function"===e.type&&(t[e.location]=e),e.children&&e.children.reduce(nc,t),t}class rc{constructor(t,e){this.index=0,this.data=[...t],this.maxIndex=this.data.length-1,this.functionLabels=e}peek(){return this.index<=this.maxIndex?this.data[this.index]:null}pop(){const t=this.peek();return t&&(this.index+=1),t}}class ic{constructor(t={},e={},n=null,r=[]){this.input=t,this.output=e,this.caller=n,this.children=[],this.labels=r}clone(){const t=Object.assign({},this.input),e=Object.assign({},this.output),n=Object.assign([],this.labels),r=new ic(t,e,null,n);return this.displayName&&(r.displayName=this.displayName),this.children.forEach((t=>{const e=t.clone();r.addChild(e),e.caller=r})),r}addChild(t){this.children.push(t)}replaceChild(t,e){const n=this.children.indexOf(t);if(-1===n)throw new Error(`${t} not found in call tree`);this.children.splice(n,1,...e),e.forEach((t=>t.caller=this)),t.caller=null}removeChild(t){const e=this.children.indexOf(t);if(e<0)throw new Error(`${t} found orphaned by ${this} !`);this.children.splice(e,1)}postOrderForEach(t,e=[]){e.push(this);[...this.children].forEach((n=>n.postOrderForEach(t,e))),t(this,e),e.pop(this)}preOrderForEach(t,e=[]){e.push(this),t(this,e);[...this.children].forEach((n=>n.preOrderForEach(t,e))),e.pop(this)}forEach(t){this.postOrderForEach(t)}filter(t){const e=this.clone();return e.forEach(((e,n)=>{if(!e.isRoot()&&!t(e,n)){e.caller.replaceChild(e,e.children)}})),e}include(t){const e=this.clone();return e.postOrderForEach(((e,n)=>{e.isRoot()||(e.marked_include&&e.caller?e.caller.marked_include=!0:(e.marked_include=t(e,n),e.marked_include?e.caller&&(e.caller.marked_include=!0):e.caller&&e.caller.removeChild(e)))})),e.postOrderForEach((t=>{delete t.marked_include})),e}exclude(t){const e=this.clone();return e.forEach(((e,n)=>{if(!e.isRoot()&&t(e,n)){e.caller.removeChild(e)}})),e}toArray(){const t=this.children.map((t=>t.toArray())).flat();return this.isRoot()?t:[this,...t]}find(t){if(t(this))return this;for(let e=0;e<this.children.length;e+=1){const n=this.children[e].find(t);if(n)return n}return null}depth(){return this.ancestors().length}ancestors(){const t=[];let e=this.caller;for(;e;)t.push(e),e=e.caller;return t}hasAncestor(t){let e=this;for(;e;){if(e===t)return!0;e=e.caller}return!1}descendants(){return[this,...this.children.map((t=>t.descendants())).flat()]}next(){if(this.children.length>0)return this.children[0];let t=this,e=this.caller;const n=e=>e===t;for(;e;){const r=e.children.findIndex(n);if(r<0)throw new Error(`${this} found orphaned by ${e}!`);if(r<e.children.length-1)return e.children[r+1];t=e,e=e.caller}return null}previous(){const t=this.caller;if(!t)return null;if(1===t.children.length)return t;const e=t.children.findIndex((t=>t===this));if(e<0)throw new Error(`${this.input.id} found orphaned by ${t.input.id}!`);if(e>0){let n=t.children[e-1];for(;n.children.length>0;)n=n.children[n.children.length-1];return n}return t}left(t){const e=t||this.depth();let n=this;for(;;){const t=n.caller;if(!t)return this;const e=t.children.indexOf(n);if(0!==e){n=t.children[e-1];break}n=t}for(;n.depth()!==e;){const{children:t}=n;if(0===t.length)break;n=t[t.length-1]}return n}right(t){const e=t||this.depth();let n=this;for(;;){const t=n.caller;if(!t)return this;const e=t.children,r=e.indexOf(n);if(r!==e.length-1){n=t.children[r+1];break}n=t}for(;n.depth()!==e;){const{children:t}=n;if(0===t.length)break;[n]=t}return n}isRoot(){return null===this.caller}count(){let t=0;return this.forEach((()=>t+=1)),t}get id(){return this.input&&this.input.id?this.input.id:null}}function oc(t,e){let n=t.listeners[e];return n||(n=[],t.listeners[e]=n),n}class ac{constructor(){this.listeners={},this.anyListeners=[]}once(t,e){return oc(this,t).push({fn:e,once:!0}),this}on(t,e){return oc(this,t).push({fn:e}),this}off(t,e){const n=this.listeners[t];if(n){const r=n.filter((t=>t.fn&&t.fn!==e));0===r.length?delete this.listeners[t]:r.length!==n.length&&(this.listeners[t]=r)}return this}emit(t,e){const n=this.listeners[t];if(n){let r=!1;n.forEach((n=>{n.once&&(r=!0);try{n.fn(e)}catch(e){console.error(`error occurred while executing event ${t}`),console.error(e)}})),r&&(this.listeners[t]=this.listeners[t].filter((t=>!t.once)))}return this.anyListeners.forEach((n=>n.emit(t,e))),this}pipe(t,...e){return e.length?(e.forEach((e=>t.on(e,(t=>this.emit(t))))),this):(t.any(this),this)}any(t){return this.anyListeners.push(t),this}}function uc(t,e){const n=t.pop();if(!n)return null;if("call"===n.event){const r=new ic(n,null,e,t.functionLabels(n));e.addChild(r);let i=null;for(;i=uc(t,r),i;);return r}return"return"===n.event&&(e.output=n),null}function sc(){return[]}const cc="HTTP",lc="SQL";const hc={CallTree:class extends ac{constructor(t,e=sc){super(),this.rootNode=new ic;const n=new rc(t,e);for(;n.peek();)uc(n,this.rootNode);return this.dataStore={rootEvent:this.rootNode,selectedEvent:this.rootNode},this}get rootEvent(){return this.dataStore.rootEvent}set rootEvent(t){this.dataStore.rootEvent=t,this.emit("rootEvent",t)}get selectedEvent(){return this.dataStore.selectedEvent}set selectedEvent(t){this.dataStore.selectedEvent=t,this.emit("selectedEvent",t)}},Components:class{constructor(t){const e={},n={},r={},i={},o={},a=new Set,u=new Set,s=new Set,c={},l=[],h=[];t.classMap.forEach((function t(e){if("class"===e.type&&h.push(e.name),"package"===e.type&&l.push(e.name),"function"===e.type){const t=[e.location||"<path>:<line>",e.name].join("#"),n=h.join("::"),r=l.join("/");c[t]={className:n,packageName:r}}(e.children||[]).forEach(t),"class"===e.type&&h.pop(),"package"===e.type&&l.pop()}));const f=[],d=new Set,p=[];return t.events.forEach((t=>{if("return"===t.event)return f.pop();const e=[[t.path||"<path>",t.lineno||"<line>"].join(":"),t.method_id].join("#");let n;if(t.sql_query?n={className:lc,packageName:lc}:t.http_server_request?n={className:cc,packageName:cc}:(n=c[e],n||(n={className:t.defined_class,packageName:t.defined_class.split("::")[0]})),f.length>0){const t=[f[f.length-1],n],e=JSON.stringify(t);d.add(e)&&p.push(t)}return f.push(n),null})),p.forEach((t=>{t.forEach((t=>{s.add(t.packageName),i[t.packageName]||(i[t.packageName]=new Set),i[t.packageName].add(t.className),o[t.className]=t.packageName}));const[c,l]=t;c.packageName===cc&&a.add(l.packageName),l.packageName===lc&&u.add(c.packageName),e[c.packageName]||(e[c.packageName]=new Set),e[c.packageName].add(l.packageName),n[c.className]||(n[c.className]=new Set),n[c.className].add(l.className),r[l.className]||(r[l.className]=new Set),r[l.className].add(c.className)})),{package_calls:e,class_calls:n,class_callers:r,package_classes:i,class_package:o,controller_packages:a,querying_packages:u,packages:s,class_locations:{},source_control:{}}}},EventInfo:class{constructor(t){this.functionObjects=t.reduce(nc,{})}getName(t){const e=ec(t);if(e)return e;const n=this.getCodeObject(t);if(n)return n.display_name;const r=t.static?".":"#";return[t.defined_class,r,t.method_id].join("")}getLabels(t){const e=[];t.labels&&e.push(...t.labels);const n=this.getCodeObject(t);return n&&n.labels.length&&e.push(...n.labels),e}getCodeObject(t){return this.functionObjects[`${t.path}:${t.lineno}`]}},EventSource:ac,getLabel:ec};function fc(t){let e=Date.now();for(let n=t.values.length-1;n>=0;--n){const r=t.values[n];if((e-r.time)/60>t.staleTime){t.values.splice(0,t.values.length);break}e=r.time}}class dc{constructor(t,e=.33){this.maxSamples=t,this.staleTime=e,this.reset()}add(t){fc(this),this.values.length>=this.maxSamples&&this.values.splice(0,this.values.length-this.maxSamples+1),this.values.push({value:t,time:Date.now()})}reset(){this.values=[]}get length(){return this.values.length}get value(){fc(this);const t=this.values.length-1;return 0!==t?this.values.reduce(((t,e)=>t+e.value),0)/t:0}}class pc{constructor(t,e){this.vX=new dc(8),this.vY=new dc(8),this.transform={x:0,y:0,k:0},this.velocity={x:0,y:0},this.selection=e,this.node=e.node(),this.zoom=t,this.active=!1,this.ticking=!1}cancel(){this.lastTick&&delete this.lastTick,this.active=!1,this.ticking=!1}hold(){this.active=!1,this.holding=!0,this.vX.reset(),this.vY.reset()}release(){this.holding&&(this.holding=!1,this.impulse(this.vX.value,this.vY.value))}impulse(t,e,n=1){Math.abs(t)+Math.abs(e)<n||(this.velocity.x=t/this.transform.k,this.velocity.y=e/this.transform.k,this.ticking||(this.active=!0,this.tick()))}tick(){this.moving&&this.active?(this.ticking=!0,requestAnimationFrame((t=>{if(!this.active)return void this.cancel();this.lastTick||(this.lastTick=t-1);const e=(t-this.lastTick)/1e3;this.zoom.translateBy(this.selection,this.velocity.x,this.velocity.y),this.velocity.x-=2.5*this.velocity.x*e,this.velocity.y-=2.5*this.velocity.y*e,this.lastTick=t,this.tick()}))):this.cancel()}updateTransform(t){this.active||t.k!==this.transform.k||(this.vX.add(t.x-this.transform.x),this.vY.add(t.y-this.transform.y)),this.transform.x=t.x,this.transform.y=t.y,this.transform.k=t.k}get moving(){return Math.abs(this.velocity.x)+Math.abs(this.velocity.y)>.2}}function vc(t,e){const{controls:n}=t;if(!t.maxZoomBarValue){const e=n.zoomBar.getBoundingClientRect().height,r=n.zoomGrab.getBoundingClientRect().height;t.maxZoomBarValue=e-r}const{maxZoomBarValue:r}=t,i=r-r*e;t.zoomScale=e,n.zoomGrab.style.top=`${i}px`}class gc extends hc.EventSource{constructor(t,e){super(),this.container=t.element,this.step=e.step,this.controls={},this.maxZoomBarValue=null,this.dragStart=null,this.zoomGrabPosition=null,this.isDragging=!1,this.zoomGrabTimeout=null,function(t){const e=document.createElement("div");e.className="appmap__zoom";const{controls:n}=t;n.buttonZoomIn=document.createElement("button"),n.buttonZoomIn.setAttribute("type","button"),n.buttonZoomIn.className="appmap__zoom-button",n.buttonZoomIn.innerHTML="&plus;",e.appendChild(n.buttonZoomIn),n.zoomBar=document.createElement("div"),n.zoomBar.className="appmap__zoom-bar",n.zoomGrab=document.createElement("div"),n.zoomGrab.className="appmap__zoom-grab",n.zoomBar.appendChild(n.zoomGrab),e.appendChild(n.zoomBar),n.buttonZoomOut=document.createElement("button"),n.buttonZoomOut.setAttribute("type","button"),n.buttonZoomOut.className="appmap__zoom-button",n.buttonZoomOut.innerHTML="&minus;",e.appendChild(n.buttonZoomOut),t.container.appendChild(e),t.element=e,n.buttonZoomIn.addEventListener("click",(()=>{t.zoomScale=Math.min(1,t.zoomScale+t.step),t.emit("zoom",t.zoomScale)})),n.buttonZoomOut.addEventListener("click",(()=>{t.zoomScale=Math.max(0,t.zoomScale-t.step),t.emit("zoom",t.zoomScale)})),n.zoomBar.addEventListener("click",(e=>{if(e.target!==n.zoomBar)return!1;const r=n.zoomBar.getBoundingClientRect().height,i=e.clientY-Math.round(n.zoomBar.getBoundingClientRect().top);return t.emit("zoom",1-i/r),!0})),n.zoomBar.addEventListener("mousedown",(e=>{document.body.style.cursor="grabbing",t.zoomGrabPosition=n.zoomGrab.offsetTop,t.dragStart=e.clientY,t.isDragging=!0,e.stopPropagation()})),document.body.addEventListener("mousemove",(e=>{if(t.isDragging){const r=n.zoomBar.getBoundingClientRect().height,i=t.zoomGrabPosition+(e.clientY-t.dragStart);t.emit("zoom",1-i/r),e.preventDefault()}})),document.body.addEventListener("mouseup",(()=>{document.body.style.cursor=null,t.isDragging=!1}))}(this),vc(this,t.transform.k),t.on("move",(t=>vc(this,(t.k-e.minRatio)/(e.maxRatio-e.minRatio))))}}class Ec extends ac{constructor(){super(),this._text="Untitled item"}text(t){return this._text=t,this}selector(t){return this._selector=t,this}condition(t){return this._condition=t,this}transform(t){return this._transform=t,this}match(t){if(!(!this._selector||t.matches(this._selector)))return!1;const e=(r=t,"function"==typeof(n=this)._transform?n._transform(r):r);var n,r;if(!e)return!1;return!this._condition||this._condition(e)}}class mc extends ac{constructor(t,e=null){super(),this.parent=t,this.activeArea=e||t,this.elements=function(t){const e=document.createElement("div");e.classList.add("appmap__context-menu"),e.style.display="none";const n=document.createElement("div");n.classList.add("dropdown-menu"),e.appendChild(n),e.addEventListener("mousedown",(t=>t.stopPropagation())),e.addEventListener("pointerdown",(t=>t.stopPropagation())),e.addEventListener("touchstart",(t=>t.stopPropagation()));const r=document.createElement("p");return r.innerText="No actions available",r.style.display="none",n.appendChild(r),t.appendChild(e),{dropdown:e,menu:n,emptyMessage:r}}(t),this.activeArea.addEventListener("contextmenu",(t=>{!function(t,e){let n=0;const r=e.composedPath().slice(0,e.composedPath().findIndex((e=>e===t.activeArea)));t.items.forEach((t=>{const e=r.find((e=>t.match(e)));e?(t.element.listener&&t.element.removeEventListener("click",t.element.listener),t.element.listener=()=>t.emit("execute",function(t,e){return"function"==typeof t._transform?t._transform(e):e}(t,e)),t.element.addEventListener("click",t.element.listener),t.element.style.display="",t.emit("show"),n+=1):t.element.style.display="none"})),t.elements.emptyMessage.style.display=n>0?"none":"";const{x:i,y:o}=t.parent.getBoundingClientRect();t.elements.menu.style.transform=`translate(${e.x-i}px, ${e.y-o}px)`,t.elements.dropdown.style.display="block"}(this,t),t.preventDefault(),this.emit("show")})),this.selectors={},this.items=[]}divider(){return function(t){const e=document.createElement("div");e.classList.add("dropdown-divider"),t.elements.menu.appendChild(e)}(this),this}add(t){const e=t(new Ec);return e?(function(t,e){const n=document.createElement("a");n.classList.add("dropdown-item"),n.innerText=e._text,t.elements.menu.appendChild(n),e.element=n}(this,e),this.items.push(e),this):this}get visible(){return!(!this.elements||!this.elements.menu)&&this.elements.menu.offsetWidth>0}close(){const t=this.visible;return t&&(this.elements.dropdown.style.display="none"),t}isEventSource(t){if(!t)return!1;const e=t.composedPath();return!(!e||!this.elements)&&e.includes(this.elements.menu)}}const yc=["light","dark"],_c="light",Tc={contextMenu:!1,pan:{momentum:!0,boundary:{contain:null,overlap:300},tweenTime:250},theme:_c,zoom:{controls:!1,step:.1,minRatio:.1,maxRatio:1,requireActive:!1}},Nc=(t,e,n)=>Math.min(Math.max(t,e),n);class wc extends hc.EventSource{constructor(t,e={}){super();const n=r.default.select(t).node();this.options=Fs(Tc,e);let{theme:i}=this.options;return-1===yc.indexOf(i)&&(i=_c),this.element=document.createElement("div"),this.element.className=`appmap appmap--theme-${i}`,this.contentElement=document.createElement("div"),this.contentElement.className="appmap__content",this.contentElement.containerController=this,this.element.appendChild(this.contentElement),n.appendChild(this.element),this.options.zoom&&(this.options.zoom.controls&&(this.zoomController=new gc(this,this.options.zoom).on("zoom",(t=>{const{minRatio:e,maxRatio:n}=this.options.zoom;this.scaleTo((n-e)*t+e),this.active=!0}))),this.zoom=r.default.zoom().scaleExtent([this.options.zoom.minRatio,this.options.zoom.maxRatio]).interpolate(r.default.interpolate).filter((()=>"wheel"===r.default.event.type?this.active||!this.options.zoom.requireActive:(this.active=!0,!0))).on("zoom",(()=>{const{transform:t}=r.default.event,{offsetHeight:e,offsetWidth:i}=n;t.x=Nc(t.x,(this.options.pan.boundary.overlap-this.contentElement.offsetWidth)*t.k,i-this.options.pan.boundary.overlap*t.k),t.y=Nc(t.y,(this.options.pan.boundary.overlap-this.contentElement.offsetHeight)*t.k,e-this.options.pan.boundary.overlap*t.k),this.contentElement.style.transform=`translate(${t.x}px, ${t.y}px) scale(${t.k})`,this.contentElement.style.transformOrigin="0 0",this.emit("move",t)})),this.options.pan.momentum&&function(t,e){const n=new pc(t,e),i=t.on("zoom"),o=window.onblur;e.on("mousedown",(()=>n.hold())).on("mouseup",(()=>n.release())).on("pointerdown",(()=>n.hold())).on("pointerup",(()=>n.release())).on("touchstart",(()=>n.hold())).on("touchend",(()=>n.release())).on("touchcancel",(()=>n.release())),window.addEventListener("mouseup",(()=>n.release())),window.addEventListener("pointerup",(()=>n.release())),window.onblur=()=>{o&&o(),n.cancel()},t.on("zoom",(()=>{n.updateTransform(r.default.event.transform),i&&i()}));const a=t.translateTo;t.translateTo=(...t)=>(n.cancel(),a(...t));const u=t.translate;t.translate=(...t)=>(n.cancel(),u(...t))}(this.zoom,r.default.select(this.element)),r.default.select(this.element).call(this.zoom).on("dblclick.zoom",null)),this.contentElement}setContextMenu(t){if(!1===this.options.contextMenu||"function"!=typeof this.options.contextMenu)return;this.contextMenu=new mc(this.element);this.options.contextMenu(t).forEach((t=>this.contextMenu.add(t)))}fitViewport(t){const e=t.offsetHeight,n=t.offsetWidth,{clientWidth:i,clientHeight:o}=this.element.parentNode,{minRatio:a,maxRatio:u}=this.options.zoom,s=Math.min(o/e,i/n),c=Math.min(Math.max(s,a),u),l=r.default.zoomIdentity.translate(.5*(i-n*c),.5*(o-e*c)).scale(c);this.transform=l}translateTo(t,e,n=null){r.default.select(this.element).transition().duration(this.options.pan.tweenTime).call(this.zoom.translateTo,t,e,n)}translateBy(t,e){r.default.select(this.element).transition().duration(this.options.pan.tweenTime).call(this.zoom.translateBy,t,e)}scaleTo(t){r.default.select(this.element).transition().duration(100).call(this.zoom.scaleTo,t)}get transform(){return r.default.zoomTransform(this.element)}set transform(t){r.default.select(this.element).call(this.zoom.transform,t)}}function Rc(t){const e={...t};return Object.keys(t).forEach((n=>{const r=t[n];Array.isArray(r)?e[n]=new Set(r):r instanceof Set?e[n]=r:e[n]=r&&"object"==typeof r?Rc(r):r})),e}function bc(t,e,n,r){const i=n[e];i&&i.forEach((e=>{if(t.graph.node(e))return void r(e);const n=t.currentDiagramModel.class_package[e];t.graph.node(n)&&r(n)}))}function Ac(t,e,n=null){return e.label=e.label||e.id,e.class=e.class||e.type,"HTTP"===e.id?(e.label="HTTP server requests",e.shape="http",e.class="http"):"SQL"===e.id&&(e.label="Database",e.shape="database",e.class="database"),"cluster"===e.type&&(e.label=""),e.paddingRight=25,t.setNode(e.id,e),n&&t.setParent(e.id,n.id),t}function Oc(t,e,n){return t.setEdge(e,n,{curve:r.default.curveBasis})}const Ic=new xs.render;function Sc(t){t.element.html(""),Ic(t.element,t.graph),t.graphGroup=t.element.select("g.output"),t.graphGroup.selectAll("g.node").on("click",(e=>t.highlight(e))).on("dblclick",(e=>t.focus(e))),t.labelGroup=t.graphGroup.append("g").attr("class","nodeLabels"),t.graphGroup.node().querySelectorAll("g.nodes g.label").forEach((e=>{const n=e.parentElement.getAttribute("id"),r=e.parentElement.getAttribute("transform"),i=t.graph.node(n);e.parentElement.setAttribute("data-parent-type",function(t,e){let n=e[t];if(!n)return"none";switch(n=n.toLowerCase(),n){case"http":case"sql":return n;default:return"package"}}(n,t.currentDiagramModel.class_package)),e.parentElement.removeChild(e),t.labelGroup.node().appendChild(e),e.classList.add(i.class),e.setAttribute("id",n),e.setAttribute("transform",r);const o=t.currentDiagramModel.package_classes[n];if(o&&o.size>1){const t=document.createElementNS("http://www.w3.org/2000/svg","tspan");t.setAttribute("class","label__children-count"),t.textContent=` (${o.size})`,e.querySelector("text").appendChild(t);const n=t.getBBox().width;let[i,a,u]=r.match(/translate\(([0-9\.]+),([0-9\.]+)\)/);a=parseFloat(a)-n/2,e.setAttribute("transform",`translate(${a},${u})`)}i.labelElem=e}));const e=t.graphGroup.node().getBBox();t.element.attr("width",`${e.width}px`).attr("height",`${e.height}px`).attr("viewBox",`${e.x}, ${e.y}, ${e.width}, ${e.height}`),t.element.selectAll(".edgePath > path").nodes().forEach((e=>{e.addEventListener("click",(n=>{n.stopPropagation(),t.graphGroup.selectAll(".edgePath.highlight, .edgePath.highlight--inbound").classed("highlight highlight--inbound",!1),e.parentNode.classList.add("highlight"),t.graphGroup.selectAll(".edgePath.highlight").raise()}));const n=e.getAttribute("marker-end"),r=n.match(/^url\((.*)\)$/);if(n&&r.length>1){const t=new URL(r[1]);e.setAttribute("marker-end",`url(${t.hash})`)}})),t.emit("postrender")}!function(t){Object.entries(Zs).forEach((([e,n])=>t.shapes()[e]=n))}(Ic);const Lc={contextMenu:t=>[e=>e.text("Set as root").selector(".nodes .node").transform((t=>t.getAttribute("id"))).on("execute",(e=>t.makeRoot(e))),e=>e.text("Expand").selector("g.node").transform((t=>t.getAttribute("id"))).condition((e=>t.hasPackage(e))).on("execute",(e=>t.expand(e))),e=>e.text("Collapse").selector("g.node").transform((t=>t.getAttribute("id"))).condition((e=>!t.hasPackage(e))).on("execute",(e=>t.collapse(e))),e=>e.text("View source").selector("g.node.class").transform((e=>t.sourceLocation(e.getAttribute("id")))).on("execute",(t=>window.open(t))),e=>e.text("Reset view").on("execute",(()=>{t.render(t.initialModel)}))]};var Cc=function(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o};var xc=function(t,e,n){var r=t.length;return n=void 0===n?r:n,!e&&n>=r?t:Cc(t,e,n)};var Mc=function(t,e){for(var n=t.length;n--&&ci(e,t[n],0)>-1;);return n};var Pc=function(t){return t.split("")},kc="[\\ud800-\\udfff]",Dc="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Uc="\\ud83c[\\udffb-\\udfff]",jc="[^\\ud800-\\udfff]",Gc="(?:\\ud83c[\\udde6-\\uddff]){2}",Bc="[\\ud800-\\udbff][\\udc00-\\udfff]",Fc="(?:"+Dc+"|"+Uc+")"+"?",Hc="[\\ufe0e\\ufe0f]?",Vc=Hc+Fc+("(?:\\u200d(?:"+[jc,Gc,Bc].join("|")+")"+Hc+Fc+")*"),Wc="(?:"+[jc+Dc+"?",Dc,Gc,Bc,kc].join("|")+")",Yc=RegExp(Uc+"(?="+Uc+")|"+Wc+Vc,"g");var Xc=function(t){return t.match(Yc)||[]};var zc=function(t){return Pr(t)?Xc(t):Pc(t)},$c=/\s+$/;var qc=function(t,e,n){if((t=ar(t))&&(n||void 0===e))return t.replace($c,"");if(!t||!(e=or(e)))return t;var r=zc(t),i=Mc(r,zc(e))+1;return xc(r,0,i).join("")},Kc=a((function(t,e){e.__esModule=!0,e.default={WHITESPACE:"whitespace",WORD:"word",STRING:"string",RESERVED:"reserved",RESERVED_TOPLEVEL:"reserved-toplevel",RESERVED_NEWLINE:"reserved-newline",OPERATOR:"operator",OPEN_PAREN:"open-paren",CLOSE_PAREN:"close-paren",LINE_COMMENT:"line-comment",BLOCK_COMMENT:"block-comment",NUMBER:"number",PLACEHOLDER:"placeholder"},t.exports=e.default})),Qc=Math.floor;var Zc=function(t,e){var n="";if(!t||e<1||e>9007199254740991)return n;do{e%2&&(n+=t),(e=Qc(e/2))&&(t+=t)}while(e);return n};var Jc=function(t,e,n){return e=(n?to(t,e,n):void 0===e)?1:po(e),Zc(ar(t),e)},tl=a((function(t,e){e.__esModule=!0;var n=i(Jc),r=i(yo);function i(t){return t&&t.__esModule?t:{default:t}}var o="top-level",a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.indent=e||"  ",this.indentTypes=[]}return t.prototype.getIndent=function(){return(0,n.default)(this.indent,this.indentTypes.length)},t.prototype.increaseToplevel=function(){this.indentTypes.push(o)},t.prototype.increaseBlockLevel=function(){this.indentTypes.push("block-level")},t.prototype.decreaseTopLevel=function(){(0,r.default)(this.indentTypes)===o&&this.indentTypes.pop()},t.prototype.decreaseBlockLevel=function(){for(;this.indentTypes.length>0;){if(this.indentTypes.pop()!==o)break}},t}();e.default=a,t.exports=e.default})),el=a((function(t,e){e.__esModule=!0;var n,r=(n=Kc)&&n.__esModule?n:{default:n};var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.level=0}return t.prototype.beginIfPossible=function(t,e){0===this.level&&this.isInlineBlock(t,e)?this.level=1:this.level>0?this.level++:this.level=0},t.prototype.end=function(){this.level--},t.prototype.isActive=function(){return this.level>0},t.prototype.isInlineBlock=function(t,e){for(var n=0,i=0,o=e;o<t.length;o++){var a=t[o];if((n+=a.value.length)>50)return!1;if(a.type===r.default.OPEN_PAREN)i++;else if(a.type===r.default.CLOSE_PAREN&&0===--i)return!0;if(this.isForbiddenToken(a))return!1}return!1},t.prototype.isForbiddenToken=function(t){var e=t.type,n=t.value;return e===r.default.RESERVED_TOPLEVEL||e===r.default.RESERVED_NEWLINE||e===r.default.COMMENT||e===r.default.BLOCK_COMMENT||";"===n},t}();e.default=i,t.exports=e.default})),nl=a((function(t,e){e.__esModule=!0;var n=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.params=e,this.index=0}return t.prototype.get=function(t){var e=t.key,n=t.value;return this.params?e?this.params[e]:this.params[this.index++]:n},t}();e.default=n,t.exports=e.default})),rl=a((function(t,e){e.__esModule=!0;var n=u(qc),r=u(Kc),i=u(tl),o=u(el),a=u(nl);function u(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.cfg=e||{},this.indentation=new i.default(this.cfg.indent),this.inlineBlock=new o.default,this.params=new a.default(this.cfg.params),this.tokenizer=n,this.previousReservedWord={},this.tokens=[],this.index=0}return t.prototype.format=function(t){return this.tokens=this.tokenizer.tokenize(t),this.getFormattedQueryFromTokens().trim()},t.prototype.getFormattedQueryFromTokens=function(){var t=this,e="";return this.tokens.forEach((function(n,i){t.index=i,n.type===r.default.WHITESPACE||(n.type===r.default.LINE_COMMENT?e=t.formatLineComment(n,e):n.type===r.default.BLOCK_COMMENT?e=t.formatBlockComment(n,e):n.type===r.default.RESERVED_TOPLEVEL?(e=t.formatToplevelReservedWord(n,e),t.previousReservedWord=n):n.type===r.default.RESERVED_NEWLINE?(e=t.formatNewlineReservedWord(n,e),t.previousReservedWord=n):n.type===r.default.RESERVED?(e=t.formatWithSpaces(n,e),t.previousReservedWord=n):e=n.type===r.default.OPEN_PAREN?t.formatOpeningParentheses(n,e):n.type===r.default.CLOSE_PAREN?t.formatClosingParentheses(n,e):n.type===r.default.PLACEHOLDER?t.formatPlaceholder(n,e):","===n.value?t.formatComma(n,e):":"===n.value?t.formatWithSpaceAfter(n,e):"."===n.value?t.formatWithoutSpaces(n,e):";"===n.value?t.formatQuerySeparator(n,e):t.formatWithSpaces(n,e))})),e},t.prototype.formatLineComment=function(t,e){return this.addNewline(e+t.value)},t.prototype.formatBlockComment=function(t,e){return this.addNewline(this.addNewline(e)+this.indentComment(t.value))},t.prototype.indentComment=function(t){return t.replace(/\n/g,"\n"+this.indentation.getIndent())},t.prototype.formatToplevelReservedWord=function(t,e){return this.indentation.decreaseTopLevel(),e=this.addNewline(e),this.indentation.increaseToplevel(),e+=this.equalizeWhitespace(t.value),this.addNewline(e)},t.prototype.formatNewlineReservedWord=function(t,e){return this.addNewline(e)+this.equalizeWhitespace(t.value)+" "},t.prototype.equalizeWhitespace=function(t){return t.replace(/\s+/g," ")},t.prototype.formatOpeningParentheses=function(t,e){return[r.default.WHITESPACE,r.default.OPEN_PAREN,r.default.LINE_COMMENT].includes(this.previousToken().type)||(e=(0,n.default)(e)),e+=t.value,this.inlineBlock.beginIfPossible(this.tokens,this.index),this.inlineBlock.isActive()||(this.indentation.increaseBlockLevel(),e=this.addNewline(e)),e},t.prototype.formatClosingParentheses=function(t,e){return this.inlineBlock.isActive()?(this.inlineBlock.end(),this.formatWithSpaceAfter(t,e)):(this.indentation.decreaseBlockLevel(),this.formatWithSpaces(t,this.addNewline(e)))},t.prototype.formatPlaceholder=function(t,e){return e+this.params.get(t)+" "},t.prototype.formatComma=function(t,e){return e=this.trimTrailingWhitespace(e)+t.value+" ",this.inlineBlock.isActive()||/^LIMIT$/i.test(this.previousReservedWord.value)?e:this.addNewline(e)},t.prototype.formatWithSpaceAfter=function(t,e){return this.trimTrailingWhitespace(e)+t.value+" "},t.prototype.formatWithoutSpaces=function(t,e){return this.trimTrailingWhitespace(e)+t.value},t.prototype.formatWithSpaces=function(t,e){return e+t.value+" "},t.prototype.formatQuerySeparator=function(t,e){return this.trimTrailingWhitespace(e)+t.value+"\n"},t.prototype.addNewline=function(t){return(0,n.default)(t)+"\n"+this.indentation.getIndent()},t.prototype.trimTrailingWhitespace=function(t){return this.previousNonWhitespaceToken().type===r.default.LINE_COMMENT?(0,n.default)(t)+"\n":(0,n.default)(t)},t.prototype.previousNonWhitespaceToken=function(){for(var t=1;this.previousToken(t).type===r.default.WHITESPACE;)t++;return this.previousToken(t)},t.prototype.previousToken=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.tokens[this.index-t]||{}},t}();e.default=s,t.exports=e.default})),il=/[\\^$.*+?()[\]{}|]/g,ol=RegExp(il.source);var al=function(t){return(t=ar(t))&&ol.test(t)?t.replace(il,"\\$&"):t},ul=a((function(t,e){e.__esModule=!0;var n=o(Rr),r=o(al),i=o(Kc);function o(t){return t&&t.__esModule?t:{default:t}}var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.WHITESPACE_REGEX=/^(\s+)/,this.NUMBER_REGEX=/^((-\s*)?[0-9]+(\.[0-9]+)?|0x[0-9a-fA-F]+|0b[01]+)\b/,this.OPERATOR_REGEX=/^(!=|<>|==|<=|>=|!<|!>|\|\||::|->>|->|~~\*|~~|!~~\*|!~~|~\*|!~\*|!~|.)/,this.BLOCK_COMMENT_REGEX=/^(\/\*[^]*?(?:\*\/|$))/,this.LINE_COMMENT_REGEX=this.createLineCommentRegex(e.lineCommentTypes),this.RESERVED_TOPLEVEL_REGEX=this.createReservedWordRegex(e.reservedToplevelWords),this.RESERVED_NEWLINE_REGEX=this.createReservedWordRegex(e.reservedNewlineWords),this.RESERVED_PLAIN_REGEX=this.createReservedWordRegex(e.reservedWords),this.WORD_REGEX=this.createWordRegex(e.specialWordChars),this.STRING_REGEX=this.createStringRegex(e.stringTypes),this.OPEN_PAREN_REGEX=this.createParenRegex(e.openParens),this.CLOSE_PAREN_REGEX=this.createParenRegex(e.closeParens),this.INDEXED_PLACEHOLDER_REGEX=this.createPlaceholderRegex(e.indexedPlaceholderTypes,"[0-9]*"),this.IDENT_NAMED_PLACEHOLDER_REGEX=this.createPlaceholderRegex(e.namedPlaceholderTypes,"[a-zA-Z0-9._$]+"),this.STRING_NAMED_PLACEHOLDER_REGEX=this.createPlaceholderRegex(e.namedPlaceholderTypes,this.createStringPattern(e.stringTypes))}return t.prototype.createLineCommentRegex=function(t){return new RegExp("^((?:"+t.map((function(t){return(0,r.default)(t)})).join("|")+").*?(?:\n|$))")},t.prototype.createReservedWordRegex=function(t){var e=t.join("|").replace(/ /g,"\\s+");return new RegExp("^("+e+")\\b","i")},t.prototype.createWordRegex=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return new RegExp("^([\\w"+t.join("")+"]+)")},t.prototype.createStringRegex=function(t){return new RegExp("^("+this.createStringPattern(t)+")")},t.prototype.createStringPattern=function(t){var e={"``":"((`[^`]*($|`))+)","[]":"((\\[[^\\]]*($|\\]))(\\][^\\]]*($|\\]))*)",'""':'(("[^"\\\\]*(?:\\\\.[^"\\\\]*)*("|$))+)',"''":"(('[^'\\\\]*(?:\\\\.[^'\\\\]*)*('|$))+)","N''":"((N'[^N'\\\\]*(?:\\\\.[^N'\\\\]*)*('|$))+)"};return t.map((function(t){return e[t]})).join("|")},t.prototype.createParenRegex=function(t){var e=this;return new RegExp("^("+t.map((function(t){return e.escapeParen(t)})).join("|")+")","i")},t.prototype.escapeParen=function(t){return 1===t.length?(0,r.default)(t):"\\b"+t+"\\b"},t.prototype.createPlaceholderRegex=function(t,e){if((0,n.default)(t))return!1;var i=t.map(r.default).join("|");return new RegExp("^((?:"+i+")(?:"+e+"))")},t.prototype.tokenize=function(t){for(var e=[],n=void 0;t.length;)n=this.getNextToken(t,n),t=t.substring(n.value.length),e.push(n);return e},t.prototype.getNextToken=function(t,e){return this.getWhitespaceToken(t)||this.getCommentToken(t)||this.getStringToken(t)||this.getOpenParenToken(t)||this.getCloseParenToken(t)||this.getPlaceholderToken(t)||this.getNumberToken(t)||this.getReservedWordToken(t,e)||this.getWordToken(t)||this.getOperatorToken(t)},t.prototype.getWhitespaceToken=function(t){return this.getTokenOnFirstMatch({input:t,type:i.default.WHITESPACE,regex:this.WHITESPACE_REGEX})},t.prototype.getCommentToken=function(t){return this.getLineCommentToken(t)||this.getBlockCommentToken(t)},t.prototype.getLineCommentToken=function(t){return this.getTokenOnFirstMatch({input:t,type:i.default.LINE_COMMENT,regex:this.LINE_COMMENT_REGEX})},t.prototype.getBlockCommentToken=function(t){return this.getTokenOnFirstMatch({input:t,type:i.default.BLOCK_COMMENT,regex:this.BLOCK_COMMENT_REGEX})},t.prototype.getStringToken=function(t){return this.getTokenOnFirstMatch({input:t,type:i.default.STRING,regex:this.STRING_REGEX})},t.prototype.getOpenParenToken=function(t){return this.getTokenOnFirstMatch({input:t,type:i.default.OPEN_PAREN,regex:this.OPEN_PAREN_REGEX})},t.prototype.getCloseParenToken=function(t){return this.getTokenOnFirstMatch({input:t,type:i.default.CLOSE_PAREN,regex:this.CLOSE_PAREN_REGEX})},t.prototype.getPlaceholderToken=function(t){return this.getIdentNamedPlaceholderToken(t)||this.getStringNamedPlaceholderToken(t)||this.getIndexedPlaceholderToken(t)},t.prototype.getIdentNamedPlaceholderToken=function(t){return this.getPlaceholderTokenWithKey({input:t,regex:this.IDENT_NAMED_PLACEHOLDER_REGEX,parseKey:function(t){return t.slice(1)}})},t.prototype.getStringNamedPlaceholderToken=function(t){var e=this;return this.getPlaceholderTokenWithKey({input:t,regex:this.STRING_NAMED_PLACEHOLDER_REGEX,parseKey:function(t){return e.getEscapedPlaceholderKey({key:t.slice(2,-1),quoteChar:t.slice(-1)})}})},t.prototype.getIndexedPlaceholderToken=function(t){return this.getPlaceholderTokenWithKey({input:t,regex:this.INDEXED_PLACEHOLDER_REGEX,parseKey:function(t){return t.slice(1)}})},t.prototype.getPlaceholderTokenWithKey=function(t){var e=t.input,n=t.regex,r=t.parseKey,o=this.getTokenOnFirstMatch({input:e,regex:n,type:i.default.PLACEHOLDER});return o&&(o.key=r(o.value)),o},t.prototype.getEscapedPlaceholderKey=function(t){var e=t.key,n=t.quoteChar;return e.replace(new RegExp((0,r.default)("\\")+n,"g"),n)},t.prototype.getNumberToken=function(t){return this.getTokenOnFirstMatch({input:t,type:i.default.NUMBER,regex:this.NUMBER_REGEX})},t.prototype.getOperatorToken=function(t){return this.getTokenOnFirstMatch({input:t,type:i.default.OPERATOR,regex:this.OPERATOR_REGEX})},t.prototype.getReservedWordToken=function(t,e){if(!e||!e.value||"."!==e.value)return this.getToplevelReservedToken(t)||this.getNewlineReservedToken(t)||this.getPlainReservedToken(t)},t.prototype.getToplevelReservedToken=function(t){return this.getTokenOnFirstMatch({input:t,type:i.default.RESERVED_TOPLEVEL,regex:this.RESERVED_TOPLEVEL_REGEX})},t.prototype.getNewlineReservedToken=function(t){return this.getTokenOnFirstMatch({input:t,type:i.default.RESERVED_NEWLINE,regex:this.RESERVED_NEWLINE_REGEX})},t.prototype.getPlainReservedToken=function(t){return this.getTokenOnFirstMatch({input:t,type:i.default.RESERVED,regex:this.RESERVED_PLAIN_REGEX})},t.prototype.getWordToken=function(t){return this.getTokenOnFirstMatch({input:t,type:i.default.WORD,regex:this.WORD_REGEX})},t.prototype.getTokenOnFirstMatch=function(t){var e=t.input,n=t.type,r=t.regex,i=e.match(r);if(i)return{type:n,value:i[1]}},t}();e.default=a,t.exports=e.default})),sl=a((function(t,e){e.__esModule=!0;var n=i(rl),r=i(ul);function i(t){return t&&t.__esModule?t:{default:t}}var o=["ABS","ACTIVATE","ALIAS","ALL","ALLOCATE","ALLOW","ALTER","ANY","ARE","ARRAY","AS","ASC","ASENSITIVE","ASSOCIATE","ASUTIME","ASYMMETRIC","AT","ATOMIC","ATTRIBUTES","AUDIT","AUTHORIZATION","AUX","AUXILIARY","AVG","BEFORE","BEGIN","BETWEEN","BIGINT","BINARY","BLOB","BOOLEAN","BOTH","BUFFERPOOL","BY","CACHE","CALL","CALLED","CAPTURE","CARDINALITY","CASCADED","CASE","CAST","CCSID","CEIL","CEILING","CHAR","CHARACTER","CHARACTER_LENGTH","CHAR_LENGTH","CHECK","CLOB","CLONE","CLOSE","CLUSTER","COALESCE","COLLATE","COLLECT","COLLECTION","COLLID","COLUMN","COMMENT","COMMIT","CONCAT","CONDITION","CONNECT","CONNECTION","CONSTRAINT","CONTAINS","CONTINUE","CONVERT","CORR","CORRESPONDING","COUNT","COUNT_BIG","COVAR_POP","COVAR_SAMP","CREATE","CROSS","CUBE","CUME_DIST","CURRENT","CURRENT_DATE","CURRENT_DEFAULT_TRANSFORM_GROUP","CURRENT_LC_CTYPE","CURRENT_PATH","CURRENT_ROLE","CURRENT_SCHEMA","CURRENT_SERVER","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_TIMEZONE","CURRENT_TRANSFORM_GROUP_FOR_TYPE","CURRENT_USER","CURSOR","CYCLE","DATA","DATABASE","DATAPARTITIONNAME","DATAPARTITIONNUM","DATE","DAY","DAYS","DB2GENERAL","DB2GENRL","DB2SQL","DBINFO","DBPARTITIONNAME","DBPARTITIONNUM","DEALLOCATE","DEC","DECIMAL","DECLARE","DEFAULT","DEFAULTS","DEFINITION","DELETE","DENSERANK","DENSE_RANK","DEREF","DESCRIBE","DESCRIPTOR","DETERMINISTIC","DIAGNOSTICS","DISABLE","DISALLOW","DISCONNECT","DISTINCT","DO","DOCUMENT","DOUBLE","DROP","DSSIZE","DYNAMIC","EACH","EDITPROC","ELEMENT","ELSE","ELSEIF","ENABLE","ENCODING","ENCRYPTION","END","END-EXEC","ENDING","ERASE","ESCAPE","EVERY","EXCEPTION","EXCLUDING","EXCLUSIVE","EXEC","EXECUTE","EXISTS","EXIT","EXP","EXPLAIN","EXTENDED","EXTERNAL","EXTRACT","FALSE","FENCED","FETCH","FIELDPROC","FILE","FILTER","FINAL","FIRST","FLOAT","FLOOR","FOR","FOREIGN","FREE","FULL","FUNCTION","FUSION","GENERAL","GENERATED","GET","GLOBAL","GOTO","GRANT","GRAPHIC","GROUP","GROUPING","HANDLER","HASH","HASHED_VALUE","HINT","HOLD","HOUR","HOURS","IDENTITY","IF","IMMEDIATE","IN","INCLUDING","INCLUSIVE","INCREMENT","INDEX","INDICATOR","INDICATORS","INF","INFINITY","INHERIT","INNER","INOUT","INSENSITIVE","INSERT","INT","INTEGER","INTEGRITY","INTERSECTION","INTERVAL","INTO","IS","ISOBID","ISOLATION","ITERATE","JAR","JAVA","KEEP","KEY","LABEL","LANGUAGE","LARGE","LATERAL","LC_CTYPE","LEADING","LEAVE","LEFT","LIKE","LINKTYPE","LN","LOCAL","LOCALDATE","LOCALE","LOCALTIME","LOCALTIMESTAMP","LOCATOR","LOCATORS","LOCK","LOCKMAX","LOCKSIZE","LONG","LOOP","LOWER","MAINTAINED","MATCH","MATERIALIZED","MAX","MAXVALUE","MEMBER","MERGE","METHOD","MICROSECOND","MICROSECONDS","MIN","MINUTE","MINUTES","MINVALUE","MOD","MODE","MODIFIES","MODULE","MONTH","MONTHS","MULTISET","NAN","NATIONAL","NATURAL","NCHAR","NCLOB","NEW","NEW_TABLE","NEXTVAL","NO","NOCACHE","NOCYCLE","NODENAME","NODENUMBER","NOMAXVALUE","NOMINVALUE","NONE","NOORDER","NORMALIZE","NORMALIZED","NOT","NULL","NULLIF","NULLS","NUMERIC","NUMPARTS","OBID","OCTET_LENGTH","OF","OFFSET","OLD","OLD_TABLE","ON","ONLY","OPEN","OPTIMIZATION","OPTIMIZE","OPTION","ORDER","OUT","OUTER","OVER","OVERLAPS","OVERLAY","OVERRIDING","PACKAGE","PADDED","PAGESIZE","PARAMETER","PART","PARTITION","PARTITIONED","PARTITIONING","PARTITIONS","PASSWORD","PATH","PERCENTILE_CONT","PERCENTILE_DISC","PERCENT_RANK","PIECESIZE","PLAN","POSITION","POWER","PRECISION","PREPARE","PREVVAL","PRIMARY","PRIQTY","PRIVILEGES","PROCEDURE","PROGRAM","PSID","PUBLIC","QUERY","QUERYNO","RANGE","RANK","READ","READS","REAL","RECOVERY","RECURSIVE","REF","REFERENCES","REFERENCING","REFRESH","REGR_AVGX","REGR_AVGY","REGR_COUNT","REGR_INTERCEPT","REGR_R2","REGR_SLOPE","REGR_SXX","REGR_SXY","REGR_SYY","RELEASE","RENAME","REPEAT","RESET","RESIGNAL","RESTART","RESTRICT","RESULT","RESULT_SET_LOCATOR","RETURN","RETURNS","REVOKE","RIGHT","ROLE","ROLLBACK","ROLLUP","ROUND_CEILING","ROUND_DOWN","ROUND_FLOOR","ROUND_HALF_DOWN","ROUND_HALF_EVEN","ROUND_HALF_UP","ROUND_UP","ROUTINE","ROW","ROWNUMBER","ROWS","ROWSET","ROW_NUMBER","RRN","RUN","SAVEPOINT","SCHEMA","SCOPE","SCRATCHPAD","SCROLL","SEARCH","SECOND","SECONDS","SECQTY","SECURITY","SENSITIVE","SEQUENCE","SESSION","SESSION_USER","SIGNAL","SIMILAR","SIMPLE","SMALLINT","SNAN","SOME","SOURCE","SPECIFIC","SPECIFICTYPE","SQL","SQLEXCEPTION","SQLID","SQLSTATE","SQLWARNING","SQRT","STACKED","STANDARD","START","STARTING","STATEMENT","STATIC","STATMENT","STAY","STDDEV_POP","STDDEV_SAMP","STOGROUP","STORES","STYLE","SUBMULTISET","SUBSTRING","SUM","SUMMARY","SYMMETRIC","SYNONYM","SYSFUN","SYSIBM","SYSPROC","SYSTEM","SYSTEM_USER","TABLE","TABLESAMPLE","TABLESPACE","THEN","TIME","TIMESTAMP","TIMEZONE_HOUR","TIMEZONE_MINUTE","TO","TRAILING","TRANSACTION","TRANSLATE","TRANSLATION","TREAT","TRIGGER","TRIM","TRUE","TRUNCATE","TYPE","UESCAPE","UNDO","UNIQUE","UNKNOWN","UNNEST","UNTIL","UPPER","USAGE","USER","USING","VALIDPROC","VALUE","VARCHAR","VARIABLE","VARIANT","VARYING","VAR_POP","VAR_SAMP","VCAT","VERSION","VIEW","VOLATILE","VOLUMES","WHEN","WHENEVER","WHILE","WIDTH_BUCKET","WINDOW","WITH","WITHIN","WITHOUT","WLM","WRITE","XMLELEMENT","XMLEXISTS","XMLNAMESPACES","YEAR","YEARS"],a=["ADD","AFTER","ALTER COLUMN","ALTER TABLE","DELETE FROM","EXCEPT","FETCH FIRST","FROM","GROUP BY","GO","HAVING","INSERT INTO","INTERSECT","LIMIT","ORDER BY","SELECT","SET CURRENT SCHEMA","SET SCHEMA","SET","UNION ALL","UPDATE","VALUES","WHERE"],u=["AND","CROSS JOIN","INNER JOIN","JOIN","LEFT JOIN","LEFT OUTER JOIN","OR","OUTER JOIN","RIGHT JOIN","RIGHT OUTER JOIN"],s=void 0,c=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.cfg=e}return t.prototype.format=function(t){return s||(s=new r.default({reservedWords:o,reservedToplevelWords:a,reservedNewlineWords:u,stringTypes:['""',"''","``","[]"],openParens:["("],closeParens:[")"],indexedPlaceholderTypes:["?"],namedPlaceholderTypes:[":"],lineCommentTypes:["--"],specialWordChars:["#","@"]})),new n.default(this.cfg,s).format(t)},t}();e.default=c,t.exports=e.default})),cl=a((function(t,e){e.__esModule=!0;var n=i(rl),r=i(ul);function i(t){return t&&t.__esModule?t:{default:t}}var o=["ALL","ALTER","ANALYZE","AND","ANY","ARRAY","AS","ASC","BEGIN","BETWEEN","BINARY","BOOLEAN","BREAK","BUCKET","BUILD","BY","CALL","CASE","CAST","CLUSTER","COLLATE","COLLECTION","COMMIT","CONNECT","CONTINUE","CORRELATE","COVER","CREATE","DATABASE","DATASET","DATASTORE","DECLARE","DECREMENT","DELETE","DERIVED","DESC","DESCRIBE","DISTINCT","DO","DROP","EACH","ELEMENT","ELSE","END","EVERY","EXCEPT","EXCLUDE","EXECUTE","EXISTS","EXPLAIN","FALSE","FETCH","FIRST","FLATTEN","FOR","FORCE","FROM","FUNCTION","GRANT","GROUP","GSI","HAVING","IF","IGNORE","ILIKE","IN","INCLUDE","INCREMENT","INDEX","INFER","INLINE","INNER","INSERT","INTERSECT","INTO","IS","JOIN","KEY","KEYS","KEYSPACE","KNOWN","LAST","LEFT","LET","LETTING","LIKE","LIMIT","LSM","MAP","MAPPING","MATCHED","MATERIALIZED","MERGE","MINUS","MISSING","NAMESPACE","NEST","NOT","NULL","NUMBER","OBJECT","OFFSET","ON","OPTION","OR","ORDER","OUTER","OVER","PARSE","PARTITION","PASSWORD","PATH","POOL","PREPARE","PRIMARY","PRIVATE","PRIVILEGE","PROCEDURE","PUBLIC","RAW","REALM","REDUCE","RENAME","RETURN","RETURNING","REVOKE","RIGHT","ROLE","ROLLBACK","SATISFIES","SCHEMA","SELECT","SELF","SEMI","SET","SHOW","SOME","START","STATISTICS","STRING","SYSTEM","THEN","TO","TRANSACTION","TRIGGER","TRUE","TRUNCATE","UNDER","UNION","UNIQUE","UNKNOWN","UNNEST","UNSET","UPDATE","UPSERT","USE","USER","USING","VALIDATE","VALUE","VALUED","VALUES","VIA","VIEW","WHEN","WHERE","WHILE","WITH","WITHIN","WORK","XOR"],a=["DELETE FROM","EXCEPT ALL","EXCEPT","EXPLAIN DELETE FROM","EXPLAIN UPDATE","EXPLAIN UPSERT","FROM","GROUP BY","HAVING","INFER","INSERT INTO","INTERSECT ALL","INTERSECT","LET","LIMIT","MERGE","NEST","ORDER BY","PREPARE","SELECT","SET CURRENT SCHEMA","SET SCHEMA","SET","UNION ALL","UNION","UNNEST","UPDATE","UPSERT","USE KEYS","VALUES","WHERE"],u=["AND","INNER JOIN","JOIN","LEFT JOIN","LEFT OUTER JOIN","OR","OUTER JOIN","RIGHT JOIN","RIGHT OUTER JOIN","XOR"],s=void 0,c=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.cfg=e}return t.prototype.format=function(t){return s||(s=new r.default({reservedWords:o,reservedToplevelWords:a,reservedNewlineWords:u,stringTypes:['""',"''","``"],openParens:["(","[","{"],closeParens:[")","]","}"],namedPlaceholderTypes:["$"],lineCommentTypes:["#","--"]})),new n.default(this.cfg,s).format(t)},t}();e.default=c,t.exports=e.default})),ll=a((function(t,e){e.__esModule=!0;var n=i(rl),r=i(ul);function i(t){return t&&t.__esModule?t:{default:t}}var o=["A","ACCESSIBLE","AGENT","AGGREGATE","ALL","ALTER","ANY","ARRAY","AS","ASC","AT","ATTRIBUTE","AUTHID","AVG","BETWEEN","BFILE_BASE","BINARY_INTEGER","BINARY","BLOB_BASE","BLOCK","BODY","BOOLEAN","BOTH","BOUND","BULK","BY","BYTE","C","CALL","CALLING","CASCADE","CASE","CHAR_BASE","CHAR","CHARACTER","CHARSET","CHARSETFORM","CHARSETID","CHECK","CLOB_BASE","CLONE","CLOSE","CLUSTER","CLUSTERS","COALESCE","COLAUTH","COLLECT","COLUMNS","COMMENT","COMMIT","COMMITTED","COMPILED","COMPRESS","CONNECT","CONSTANT","CONSTRUCTOR","CONTEXT","CONTINUE","CONVERT","COUNT","CRASH","CREATE","CREDENTIAL","CURRENT","CURRVAL","CURSOR","CUSTOMDATUM","DANGLING","DATA","DATE_BASE","DATE","DAY","DECIMAL","DEFAULT","DEFINE","DELETE","DESC","DETERMINISTIC","DIRECTORY","DISTINCT","DO","DOUBLE","DROP","DURATION","ELEMENT","ELSIF","EMPTY","ESCAPE","EXCEPTIONS","EXCLUSIVE","EXECUTE","EXISTS","EXIT","EXTENDS","EXTERNAL","EXTRACT","FALSE","FETCH","FINAL","FIRST","FIXED","FLOAT","FOR","FORALL","FORCE","FROM","FUNCTION","GENERAL","GOTO","GRANT","GROUP","HASH","HEAP","HIDDEN","HOUR","IDENTIFIED","IF","IMMEDIATE","IN","INCLUDING","INDEX","INDEXES","INDICATOR","INDICES","INFINITE","INSTANTIABLE","INT","INTEGER","INTERFACE","INTERVAL","INTO","INVALIDATE","IS","ISOLATION","JAVA","LANGUAGE","LARGE","LEADING","LENGTH","LEVEL","LIBRARY","LIKE","LIKE2","LIKE4","LIKEC","LIMITED","LOCAL","LOCK","LONG","MAP","MAX","MAXLEN","MEMBER","MERGE","MIN","MINUS","MINUTE","MLSLABEL","MOD","MODE","MONTH","MULTISET","NAME","NAN","NATIONAL","NATIVE","NATURAL","NATURALN","NCHAR","NEW","NEXTVAL","NOCOMPRESS","NOCOPY","NOT","NOWAIT","NULL","NULLIF","NUMBER_BASE","NUMBER","OBJECT","OCICOLL","OCIDATE","OCIDATETIME","OCIDURATION","OCIINTERVAL","OCILOBLOCATOR","OCINUMBER","OCIRAW","OCIREF","OCIREFCURSOR","OCIROWID","OCISTRING","OCITYPE","OF","OLD","ON","ONLY","OPAQUE","OPEN","OPERATOR","OPTION","ORACLE","ORADATA","ORDER","ORGANIZATION","ORLANY","ORLVARY","OTHERS","OUT","OVERLAPS","OVERRIDING","PACKAGE","PARALLEL_ENABLE","PARAMETER","PARAMETERS","PARENT","PARTITION","PASCAL","PCTFREE","PIPE","PIPELINED","PLS_INTEGER","PLUGGABLE","POSITIVE","POSITIVEN","PRAGMA","PRECISION","PRIOR","PRIVATE","PROCEDURE","PUBLIC","RAISE","RANGE","RAW","READ","REAL","RECORD","REF","REFERENCE","RELEASE","RELIES_ON","REM","REMAINDER","RENAME","RESOURCE","RESULT_CACHE","RESULT","RETURN","RETURNING","REVERSE","REVOKE","ROLLBACK","ROW","ROWID","ROWNUM","ROWTYPE","SAMPLE","SAVE","SAVEPOINT","SB1","SB2","SB4","SECOND","SEGMENT","SELF","SEPARATE","SEQUENCE","SERIALIZABLE","SHARE","SHORT","SIZE_T","SIZE","SMALLINT","SOME","SPACE","SPARSE","SQL","SQLCODE","SQLDATA","SQLERRM","SQLNAME","SQLSTATE","STANDARD","START","STATIC","STDDEV","STORED","STRING","STRUCT","STYLE","SUBMULTISET","SUBPARTITION","SUBSTITUTABLE","SUBTYPE","SUCCESSFUL","SUM","SYNONYM","SYSDATE","TABAUTH","TABLE","TDO","THE","THEN","TIME","TIMESTAMP","TIMEZONE_ABBR","TIMEZONE_HOUR","TIMEZONE_MINUTE","TIMEZONE_REGION","TO","TRAILING","TRANSACTION","TRANSACTIONAL","TRIGGER","TRUE","TRUSTED","TYPE","UB1","UB2","UB4","UID","UNDER","UNIQUE","UNPLUG","UNSIGNED","UNTRUSTED","USE","USER","USING","VALIDATE","VALIST","VALUE","VARCHAR","VARCHAR2","VARIABLE","VARIANCE","VARRAY","VARYING","VIEW","VIEWS","VOID","WHENEVER","WHILE","WITH","WORK","WRAPPED","WRITE","YEAR","ZONE"],a=["ADD","ALTER COLUMN","ALTER TABLE","BEGIN","CONNECT BY","DECLARE","DELETE FROM","DELETE","END","EXCEPT","EXCEPTION","FETCH FIRST","FROM","GROUP BY","HAVING","INSERT INTO","INSERT","INTERSECT","LIMIT","LOOP","MODIFY","ORDER BY","SELECT","SET CURRENT SCHEMA","SET SCHEMA","SET","START WITH","UNION ALL","UNION","UPDATE","VALUES","WHERE"],u=["AND","CROSS APPLY","CROSS JOIN","ELSE","END","INNER JOIN","JOIN","LEFT JOIN","LEFT OUTER JOIN","OR","OUTER APPLY","OUTER JOIN","RIGHT JOIN","RIGHT OUTER JOIN","WHEN","XOR"],s=void 0,c=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.cfg=e}return t.prototype.format=function(t){return s||(s=new r.default({reservedWords:o,reservedToplevelWords:a,reservedNewlineWords:u,stringTypes:['""',"N''","''","``"],openParens:["(","CASE"],closeParens:[")","END"],indexedPlaceholderTypes:["?"],namedPlaceholderTypes:[":"],lineCommentTypes:["--"],specialWordChars:["_","$","#",".","@"]})),new n.default(this.cfg,s).format(t)},t}();e.default=c,t.exports=e.default})),hl=a((function(t,e){e.__esModule=!0;var n=i(rl),r=i(ul);function i(t){return t&&t.__esModule?t:{default:t}}var o=["ACCESSIBLE","ACTION","AGAINST","AGGREGATE","ALGORITHM","ALL","ALTER","ANALYSE","ANALYZE","AS","ASC","AUTOCOMMIT","AUTO_INCREMENT","BACKUP","BEGIN","BETWEEN","BINLOG","BOTH","CASCADE","CASE","CHANGE","CHANGED","CHARACTER SET","CHARSET","CHECK","CHECKSUM","COLLATE","COLLATION","COLUMN","COLUMNS","COMMENT","COMMIT","COMMITTED","COMPRESSED","CONCURRENT","CONSTRAINT","CONTAINS","CONVERT","CREATE","CROSS","CURRENT_TIMESTAMP","DATABASE","DATABASES","DAY","DAY_HOUR","DAY_MINUTE","DAY_SECOND","DEFAULT","DEFINER","DELAYED","DELETE","DESC","DESCRIBE","DETERMINISTIC","DISTINCT","DISTINCTROW","DIV","DO","DROP","DUMPFILE","DUPLICATE","DYNAMIC","ELSE","ENCLOSED","END","ENGINE","ENGINES","ENGINE_TYPE","ESCAPE","ESCAPED","EVENTS","EXEC","EXECUTE","EXISTS","EXPLAIN","EXTENDED","FAST","FETCH","FIELDS","FILE","FIRST","FIXED","FLUSH","FOR","FORCE","FOREIGN","FULL","FULLTEXT","FUNCTION","GLOBAL","GRANT","GRANTS","GROUP_CONCAT","HEAP","HIGH_PRIORITY","HOSTS","HOUR","HOUR_MINUTE","HOUR_SECOND","IDENTIFIED","IF","IFNULL","IGNORE","IN","INDEX","INDEXES","INFILE","INSERT","INSERT_ID","INSERT_METHOD","INTERVAL","INTO","INVOKER","IS","ISOLATION","KEY","KEYS","KILL","LAST_INSERT_ID","LEADING","LEVEL","LIKE","LINEAR","LINES","LOAD","LOCAL","LOCK","LOCKS","LOGS","LOW_PRIORITY","MARIA","MASTER","MASTER_CONNECT_RETRY","MASTER_HOST","MASTER_LOG_FILE","MATCH","MAX_CONNECTIONS_PER_HOUR","MAX_QUERIES_PER_HOUR","MAX_ROWS","MAX_UPDATES_PER_HOUR","MAX_USER_CONNECTIONS","MEDIUM","MERGE","MINUTE","MINUTE_SECOND","MIN_ROWS","MODE","MODIFY","MONTH","MRG_MYISAM","MYISAM","NAMES","NATURAL","NOT","NOW()","NULL","OFFSET","ON DELETE","ON UPDATE","ON","ONLY","OPEN","OPTIMIZE","OPTION","OPTIONALLY","OUTFILE","PACK_KEYS","PAGE","PARTIAL","PARTITION","PARTITIONS","PASSWORD","PRIMARY","PRIVILEGES","PROCEDURE","PROCESS","PROCESSLIST","PURGE","QUICK","RAID0","RAID_CHUNKS","RAID_CHUNKSIZE","RAID_TYPE","RANGE","READ","READ_ONLY","READ_WRITE","REFERENCES","REGEXP","RELOAD","RENAME","REPAIR","REPEATABLE","REPLACE","REPLICATION","RESET","RESTORE","RESTRICT","RETURN","RETURNS","REVOKE","RLIKE","ROLLBACK","ROW","ROWS","ROW_FORMAT","SECOND","SECURITY","SEPARATOR","SERIALIZABLE","SESSION","SHARE","SHOW","SHUTDOWN","SLAVE","SONAME","SOUNDS","SQL","SQL_AUTO_IS_NULL","SQL_BIG_RESULT","SQL_BIG_SELECTS","SQL_BIG_TABLES","SQL_BUFFER_RESULT","SQL_CACHE","SQL_CALC_FOUND_ROWS","SQL_LOG_BIN","SQL_LOG_OFF","SQL_LOG_UPDATE","SQL_LOW_PRIORITY_UPDATES","SQL_MAX_JOIN_SIZE","SQL_NO_CACHE","SQL_QUOTE_SHOW_CREATE","SQL_SAFE_UPDATES","SQL_SELECT_LIMIT","SQL_SLAVE_SKIP_COUNTER","SQL_SMALL_RESULT","SQL_WARNINGS","START","STARTING","STATUS","STOP","STORAGE","STRAIGHT_JOIN","STRING","STRIPED","SUPER","TABLE","TABLES","TEMPORARY","TERMINATED","THEN","TO","TRAILING","TRANSACTIONAL","TRUE","TRUNCATE","TYPE","TYPES","UNCOMMITTED","UNIQUE","UNLOCK","UNSIGNED","USAGE","USE","USING","VARIABLES","VIEW","WHEN","WITH","WORK","WRITE","YEAR_MONTH"],a=["ADD","AFTER","ALTER COLUMN","ALTER TABLE","DELETE FROM","EXCEPT","FETCH FIRST","FROM","GROUP BY","GO","HAVING","INSERT INTO","INSERT","INTERSECT","LIMIT","MODIFY","ORDER BY","SELECT","SET CURRENT SCHEMA","SET SCHEMA","SET","UNION ALL","UNION","UPDATE","VALUES","WHERE"],u=["AND","CROSS APPLY","CROSS JOIN","ELSE","INNER JOIN","JOIN","LEFT JOIN","LEFT OUTER JOIN","OR","OUTER APPLY","OUTER JOIN","RIGHT JOIN","RIGHT OUTER JOIN","WHEN","XOR"],s=void 0,c=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.cfg=e}return t.prototype.format=function(t){return s||(s=new r.default({reservedWords:o,reservedToplevelWords:a,reservedNewlineWords:u,stringTypes:['""',"N''","''","``","[]"],openParens:["(","CASE"],closeParens:[")","END"],indexedPlaceholderTypes:["?"],namedPlaceholderTypes:["@",":"],lineCommentTypes:["#","--"]})),new n.default(this.cfg,s).format(t)},t}();e.default=c,t.exports=e.default})),fl=o(a((function(t,e){e.__esModule=!0;var n=a(sl),r=a(cl),i=a(ll),o=a(hl);function a(t){return t&&t.__esModule?t:{default:t}}e.default={format:function(t,e){switch((e=e||{}).language){case"db2":return new n.default(e).format(t);case"n1ql":return new r.default(e).format(t);case"pl/sql":return new i.default(e).format(t);case"sql":case void 0:return new o.default(e).format(t);default:throw Error("Unsupported SQL dialect: "+e.language)}}},t.exports=e.default})));const dl="event",pl="sql",vl="static",gl="non-static",El=t=>ml(t.match(/[^.|:]+$/)[0]||t),ml=t=>(t=>{const e=[];return(t||"").split(/[\$.:#\-_]/).forEach((t=>{e.push(...zs(t))})),e})(t).map((t=>Ys(t))).join(" "),yl=(t,e)=>Ws.call(t,e);function _l(t){switch(t){case"boolean":case"TrueClass":case"FalseClass":case"java.lang.Boolean":return"bool";case"status":case"byte":case"short":case"int":case"long":case"Number":case"Integer":case"java.lang.Byte":case"java.lang.Short":case"java.lang.Integer":case"java.lang.Long":return"int";case"float":case"double":case"BigDecimal":case"Float":case"java.lang.Float":case"java.lang.Double":return"float";case"mime_type":case"char":case"String":case"java.lang.Char":case"java.lang.String":return"string";default:return"object"}}function Tl(t){return Ws.call(t.input,"http_server_request")?dl:Ws.call(t.input,"sql_query")?pl:t.input.static?vl:gl}function Nl(t,e,n,r){const[i,o]=[t-n,e-r],a=Math.sqrt(i*i+o*o),u=Math.min(.5*a,Math.abs(i));return`M${t},${e} C${t+u},${e} ${n-u},${r}, ${n},${r}`}function wl(t,e){const n=document.querySelector(`.node[data-node-id='${t}'] ${e}`);if(!n)return null;const{offsetLeft:r,offsetTop:i,offsetHeight:o,offsetWidth:a}=n;return{left:r,right:r+a,x:r+a/2,y:i+o/2}}function Rl(t,e){return wl(t,`.connector[data-connection-type="${e}"]`)}function bl(t,e){return wl(t,`.item[data-port-id="${e}"]`)}function Al(t,e){if(!e||!e.behavior)return;e.behavior.out.forEach((n=>{if(!n.value||!n.value.object_id)return;const r=n.value.object_id;t[r]||(t[r]={nodeId:e.behavior.id,outputId:r})}))}function Ol(t){const e=[],n=[],r=[];return t.preOrderForEach((t=>{if(!t.input.id)return;const n=function(t){const{input:e,displayName:n}=t,r={id:e.id,event_id:e.id,type:Tl(t),name:n,in:[],out:[],exceptions:[],x:0,y:0,data:t};t.behavior=r,r.type===pl&&(r.value=fl.format(t.input.sql_query.sql)),r.type===gl&&r.in.push({name:El(e.defined_class),type:_l(e.defined_class),value:e.receiver}),Ws.call(e,"parameters")&&e.parameters.forEach((t=>{r.in.push({name:ml(t.name),type:_l(t.class),value:t})}));const i=t.output.return_value;if(i&&i.value){const t=_l(i.class);let e=t;"object"===t&&(e=i.class),r.out.push({name:El(e),type:t,value:i})}const{exceptions:o}=t.output;if(o&&(r.exceptions=o),Ws.call(e,"message")){e.message.forEach((t=>{r.in.push({name:ml(t.name),type:_l(t.class),value:t})}));const n=t.output.http_server_response||{};Object.keys(n).forEach((t=>{r.out.push({name:ml(t),type:_l(t),value:{value:n[t]}})}))}return r}(t);e.push(n)})),e.forEach((t=>{const e=function(t){const e={},n=t.data.caller;if(!n)return e;Al(e,n);const r=n.caller;if(!r)return e;if(!r.caller)return e;const i=r.children.findIndex((t=>t===n));if(i>0)for(let t=i-1;t>=0;t-=1){const n=r.children[t];Al(e,n)}return n.ancestors().forEach((t=>Al(e,t))),e}(t);t.in.forEach((n=>{if(!n.value||!n.value.object_id)return;const i=n.value.object_id,o=e[i];o&&r.push({type:n.type,input:{nodeId:t.id,portId:i},output:{nodeId:o.nodeId,portId:o.outputId}})}));const{caller:i}=t.data;i&&i.behavior&&n.push({source:i.behavior.id,target:t.id})})),[n,r]}function Il(t,e,n,r){t.valuePopper.text(n&&n.value?n.value:"null").attr("data-show","").attr("data-placement",r).append("div").attr("id","arrow");const i=t.valuePopper.node(),{offsetWidth:o,offsetHeight:a}=i;let u=0;u="left"===r?e.offsetLeft-o:e.offsetLeft+e.offsetWidth;const s=e.offsetTop+.5*(e.offsetHeight-a);t.valuePopper.style("transform",`translate3d(${u}px, ${s}px, 0px)`),t.emit("popper",i)}var Sl=o(a((function(t,e){var n;window,n=function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=7)}({7:function(t,e,n){function r(){}n.r(e);var i=function(t){return null==t?r:function(){return this.querySelector(t)}};function o(){return[]}var a=function(t){return null==t?o:function(){return this.querySelectorAll(t)}},u=function(t){return function(){return this.matches(t)}},s=function(t){return new Array(t.length)};function c(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function l(t,e,n,r,i,o){for(var a,u=0,s=e.length,l=o.length;u<l;++u)(a=e[u])?(a.__data__=o[u],r[u]=a):n[u]=new c(t,o[u]);for(;u<s;++u)(a=e[u])&&(i[u]=a)}function h(t,e,n,r,i,o,a){var u,s,l,h={},f=e.length,d=o.length,p=new Array(f);for(u=0;u<f;++u)(s=e[u])&&(p[u]=l="$"+a.call(s,s.__data__,u,e),l in h?i[u]=s:h[l]=s);for(u=0;u<d;++u)(s=h[l="$"+a.call(t,o[u],u,o)])?(r[u]=s,s.__data__=o[u],h[l]=null):n[u]=new c(t,o[u]);for(u=0;u<f;++u)(s=e[u])&&h[p[u]]===s&&(i[u]=s)}function f(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}c.prototype={constructor:c,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var d="http://www.w3.org/1999/xhtml",p={svg:"http://www.w3.org/2000/svg",xhtml:d,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},v=function(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),p.hasOwnProperty(e)?{space:p[e],local:t}:t};function g(t){return function(){this.removeAttribute(t)}}function E(t){return function(){this.removeAttributeNS(t.space,t.local)}}function m(t,e){return function(){this.setAttribute(t,e)}}function y(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function _(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function T(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}var N=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView};function w(t){return function(){this.style.removeProperty(t)}}function R(t,e,n){return function(){this.style.setProperty(t,e,n)}}function b(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function A(t,e){return t.style.getPropertyValue(e)||N(t).getComputedStyle(t,null).getPropertyValue(e)}function O(t){return function(){delete this[t]}}function I(t,e){return function(){this[t]=e}}function S(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function L(t){return t.trim().split(/^|\s+/)}function C(t){return t.classList||new x(t)}function x(t){this._node=t,this._names=L(t.getAttribute("class")||"")}function M(t,e){for(var n=C(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function P(t,e){for(var n=C(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function k(t){return function(){M(this,t)}}function D(t){return function(){P(this,t)}}function U(t,e){return function(){(e.apply(this,arguments)?M:P)(this,t)}}function j(){this.textContent=""}function G(t){return function(){this.textContent=t}}function B(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function F(){this.innerHTML=""}function H(t){return function(){this.innerHTML=t}}function V(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function W(){this.nextSibling&&this.parentNode.appendChild(this)}function Y(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function X(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===d&&e.documentElement.namespaceURI===d?e.createElement(t):e.createElementNS(n,t)}}function z(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}x.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var $=function(t){var e=v(t);return(e.local?z:X)(e)};function q(){return null}function K(){var t=this.parentNode;t&&t.removeChild(this)}function Q(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Z(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}var J={};function tt(t,e,n){return t=et(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function et(t,e,n){return function(r){try{t.call(this,this.__data__,e,n)}finally{}}}function nt(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}function rt(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?e.length=i:delete this.__on}}}function it(t,e,n){var r=J.hasOwnProperty(t.type)?tt:et;return function(i,o,a){var u,s=this.__on,c=r(e,o,a);if(s)for(var l=0,h=s.length;l<h;++l)if((u=s[l]).type===t.type&&u.name===t.name)return this.removeEventListener(u.type,u.listener,u.capture),this.addEventListener(u.type,u.listener=c,u.capture=n),void(u.value=e);this.addEventListener(t.type,c,n),u={type:t.type,name:t.name,value:e,listener:c,capture:n},s?s.push(u):this.__on=[u]}}function ot(t,e,n){var r=N(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function at(t,e){return function(){return ot(this,t,e)}}function ut(t,e){return function(){return ot(this,t,e.apply(this,arguments))}}"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(J={mouseenter:"mouseover",mouseleave:"mouseout"}));var st=[null];function ct(t,e){this._groups=t,this._parents=e}function lt(){return new ct([[document.documentElement]],st)}ct.prototype=lt.prototype={constructor:ct,select:function(t){"function"!=typeof t&&(t=i(t));for(var e=this._groups,n=e.length,r=new Array(n),o=0;o<n;++o)for(var a,u,s=e[o],c=s.length,l=r[o]=new Array(c),h=0;h<c;++h)(a=s[h])&&(u=t.call(a,a.__data__,h,s))&&("__data__"in a&&(u.__data__=a.__data__),l[h]=u);return new ct(r,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=a(t));for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var u,s=e[o],c=s.length,l=0;l<c;++l)(u=s[l])&&(r.push(t.call(u,u.__data__,l,s)),i.push(u));return new ct(r,i)},filter:function(t){"function"!=typeof t&&(t=u(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,c=r[i]=[],l=0;l<s;++l)(o=a[l])&&t.call(o,o.__data__,l,a)&&c.push(o);return new ct(r,this._parents)},data:function(t,e){if(!t)return g=new Array(this.size()),f=-1,this.each((function(t){g[++f]=t})),g;var n,r=e?h:l,i=this._parents,o=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var a=o.length,u=new Array(a),s=new Array(a),c=new Array(a),f=0;f<a;++f){var d=i[f],p=o[f],v=p.length,g=t.call(d,d&&d.__data__,f,i),E=g.length,m=s[f]=new Array(E),y=u[f]=new Array(E);r(d,p,m,y,c[f]=new Array(v),g,e);for(var _,T,N=0,w=0;N<E;++N)if(_=m[N]){for(N>=w&&(w=N+1);!(T=y[w])&&++w<E;);_._next=T||null}}return(u=new ct(u,i))._enter=s,u._exit=c,u},enter:function(){return new ct(this._enter||this._groups.map(s),this._parents)},exit:function(){return new ct(this._exit||this._groups.map(s),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,o=this.exit();return r="function"==typeof t?t(r):r.append(t+""),null!=e&&(i=e(i)),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),u=0;u<o;++u)for(var s,c=e[u],l=n[u],h=c.length,f=a[u]=new Array(h),d=0;d<h;++d)(s=c[d]||l[d])&&(f[d]=s);for(;u<r;++u)a[u]=e[u];return new ct(a,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=f);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,u=n[o],s=u.length,c=i[o]=new Array(s),l=0;l<s;++l)(a=u[l])&&(c[l]=a);c.sort(e)}return new ct(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each((function(){t[++e]=this})),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],a=0,u=o.length;a<u;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},attr:function(t,e){var n=v(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?E:g:"function"==typeof e?n.local?T:_:n.local?y:m)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?w:"function"==typeof e?b:R)(t,e,null==n?"":n)):A(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?O:"function"==typeof e?S:I)(t,e)):this.node()[t]},classed:function(t,e){var n=L(t+"");if(arguments.length<2){for(var r=C(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?U:e?k:D)(n,e))},text:function(t){return arguments.length?this.each(null==t?j:("function"==typeof t?B:G)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?F:("function"==typeof t?V:H)(t)):this.node().innerHTML},raise:function(){return this.each(W)},lower:function(){return this.each(Y)},append:function(t){var e="function"==typeof t?t:$(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:$(t),r=null==e?q:"function"==typeof e?e:i(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(K)},clone:function(t){return this.select(t?Z:Q)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,o=nt(t+""),a=o.length;if(!(arguments.length<2)){for(u=e?it:rt,null==n&&(n=!1),r=0;r<a;++r)this.each(u(o[r],e,n));return this}var u=this.node().__on;if(u)for(var s,c=0,l=u.length;c<l;++c)for(r=0,s=u[c];r<a;++r)if((i=o[r]).type===s.type&&i.name===s.name)return s.value},dispatch:function(t,e){return this.each(("function"==typeof e?ut:at)(t,e))}};var ht=lt,ft=function(t){return"string"==typeof t?new ct([[document.querySelector(t)]],[document.documentElement]):new ct([[t]],st)},dt=function(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]},pt=function(t){return(t=dt(Math.abs(t)))?t[1]:NaN},vt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function gt(t){if(!(e=vt.exec(t)))throw new Error("invalid format: "+t);var e;return new Et({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Et(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}gt.prototype=Et.prototype,Et.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var mt,yt,_t,Tt,Nt=function(t,e){var n=dt(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")},wt={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Nt(100*t,e)},r:Nt,s:function(t,e){var n=dt(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(mt=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+dt(t,Math.max(0,e+o-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},Rt=function(t){return t},bt=Array.prototype.map,At=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];yt=function(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?Rt:(e=bt.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var i=t.length,o=[],a=0,u=e[0],s=0;i>0&&u>0&&(s+u+1>r&&(u=Math.max(1,r-s)),o.push(t.substring(i-=u,i+u)),!((s+=u+1)>r));)u=e[a=(a+1)%e.length];return o.reverse().join(n)}),i=void 0===t.currency?"":t.currency[0]+"",o=void 0===t.currency?"":t.currency[1]+"",a=void 0===t.decimal?".":t.decimal+"",u=void 0===t.numerals?Rt:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(bt.call(t.numerals,String)),s=void 0===t.percent?"%":t.percent+"",c=void 0===t.minus?"-":t.minus+"",l=void 0===t.nan?"NaN":t.nan+"";function h(t){var e=(t=gt(t)).fill,n=t.align,h=t.sign,f=t.symbol,d=t.zero,p=t.width,v=t.comma,g=t.precision,E=t.trim,m=t.type;"n"===m?(v=!0,m="g"):wt[m]||(void 0===g&&(g=12),E=!0,m="g"),(d||"0"===e&&"="===n)&&(d=!0,e="0",n="=");var y="$"===f?i:"#"===f&&/[boxX]/.test(m)?"0"+m.toLowerCase():"",_="$"===f?o:/[%p]/.test(m)?s:"",T=wt[m],N=/[defgprs%]/.test(m);function w(t){var i,o,s,f=y,w=_;if("c"===m)w=T(t)+w,t="";else{var R=(t=+t)<0;if(t=isNaN(t)?l:T(Math.abs(t),g),E&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),R&&0==+t&&(R=!1),f=(R?"("===h?h:c:"-"===h||"("===h?"":h)+f,w=("s"===m?At[8+mt/3]:"")+w+(R&&"("===h?")":""),N)for(i=-1,o=t.length;++i<o;)if(48>(s=t.charCodeAt(i))||s>57){w=(46===s?a+t.slice(i+1):t.slice(i))+w,t=t.slice(0,i);break}}v&&!d&&(t=r(t,1/0));var b=f.length+t.length+w.length,A=b<p?new Array(p-b+1).join(e):"";switch(v&&d&&(t=r(A+t,A.length?p-w.length:1/0),A=""),n){case"<":t=f+t+w+A;break;case"=":t=f+A+t+w;break;case"^":t=A.slice(0,b=A.length>>1)+f+t+w+A.slice(b);break;default:t=A+f+t+w}return u(t)}return g=void 0===g?6:/[gprs]/.test(m)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),w.toString=function(){return t+""},w}return{format:h,formatPrefix:function(t,e){var n=h(((t=gt(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(pt(e)/3))),i=Math.pow(10,-r),o=At[8+r/3];return function(t){return n(i*t)+o}}}}({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),_t=yt.format,Tt=yt.formatPrefix;var Ot=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},It=function(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)},St=function(){var t=1,e=1,n=0,r=!1;function i(i){var o=i.height+1;return i.x0=i.y0=n,i.x1=t,i.y1=e/o,i.eachBefore(function(t,e){return function(r){r.children&&function(t,e,n,r,i){for(var o,a=t.children,u=-1,s=a.length,c=t.value&&(r-e)/t.value;++u<s;)(o=a[u]).y0=n,o.y1=i,o.x0=e,o.x1=e+=o.value*c}(r,r.x0,t*(r.depth+1)/e,r.x1,t*(r.depth+2)/e);var i=r.x0,o=r.y0,a=r.x1-n,u=r.y1-n;a<i&&(i=a=(i+a)/2),u<o&&(o=u=(o+u)/2),r.x0=i,r.y0=o,r.x1=a,r.y1=u}}(e,o)),r&&i.eachBefore(It),i}return i.round=function(t){return arguments.length?(r=!!t,i):r},i.size=function(n){return arguments.length?(t=+n[0],e=+n[1],i):[t,e]},i.padding=function(t){return arguments.length?(n=+t,i):n},i};function Lt(t){var e=0,n=t.children,r=n&&n.length;if(r)for(;--r>=0;)e+=n[r].value;else e=1;t.value=e}function Ct(t,e){var n,r,i,o,a,u=new kt(t),s=+t.value&&(u.value=t.value),c=[u];for(null==e&&(e=xt);n=c.pop();)if(s&&(n.value=+n.data.value),(i=e(n.data))&&(a=i.length))for(n.children=new Array(a),o=a-1;o>=0;--o)c.push(r=n.children[o]=new kt(i[o])),r.parent=n,r.depth=n.depth+1;return u.eachBefore(Pt)}function xt(t){return t.children}function Mt(t){t.data=t.data.data}function Pt(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function kt(t){this.data=t,this.depth=this.height=0,this.parent=null}kt.prototype=Ct.prototype={constructor:kt,count:function(){return this.eachAfter(Lt)},each:function(t){var e,n,r,i,o=this,a=[o];do{for(e=a.reverse(),a=[];o=e.pop();)if(t(o),n=o.children)for(r=0,i=n.length;r<i;++r)a.push(n[r])}while(a.length);return this},eachAfter:function(t){for(var e,n,r,i=this,o=[i],a=[];i=o.pop();)if(a.push(i),e=i.children)for(n=0,r=e.length;n<r;++n)o.push(e[n]);for(;i=a.pop();)t(i);return this},eachBefore:function(t){for(var e,n,r=this,i=[r];r=i.pop();)if(t(r),e=r.children)for(n=e.length-1;n>=0;--n)i.push(e[n]);return this},sum:function(t){return this.eachAfter((function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n}))},sort:function(t){return this.eachBefore((function(e){e.children&&e.children.sort(t)}))},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){var t=[];return this.each((function(e){t.push(e)})),t},leaves:function(){var t=[];return this.eachBefore((function(e){e.children||t.push(e)})),t},links:function(){var t=this,e=[];return t.each((function(n){n!==t&&e.push({source:n.parent,target:n})})),e},copy:function(){return Ct(this).eachBefore(Mt)}};var Dt=Math.sqrt(50),Ut=Math.sqrt(10),jt=Math.sqrt(2);function Gt(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=Dt?10:o>=Ut?5:o>=jt?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=Dt?10:o>=Ut?5:o>=jt?2:1)}var Bt,Ft,Ht=(1===(Bt=Ot).length&&(Ft=Bt,Bt=function(t,e){return Ot(Ft(t),e)}),{left:function(t,e,n,r){for(null==n&&(n=0),null==r&&(r=t.length);n<r;){var i=n+r>>>1;Bt(t[i],e)<0?n=i+1:r=i}return n},right:function(t,e,n,r){for(null==n&&(n=0),null==r&&(r=t.length);n<r;){var i=n+r>>>1;Bt(t[i],e)>0?r=i:n=i+1}return n}}).right,Vt=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t};function Wt(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Yt(){}var Xt=.7,zt=1/Xt,$t="\\s*([+-]?\\d+)\\s*",qt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Kt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Qt=/^#([0-9a-f]{3,8})$/,Zt=new RegExp("^rgb\\("+[$t,$t,$t]+"\\)$"),Jt=new RegExp("^rgb\\("+[Kt,Kt,Kt]+"\\)$"),te=new RegExp("^rgba\\("+[$t,$t,$t,qt]+"\\)$"),ee=new RegExp("^rgba\\("+[Kt,Kt,Kt,qt]+"\\)$"),ne=new RegExp("^hsl\\("+[qt,Kt,Kt]+"\\)$"),re=new RegExp("^hsla\\("+[qt,Kt,Kt,qt]+"\\)$"),ie={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function oe(){return this.rgb().formatHex()}function ae(){return this.rgb().formatRgb()}function ue(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Qt.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?se(e):3===n?new fe(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?new fe(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?new fe(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Zt.exec(t))?new fe(e[1],e[2],e[3],1):(e=Jt.exec(t))?new fe(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=te.exec(t))?ce(e[1],e[2],e[3],e[4]):(e=ee.exec(t))?ce(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=ne.exec(t))?ge(e[1],e[2]/100,e[3]/100,1):(e=re.exec(t))?ge(e[1],e[2]/100,e[3]/100,e[4]):ie.hasOwnProperty(t)?se(ie[t]):"transparent"===t?new fe(NaN,NaN,NaN,0):null}function se(t){return new fe(t>>16&255,t>>8&255,255&t,1)}function ce(t,e,n,r){return r<=0&&(t=e=n=NaN),new fe(t,e,n,r)}function le(t){return t instanceof Yt||(t=ue(t)),t?new fe((t=t.rgb()).r,t.g,t.b,t.opacity):new fe}function he(t,e,n,r){return 1===arguments.length?le(t):new fe(t,e,n,null==r?1:r)}function fe(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function de(){return"#"+ve(this.r)+ve(this.g)+ve(this.b)}function pe(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function ve(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function ge(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new me(t,e,n,r)}function Ee(t){if(t instanceof me)return new me(t.h,t.s,t.l,t.opacity);if(t instanceof Yt||(t=ue(t)),!t)return new me;if(t instanceof me)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,u=o-i,s=(o+i)/2;return u?(a=e===o?(n-r)/u+6*(n<r):n===o?(r-e)/u+2:(e-n)/u+4,u/=s<.5?o+i:2-o-i,a*=60):u=s>0&&s<1?0:a,new me(a,u,s,t.opacity)}function me(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function ye(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}Vt(Yt,ue,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:oe,formatHex:oe,formatHsl:function(){return Ee(this).formatHsl()},formatRgb:ae,toString:ae}),Vt(fe,he,Wt(Yt,{brighter:function(t){return t=null==t?zt:Math.pow(zt,t),new fe(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?Xt:Math.pow(Xt,t),new fe(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:de,formatHex:de,formatRgb:pe,toString:pe})),Vt(me,(function(t,e,n,r){return 1===arguments.length?Ee(t):new me(t,e,n,null==r?1:r)}),Wt(Yt,{brighter:function(t){return t=null==t?zt:Math.pow(zt,t),new me(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?Xt:Math.pow(Xt,t),new me(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new fe(ye(t>=240?t-240:t+120,i,r),ye(t,i,r),ye(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var _e=function(t){return function(){return t}};function Te(t){return 1==(t=+t)?Ne:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):_e(isNaN(e)?n:e)}}function Ne(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):_e(isNaN(t)?e:t)}var we=function t(e){var n=Te(e);function r(t,e){var r=n((t=he(t)).r,(e=he(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),a=Ne(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1),Re=function(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(o){for(n=0;n<r;++n)i[n]=t[n]*(1-o)+e[n]*o;return i}};function be(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=xe(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}}var Ae=function(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}},Oe=function(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}},Ie=function(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=xe(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}},Se=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Le=new RegExp(Se.source,"g"),Ce=function(t,e){var n,r,i,o=Se.lastIndex=Le.lastIndex=0,a=-1,u=[],s=[];for(t+="",e+="";(n=Se.exec(t))&&(r=Le.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),u[a]?u[a]+=i:u[++a]=i),(n=n[0])===(r=r[0])?u[a]?u[a]+=r:u[++a]=r:(u[++a]=null,s.push({i:a,x:Oe(n,r)})),o=Le.lastIndex;return o<e.length&&(i=e.slice(o),u[a]?u[a]+=i:u[++a]=i),u.length<2?s[0]?function(t){return function(e){return t(e)+""}}(s[0].x):function(t){return function(){return t}}(e):(e=s.length,function(t){for(var n,r=0;r<e;++r)u[(n=s[r]).i]=n.x(t);return u.join("")})},xe=function(t,e){var n,r,i=typeof e;return null==e||"boolean"===i?_e(e):("number"===i?Oe:"string"===i?(n=ue(e))?(e=n,we):Ce:e instanceof ue?we:e instanceof Date?Ae:(r=e,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(e)?be:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?Ie:Oe:Re))(t,e)},Me=function(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}},Pe=function(t){return+t},ke=[0,1];function De(t){return t}function Ue(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n});var n}function je(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=Ue(i,r),o=n(a,o)):(r=Ue(r,i),o=n(o,a)),function(t){return o(r(t))}}function Ge(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=Ue(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(e){var n=Ht(t,e,1,r)-1;return o[n](i[n](e))}}function Be(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Fe(){var t,e,n,r,i,o,a=ke,u=ke,s=xe,c=De;function l(){var t,e,n,s=Math.min(a.length,u.length);return c!==De&&(t=a[0],e=a[s-1],t>e&&(n=t,t=e,e=n),c=function(n){return Math.max(t,Math.min(e,n))}),r=s>2?Ge:je,i=o=null,h}function h(e){return isNaN(e=+e)?n:(i||(i=r(a.map(t),u,s)))(t(c(e)))}return h.invert=function(n){return c(e((o||(o=r(u,a.map(t),Oe)))(n)))},h.domain=function(t){return arguments.length?(a=Array.from(t,Pe),l()):a.slice()},h.range=function(t){return arguments.length?(u=Array.from(t),l()):u.slice()},h.rangeRound=function(t){return u=Array.from(t),s=Me,l()},h.clamp=function(t){return arguments.length?(c=!!t||De,l()):c!==De},h.interpolate=function(t){return arguments.length?(s=t,l()):s},h.unknown=function(t){return arguments.length?(n=t,h):n},function(n,r){return t=n,e=r,l()}}function He(){return Fe()(De,De)}function Ve(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}var We=function(t,e,n,r){var i,o=function(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=Dt?i*=10:o>=Ut?i*=5:o>=jt&&(i*=2),e<t?-i:i}(t,e,n);switch((r=gt(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(pt(e)/3)))-pt(Math.abs(t)))}(o,a))||(r.precision=i),Tt(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,pt(e)-pt(t))+1}(o,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(t){return Math.max(0,-pt(Math.abs(t)))}(o))||(r.precision=i-2*("%"===r.type))}return _t(r)};function Ye(t){var e=t.domain;return t.ticks=function(t){var n=e();return function(t,e,n){var r,i,o,a,u=-1;if(n=+n,(t=+t)==(e=+e)&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(a=Gt(t,e,n))||!isFinite(a))return[];if(a>0)for(t=Math.ceil(t/a),e=Math.floor(e/a),o=new Array(i=Math.ceil(e-t+1));++u<i;)o[u]=(t+u)*a;else for(t=Math.floor(t*a),e=Math.ceil(e*a),o=new Array(i=Math.ceil(t-e+1));++u<i;)o[u]=(t-u)/a;return r&&o.reverse(),o}(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return We(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i=e(),o=0,a=i.length-1,u=i[o],s=i[a];return s<u&&(r=u,u=s,s=r,r=o,o=a,a=r),(r=Gt(u,s,n))>0?r=Gt(u=Math.floor(u/r)*r,s=Math.ceil(s/r)*r,n):r<0&&(r=Gt(u=Math.ceil(u*r)/r,s=Math.floor(s*r)/r,n)),r>0?(i[o]=Math.floor(u/r)*r,i[a]=Math.ceil(s/r)*r,e(i)):r<0&&(i[o]=Math.ceil(u*r)/r,i[a]=Math.floor(s*r)/r,e(i)),t},t}function Xe(){var t=He();return t.copy=function(){return Be(t,Xe())},Ve.apply(t,arguments),Ye(t)}function ze(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var $e={value:function(){}};function qe(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new Ke(r)}function Ke(t){this._=t}function Qe(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function Ze(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function Je(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=$e,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}Ke.prototype=qe.prototype={constructor:Ke,on:function(t,e){var n,r=this._,i=Qe(t+"",r),o=-1,a=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<a;)if(n=(t=i[o]).type)r[n]=Je(r[n],t.name,e);else if(null==e)for(n in r)r[n]=Je(r[n],t.name,null);return this}for(;++o<a;)if((n=(t=i[o]).type)&&(n=Ze(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Ke(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};var tn,en,nn=qe,rn=0,on=0,an=0,un=0,sn=0,cn=0,ln="object"==typeof performance&&performance.now?performance:Date,hn="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function fn(){return sn||(hn(dn),sn=ln.now()+cn)}function dn(){sn=0}function pn(){this._call=this._time=this._next=null}function vn(t,e,n){var r=new pn;return r.restart(t,e,n),r}function gn(){sn=(un=ln.now())+cn,rn=on=0;try{!function(){fn(),++rn;for(var t,e=tn;e;)(t=sn-e._time)>=0&&e._call.call(null,t),e=e._next;--rn}()}finally{rn=0,function(){for(var t,e,n=tn,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:tn=e);en=t,mn(r)}(),sn=0}}function En(){var t=ln.now(),e=t-un;e>1e3&&(cn-=e,un=t)}function mn(t){rn||(on&&(on=clearTimeout(on)),t-sn>24?(t<1/0&&(on=setTimeout(gn,t-ln.now()-cn)),an&&(an=clearInterval(an))):(an||(un=ln.now(),an=setInterval(En,1e3)),rn=1,hn(gn)))}pn.prototype=vn.prototype={constructor:pn,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?fn():+n)+(null==e?0:+e),this._next||en===this||(en?en._next=this:tn=this,en=this),this._call=t,this._time=n,mn()},stop:function(){this._call&&(this._call=null,this._time=1/0,mn())}};var yn=function(t,e,n){var r=new pn;return e=null==e?0:+e,r.restart((function(n){r.stop(),t(n+e)}),e,n),r},_n=nn("start","end","cancel","interrupt"),Tn=[],Nn=function(t,e,n,r,i,o){var a=t.__transition;if(a){if(n in a)return}else t.__transition={};!function(t,e,n){var r,i=t.__transition;function o(t){n.state=1,n.timer.restart(a,n.delay,n.time),n.delay<=t&&a(t-n.delay)}function a(o){var c,l,h,f;if(1!==n.state)return s();for(c in i)if((f=i[c]).name===n.name){if(3===f.state)return yn(a);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete i[c]):+c<e&&(f.state=6,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete i[c])}if(yn((function(){3===n.state&&(n.state=4,n.timer.restart(u,n.delay,n.time),u(o))})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(h=n.tween.length),c=0,l=-1;c<h;++c)(f=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(r[++l]=f);r.length=l+1}}function u(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(s),n.state=5,1),o=-1,a=r.length;++o<a;)r[o].call(t,i);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),s())}function s(){for(var r in n.state=6,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=vn(o,0,n.time)}(t,n,{name:e,index:r,group:i,on:_n,tween:Tn,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})};function wn(t,e){var n=bn(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function Rn(t,e){var n=bn(t,e);if(n.state>3)throw new Error("too late; already running");return n}function bn(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}var An,On,In,Sn,Ln=180/Math.PI,Cn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},xn=function(t,e,n,r,i,o){var a,u,s;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(s=t*n+e*r)&&(n-=t*s,r-=e*s),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,s/=u),t*r<e*n&&(t=-t,e=-e,s=-s,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*Ln,skewX:Math.atan(s)*Ln,scaleX:a,scaleY:u}};function Mn(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(o,a){var u=[],s=[];return o=t(o),a=t(a),function(t,r,i,o,a,u){if(t!==i||r!==o){var s=a.push("translate(",null,e,null,n);u.push({i:s-4,x:Oe(t,i)},{i:s-2,x:Oe(r,o)})}else(i||o)&&a.push("translate("+i+e+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,u,s),function(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:Oe(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(o.rotate,a.rotate,u,s),function(t,e,n,o){t!==e?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:Oe(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(o.skewX,a.skewX,u,s),function(t,e,n,r,o,a){if(t!==n||e!==r){var u=o.push(i(o)+"scale(",null,",",null,")");a.push({i:u-4,x:Oe(t,n)},{i:u-2,x:Oe(e,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,u,s),o=a=null,function(t){for(var e,n=-1,r=s.length;++n<r;)u[(e=s[n]).i]=e.x(t);return u.join("")}}}var Pn=Mn((function(t){return"none"===t?Cn:(An||(An=document.createElement("DIV"),On=document.documentElement,In=document.defaultView),An.style.transform=t,t=In.getComputedStyle(On.appendChild(An),null).getPropertyValue("transform"),On.removeChild(An),t=t.slice(7,-1).split(","),xn(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}),"px, ","px)","deg)"),kn=Mn((function(t){return null==t?Cn:(Sn||(Sn=document.createElementNS("http://www.w3.org/2000/svg","g")),Sn.setAttribute("transform",t),(t=Sn.transform.baseVal.consolidate())?(t=t.matrix,xn(t.a,t.b,t.c,t.d,t.e,t.f)):Cn)}),", ",")",")");function Dn(t,e){var n,r;return function(){var i=Rn(this,t),o=i.tween;if(o!==n)for(var a=0,u=(r=n=o).length;a<u;++a)if(r[a].name===e){(r=r.slice()).splice(a,1);break}i.tween=r}}function Un(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=Rn(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var u={name:e,value:n},s=0,c=i.length;s<c;++s)if(i[s].name===e){i[s]=u;break}s===c&&i.push(u)}o.tween=i}}function jn(t,e,n){var r=t._id;return t.each((function(){var t=Rn(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return bn(t,r).value[e]}}var Gn=function(t,e){var n;return("number"==typeof e?Oe:e instanceof ue?we:(n=ue(e))?(e=n,we):Ce)(t,e)};function Bn(t){return function(){this.removeAttribute(t)}}function Fn(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Hn(t,e,n){var r,i,o=n+"";return function(){var a=this.getAttribute(t);return a===o?null:a===r?i:i=e(r=a,n)}}function Vn(t,e,n){var r,i,o=n+"";return function(){var a=this.getAttributeNS(t.space,t.local);return a===o?null:a===r?i:i=e(r=a,n)}}function Wn(t,e,n){var r,i,o;return function(){var a,u,s=n(this);if(null!=s)return(a=this.getAttribute(t))===(u=s+"")?null:a===r&&u===i?o:(i=u,o=e(r=a,s));this.removeAttribute(t)}}function Yn(t,e,n){var r,i,o;return function(){var a,u,s=n(this);if(null!=s)return(a=this.getAttributeNS(t.space,t.local))===(u=s+"")?null:a===r&&u===i?o:(i=u,o=e(r=a,s));this.removeAttributeNS(t.space,t.local)}}function Xn(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function zn(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function $n(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&zn(t,i)),n}return i._value=e,i}function qn(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&Xn(t,i)),n}return i._value=e,i}function Kn(t,e){return function(){wn(this,t).delay=+e.apply(this,arguments)}}function Qn(t,e){return e=+e,function(){wn(this,t).delay=e}}function Zn(t,e){return function(){Rn(this,t).duration=+e.apply(this,arguments)}}function Jn(t,e){return e=+e,function(){Rn(this,t).duration=e}}function tr(t,e){if("function"!=typeof e)throw new Error;return function(){Rn(this,t).ease=e}}function er(t,e,n){var r,i,o=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?wn:Rn;return function(){var a=o(this,t),u=a.on;u!==r&&(i=(r=u).copy()).on(e,n),a.on=i}}var nr=ht.prototype.constructor;function rr(t){return function(){this.style.removeProperty(t)}}function ir(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function or(t,e,n){var r,i;function o(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&ir(t,o,n)),r}return o._value=e,o}function ar(t){return function(e){this.textContent=t.call(this,e)}}function ur(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&ar(r)),e}return r._value=t,r}var sr=0;function cr(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function lr(){return++sr}var hr=ht.prototype;cr.prototype=function(t){return ht().transition(t)}.prototype={constructor:cr,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=i(t));for(var r=this._groups,o=r.length,a=new Array(o),u=0;u<o;++u)for(var s,c,l=r[u],h=l.length,f=a[u]=new Array(h),d=0;d<h;++d)(s=l[d])&&(c=t.call(s,s.__data__,d,l))&&("__data__"in s&&(c.__data__=s.__data__),f[d]=c,Nn(f[d],e,n,d,f,bn(s,n)));return new cr(a,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=a(t));for(var r=this._groups,i=r.length,o=[],u=[],s=0;s<i;++s)for(var c,l=r[s],h=l.length,f=0;f<h;++f)if(c=l[f]){for(var d,p=t.call(c,c.__data__,f,l),v=bn(c,n),g=0,E=p.length;g<E;++g)(d=p[g])&&Nn(d,e,n,g,p,v);o.push(p),u.push(c)}return new cr(o,u,e,n)},filter:function(t){"function"!=typeof t&&(t=u(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,c=r[i]=[],l=0;l<s;++l)(o=a[l])&&t.call(o,o.__data__,l,a)&&c.push(o);return new cr(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),u=0;u<o;++u)for(var s,c=e[u],l=n[u],h=c.length,f=a[u]=new Array(h),d=0;d<h;++d)(s=c[d]||l[d])&&(f[d]=s);for(;u<r;++u)a[u]=e[u];return new cr(a,this._parents,this._name,this._id)},selection:function(){return new nr(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=lr(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,u=r[o],s=u.length,c=0;c<s;++c)if(a=u[c]){var l=bn(a,e);Nn(a,t,n,c,u,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new cr(r,this._parents,t,n)},call:hr.call,nodes:hr.nodes,node:hr.node,size:hr.size,empty:hr.empty,each:hr.each,on:function(t,e){var n=this._id;return arguments.length<2?bn(this.node(),n).on.on(t):this.each(er(n,t,e))},attr:function(t,e){var n=v(t),r="transform"===n?kn:Gn;return this.attrTween(t,"function"==typeof e?(n.local?Yn:Wn)(n,r,jn(this,"attr."+t,e)):null==e?(n.local?Fn:Bn)(n):(n.local?Vn:Hn)(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=v(t);return this.tween(n,(r.local?$n:qn)(r,e))},style:function(t,e,n){var r="transform"==(t+="")?Pn:Gn;return null==e?this.styleTween(t,function(t,e){var n,r,i;return function(){var o=A(this,t),a=(this.style.removeProperty(t),A(this,t));return o===a?null:o===n&&a===r?i:i=e(n=o,r=a)}}(t,r)).on("end.style."+t,rr(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var r,i,o;return function(){var a=A(this,t),u=n(this),s=u+"";return null==u&&(this.style.removeProperty(t),s=u=A(this,t)),a===s?null:a===r&&s===i?o:(i=s,o=e(r=a,u))}}(t,r,jn(this,"style."+t,e))).each(function(t,e){var n,r,i,o,a="style."+e,u="end."+a;return function(){var s=Rn(this,t),c=s.on,l=null==s.value[a]?o||(o=rr(e)):void 0;c===n&&i===l||(r=(n=c).copy()).on(u,i=l),s.on=r}}(this._id,t)):this.styleTween(t,function(t,e,n){var r,i,o=n+"";return function(){var a=A(this,t);return a===o?null:a===r?i:i=e(r=a,n)}}(t,r,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,or(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(jn(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,ur(t))},remove:function(){return this.on("end.remove",(t=this._id,function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}));var t},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=bn(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==e?Dn:Un)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Kn:Qn)(e,t)):bn(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Zn:Jn)(e,t)):bn(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(tr(e,t)):bn(this.node(),e).ease},end:function(){var t,e,n=this,r=n._id,i=n.size();return new Promise((function(o,a){var u={value:a},s={value:function(){0==--i&&o()}};n.each((function(){var n=Rn(this,r),i=n.on;i!==t&&((e=(t=i).copy())._.cancel.push(u),e._.interrupt.push(u),e._.end.push(s)),n.on=e}))}))}};var fr={time:null,delay:0,duration:250,ease:ze};function dr(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return fr.time=fn(),fr;return n}ht.prototype.interrupt=function(t){return this.each((function(){!function(t,e){var n,r,i,o=t.__transition,a=!0;if(o){for(i in e=null==e?null:e+"",o)(n=o[i]).name===e?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete t.__transition}}(this,t)}))},ht.prototype.transition=function(t){var e,n;t instanceof cr?(e=t._id,t=t._name):(e=lr(),(n=fr).time=fn(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,u=r[o],s=u.length,c=0;c<s;++c)(a=u[c])&&Nn(a,t,e,c,u,n||dr(a,e));return new cr(r,this._parents,t,e)},e.default=function(){var t=960,e=null,n=18,r=null,i=null,o="",a=750,u=ze,s=!1,c=!1,l=null,h=0,f=null,d=!1,p=!1,v=!1,g=0,E=0,m=0,y=!1,_=!1,T=null,N=function(t){return t.data.n||t.data.name},w=function(t){return"v"in t?t.v:t.value},R=function(t){return t.c||t.children},b=function(t){return t.data.l||t.data.libtype},A=function(t){return"d"in t.data?t.data.d:t.data.delta},O=function(){f&&k()},I=O;let S=(t,e)=>{if(!e)return!1;const n=new RegExp(e),r=N(t);return void 0!==r&&r&&r.match(n)};const L=S;var C,x=function(t){f&&(t?f.innerHTML=t:g?k():f.innerHTML="")},M=x,P=function(t){return N(t)+" ("+_t(".3f")(100*(t.x1-t.x0),3)+"%, "+w(t)+" samples)"};function k(){f.innerHTML=g+" of "+E+" samples ( "+_t(".3f")(g/E*100,3)+"%)"}var D=function(t){return t.highlight?"#E600E6":function(t,e,n){var r,i,o;if(p)r=220,i=220,o=220,n||(n=0),n>0?i=o=Math.round(210*(m-n)/m):n<0&&(i=r=Math.round(210*(m+n)/m));else{var a=v?"cold":"warm";v||void 0===e||""===e||(a="red",void 0!==t&&t&&t.match(/::/)&&(a="yellow"),"kernel"===e?a="orange":"jit"===e?a="green":"inlined"===e&&(a="aqua"));var u=0;if(t){var s=t.split("`");s.length>1&&(t=s[s.length-1]),u=function(t){const e=6;var n=0,r=0,i=1,o=10;if(t){for(var a=0;a<t.length&&!(a>e);a++)n+=i*(t.charCodeAt(a)%o),r+=i*(o-1),i*=.7;r>0&&(n/=r)}return n}(t=t.split("(")[0])}"red"===a?(r=200+Math.round(55*u),o=i=50+Math.round(80*u)):"orange"===a?(r=190+Math.round(65*u),i=90+Math.round(65*u),o=0):"yellow"===a?(i=r=175+Math.round(55*u),o=50+Math.round(20*u)):"green"===a?(r=50+Math.round(60*u),i=200+Math.round(55*u),o=r):"aqua"===a?(r=50+Math.round(60*u),o=i=165+Math.round(55*u)):"cold"===a?(r=0+Math.round(55*(1-u)),i=0+Math.round(230*(1-u)),o=200+Math.round(55*u)):(r=200+Math.round(55*u),i=0+Math.round(230*(1-u)),o=0+Math.round(55*(1-u)))}return"rgb("+r+","+i+","+o+")"}(N(t),b(t),A(t))},U=D;function j(t){t.data.fade=!1,t.data.hide=!1,t.children&&t.children.forEach(j)}function G(t){t.parent&&(t.parent.data.fade=!0,G(t.parent))}function B(t){if(i&&i.hide(),function(t){let e,n,r,i=t,o=i.parent;for(;o;){for(e=o.children,n=e.length;n--;)r=e[n],r!==i&&(r.data.hide=!0);i=o,o=i.parent}}(t),j(t),G(t),Y(),_){const e=C._groups[0][0].parentNode.offsetTop,r=(window.innerHeight-e)/n,i=(t.height-r+10)*n;window.scrollTo({top:e+i,left:0,behavior:"smooth"})}"function"==typeof l&&l(t)}function F(t,e){if(t.id===e)return t;var n=R(t);if(n)for(var r=0;r<n.length;r++){var i=F(n[r],e);if(i)return i}}function H(t){t.highlight=!1,R(t)&&R(t).forEach((function(t){H(t)}))}function V(t,e){return"function"==typeof s?s(t,e):s?Ot(N(t),N(e)):void 0}var W=St();function Y(){r.each((function(r){var o=Xe().range([0,t]),l=Xe().range([0,n]);!function(t){let e,n,r,i,o,a,u,s;const c=[],l=[],h=[],f=!d;let p=t.data;for(p.hide?(t.value=0,n=t.children,n&&h.push(n)):(t.value=p.fade?0:w(p),c.push(t));e=c.pop();)if(n=e.children,n&&(o=n.length)){for(i=0;o--;)u=n[o],p=u.data,p.hide?(u.value=0,r=u.children,r&&h.push(r)):(p.fade?u.value=0:(s=w(p),u.value=s,i+=s),c.push(u));f&&e.value&&(e.value-=i),l.push(n)}for(o=l.length;o--;){for(n=l[o],i=0,a=n.length;a--;)i+=n[a].value;n[0].parent.value+=i}for(;h.length;)for(n=h.pop(),a=n.length;a--;)u=n[a],u.value=0,r=u.children,r&&h.push(r)}(r),E=r.value,s&&r.sort(V),W(r);var f=t/(r.x1-r.x0);function p(t){return(t.x1-t.x0)*f}var v=function(e){var n=e.descendants();if(h>0){var r=t/(e.x1-e.x0);n=n.filter((function(t){return(t.x1-t.x0)*r>h}))}return n}(r),g=ft(this).select("svg").selectAll("g").data(v,(function(t){return t.id}));if(!e||y){var m=Math.max.apply(null,v.map((function(t){return t.depth})));(e=(m+3)*n)<T&&(e=T),ft(this).select("svg").attr("height",e)}g.transition().duration(a).ease(u).attr("transform",(function(t){return"translate("+o(t.x0)+","+(c?l(t.depth):e-l(t.depth)-n)+")"})),g.select("rect").transition().duration(a).ease(u).attr("width",p);var _=g.enter().append("svg:g").attr("transform",(function(t){return"translate("+o(t.x0)+","+(c?l(t.depth):e-l(t.depth)-n)+")"}));_.append("svg:rect").transition().delay(a/2).attr("width",p),i||_.append("svg:title"),_.append("foreignObject").append("xhtml:div"),(g=ft(this).select("svg").selectAll("g").data(v,(function(t){return t.id}))).attr("width",p).attr("height",(function(t){return n})).attr("name",(function(t){return N(t)})).attr("class",(function(t){return t.data.fade?"frame fade":"frame"})),g.select("rect").attr("height",(function(t){return n})).attr("fill",(function(t){return D(t)})),i||g.select("title").text(P),g.select("foreignObject").attr("width",p).attr("height",(function(t){return n})).select("div").attr("class","d3-flame-graph-label").style("display",(function(t){return p(t)<35?"none":"block"})).transition().delay(a).text(N),g.on("click",B),g.exit().remove(),g.on("mouseover",(function(t){i&&i.show(t,this),x(P(t))})).on("mouseout",(function(){i&&i.hide(),x(null)}))}))}function X(t,e){e.forEach((function(e){var n=t.find((function(t){return t.name===e.name}));n?(n.original?n.original+=e.value:n.value+=e.value,e.children&&(n.children||(n.children=[]),X(n.children,e.children))):t.push(e)}))}function z(t){m=0;let e=0,n=0;const r=p;!function(t,e){e(t);let n=t.children;if(n){const t=[n];let r,i,o;for(;t.length;)for(n=t.pop(),r=n.length;r--;)i=n[r],e(i),o=i.children,o&&t.push(o)}}(t,(function(t){t.id=e++,r&&(n=Math.abs(A(t)),m<n&&(m=n))}))}function $(n){const a=Ct(n.datum(),R);if(z(a),r=n.datum(a),!arguments.length)return $;r.each((function(n){C||(C=ft(this).append("svg:svg").attr("width",t).attr("class","partition d3-flame-graph"),e&&(e<T&&(e=T),C.attr("height",e)),C.append("svg:text").attr("class","title").attr("text-anchor","middle").attr("y","25").attr("x",t/2).attr("fill","#808080").text(o),i&&C.call(i))})),Y()}return $.height=function(t){return arguments.length?(e=t,$):e},$.minHeight=function(t){return arguments.length?(T=t,$):T},$.width=function(e){return arguments.length?(t=e,$):t},$.cellHeight=function(t){return arguments.length?(n=t,$):n},$.tooltip=function(t){return arguments.length?("function"==typeof t&&(i=t),$):i},$.title=function(t){return arguments.length?(o=t,$):o},$.transitionDuration=function(t){return arguments.length?(a=t,$):a},$.transitionEase=function(t){return arguments.length?(u=t,$):u},$.sort=function(t){return arguments.length?(s=t,$):s},$.inverted=function(t){return arguments.length?(c=t,$):c},$.differential=function(t){return arguments.length?(p=t,$):p},$.elided=function(t){return arguments.length?(v=t,$):v},$.setLabelHandler=function(t){return arguments.length?(P=t,$):P},$.label=$.setLabelHandler,$.search=function(t){r.each((function(e){!function(t,e){var n=[],r=0;!function t(i,o){var a=!1;S(i,e)?(i.highlight=!0,a=!0,o||(r+=w(i)),n.push(i)):i.highlight=!1,R(i)&&R(i).forEach((function(e){t(e,o||a)}))}(t,!1),g=r,O(n,r,E)}(e,t),Y()}))},$.findById=function(t){if(null==t)return null;let e=null;return r.each((function(n){null===e&&(e=F(n,t))})),e},$.clear=function(){g=0,x(null),r.each((function(t){H(t),Y()}))},$.zoomTo=function(t){B(t)},$.resetZoom=function(){r.each((function(t){B(t)}))},$.onClick=function(t){return arguments.length?(l=t,$):l},$.merge=function(t){return r?(r.each((function(n){X([n.data],[t]),z(e=Ct(n.data,R))})),r=r.datum(e),Y(),$):$;var e},$.update=function(t){return r?(r.each((function(n){n.data=t,z(e=Ct(n.data,R))})),r=r.datum(e),Y(),$):$;var e},$.destroy=function(){return r?(i&&i.hide(),r.selectAll("svg").remove(),$):$},$.setColorMapper=function(t){return arguments.length?(D=e=>{const n=U(e);return t(e,n)},$):(D=U,$)},$.color=$.setColorMapper,$.minFrameSize=function(t){return arguments.length?(h=t,$):h},$.setDetailsElement=function(t){return arguments.length?(f=t,$):f},$.details=$.setDetailsElement,$.selfValue=function(t){return arguments.length?(d=t,$):d},$.resetHeightOnZoom=function(t){return arguments.length?(y=t,$):y},$.scrollOnZoom=function(t){return arguments.length?(_=t,$):_},$.getName=function(t){return arguments.length?(N=t,$):N},$.getValue=function(t){return arguments.length?(w=t,$):w},$.getChildren=function(t){return arguments.length?(R=t,$):R},$.getLibtype=function(t){return arguments.length?(b=t,$):b},$.getDelta=function(t){return arguments.length?(A=t,$):A},$.setSearchHandler=function(t){return arguments.length?(O=t,$):(O=I,$)},$.setDetailsHandler=function(t){return arguments.length?(x=t,$):(x=M,$)},$.setSearchMatch=function(t){return arguments.length?(S=t,$):(S=L,$)},$}}}).default},t.exports=n()})));a((function(t,e){var n;window,n=function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=6)}({6:function(t,e,n){function r(t){return t.highlight?"rgb(230, 0, 230)":`rgb(${function(t,e,n){const r=n,i=1-r;return[Math.round(t[0]*r+e[0]*i),Math.round(t[1]*r+e[1]*i),Math.round(t[2]*r+e[2]*i)]}([0,255,40],[196,245,233],t.data.value/t.value).join()})`}function i(t){if(t.highlight)return"#E600E6";let e=t.data.n||t.data.name,n=0;const r=e.split("`");return r.length>1&&(e=r[r.length-1]),e=e.split("(")[0],n=function(t){var e=0,n=0,r=1;if(t){for(var i=0;i<t.length&&!(i>6);i++)e+=r*(t.charCodeAt(i)%10),n+=9*r,r*=.7;n>0&&(e/=n)}return e}(e),"rgb("+(0+Math.round(55*(1-n)))+","+(0+Math.round(230*(1-n)))+","+(200+Math.round(55*n))+")"}function o(t,e){let n=e;const{v8_jit:r,javascript:i,optimized:o}=t.data.extras||{};if(r&&!i&&(n="#dadada"),i){let e=(o||0)/t.value,r=255,i=0,a=0;e<.4?(e*=2.5,r=240-200*e):e<.9?(e=2*(e-.4),r=0,a=200-200*e,i=100*e):(e=10*(e-.9),r=0,a=0,i=100+150*e),n=`rgb(${r} , ${i}, ${a})`}return n}n.r(e),n.d(e,"allocationColorMapper",(function(){return r})),n.d(e,"offCpuColorMapper",(function(){return i})),n.d(e,"nodeJsColorMapper",(function(){return o}))}})},t.exports=n()})),a((function(t,e){var n;window,n=function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=7)}({7:function(t,e,n){function r(){}n.r(e),n.d(e,"defaultFlamegraphTooltip",(function(){return mn}));var i=function(t){return null==t?r:function(){return this.querySelector(t)}};function o(){return[]}var a=function(t){return null==t?o:function(){return this.querySelectorAll(t)}},u=function(t){return function(){return this.matches(t)}},s=function(t){return new Array(t.length)};function c(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function l(t,e,n,r,i,o){for(var a,u=0,s=e.length,l=o.length;u<l;++u)(a=e[u])?(a.__data__=o[u],r[u]=a):n[u]=new c(t,o[u]);for(;u<s;++u)(a=e[u])&&(i[u]=a)}function h(t,e,n,r,i,o,a){var u,s,l,h={},f=e.length,d=o.length,p=new Array(f);for(u=0;u<f;++u)(s=e[u])&&(p[u]=l="$"+a.call(s,s.__data__,u,e),l in h?i[u]=s:h[l]=s);for(u=0;u<d;++u)(s=h[l="$"+a.call(t,o[u],u,o)])?(r[u]=s,s.__data__=o[u],h[l]=null):n[u]=new c(t,o[u]);for(u=0;u<f;++u)(s=e[u])&&h[p[u]]===s&&(i[u]=s)}function f(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}c.prototype={constructor:c,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var d="http://www.w3.org/1999/xhtml",p={svg:"http://www.w3.org/2000/svg",xhtml:d,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},v=function(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),p.hasOwnProperty(e)?{space:p[e],local:t}:t};function g(t){return function(){this.removeAttribute(t)}}function E(t){return function(){this.removeAttributeNS(t.space,t.local)}}function m(t,e){return function(){this.setAttribute(t,e)}}function y(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function _(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function T(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}var N=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView};function w(t){return function(){this.style.removeProperty(t)}}function R(t,e,n){return function(){this.style.setProperty(t,e,n)}}function b(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function A(t,e){return t.style.getPropertyValue(e)||N(t).getComputedStyle(t,null).getPropertyValue(e)}function O(t){return function(){delete this[t]}}function I(t,e){return function(){this[t]=e}}function S(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function L(t){return t.trim().split(/^|\s+/)}function C(t){return t.classList||new x(t)}function x(t){this._node=t,this._names=L(t.getAttribute("class")||"")}function M(t,e){for(var n=C(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function P(t,e){for(var n=C(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function k(t){return function(){M(this,t)}}function D(t){return function(){P(this,t)}}function U(t,e){return function(){(e.apply(this,arguments)?M:P)(this,t)}}function j(){this.textContent=""}function G(t){return function(){this.textContent=t}}function B(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function F(){this.innerHTML=""}function H(t){return function(){this.innerHTML=t}}function V(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function W(){this.nextSibling&&this.parentNode.appendChild(this)}function Y(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function X(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===d&&e.documentElement.namespaceURI===d?e.createElement(t):e.createElementNS(n,t)}}function z(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}x.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var $=function(t){var e=v(t);return(e.local?z:X)(e)};function q(){return null}function K(){var t=this.parentNode;t&&t.removeChild(this)}function Q(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Z(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}var J={};function tt(t,e,n){return t=et(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function et(t,e,n){return function(r){try{t.call(this,this.__data__,e,n)}finally{}}}function nt(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}function rt(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?e.length=i:delete this.__on}}}function it(t,e,n){var r=J.hasOwnProperty(t.type)?tt:et;return function(i,o,a){var u,s=this.__on,c=r(e,o,a);if(s)for(var l=0,h=s.length;l<h;++l)if((u=s[l]).type===t.type&&u.name===t.name)return this.removeEventListener(u.type,u.listener,u.capture),this.addEventListener(u.type,u.listener=c,u.capture=n),void(u.value=e);this.addEventListener(t.type,c,n),u={type:t.type,name:t.name,value:e,listener:c,capture:n},s?s.push(u):this.__on=[u]}}function ot(t,e,n){var r=N(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function at(t,e){return function(){return ot(this,t,e)}}function ut(t,e){return function(){return ot(this,t,e.apply(this,arguments))}}"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(J={mouseenter:"mouseover",mouseleave:"mouseout"}));var st=[null];function ct(t,e){this._groups=t,this._parents=e}function lt(){return new ct([[document.documentElement]],st)}ct.prototype=lt.prototype={constructor:ct,select:function(t){"function"!=typeof t&&(t=i(t));for(var e=this._groups,n=e.length,r=new Array(n),o=0;o<n;++o)for(var a,u,s=e[o],c=s.length,l=r[o]=new Array(c),h=0;h<c;++h)(a=s[h])&&(u=t.call(a,a.__data__,h,s))&&("__data__"in a&&(u.__data__=a.__data__),l[h]=u);return new ct(r,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=a(t));for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var u,s=e[o],c=s.length,l=0;l<c;++l)(u=s[l])&&(r.push(t.call(u,u.__data__,l,s)),i.push(u));return new ct(r,i)},filter:function(t){"function"!=typeof t&&(t=u(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,c=r[i]=[],l=0;l<s;++l)(o=a[l])&&t.call(o,o.__data__,l,a)&&c.push(o);return new ct(r,this._parents)},data:function(t,e){if(!t)return g=new Array(this.size()),f=-1,this.each((function(t){g[++f]=t})),g;var n,r=e?h:l,i=this._parents,o=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var a=o.length,u=new Array(a),s=new Array(a),c=new Array(a),f=0;f<a;++f){var d=i[f],p=o[f],v=p.length,g=t.call(d,d&&d.__data__,f,i),E=g.length,m=s[f]=new Array(E),y=u[f]=new Array(E);r(d,p,m,y,c[f]=new Array(v),g,e);for(var _,T,N=0,w=0;N<E;++N)if(_=m[N]){for(N>=w&&(w=N+1);!(T=y[w])&&++w<E;);_._next=T||null}}return(u=new ct(u,i))._enter=s,u._exit=c,u},enter:function(){return new ct(this._enter||this._groups.map(s),this._parents)},exit:function(){return new ct(this._exit||this._groups.map(s),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,o=this.exit();return r="function"==typeof t?t(r):r.append(t+""),null!=e&&(i=e(i)),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),u=0;u<o;++u)for(var s,c=e[u],l=n[u],h=c.length,f=a[u]=new Array(h),d=0;d<h;++d)(s=c[d]||l[d])&&(f[d]=s);for(;u<r;++u)a[u]=e[u];return new ct(a,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=f);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,u=n[o],s=u.length,c=i[o]=new Array(s),l=0;l<s;++l)(a=u[l])&&(c[l]=a);c.sort(e)}return new ct(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each((function(){t[++e]=this})),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],a=0,u=o.length;a<u;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},attr:function(t,e){var n=v(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?E:g:"function"==typeof e?n.local?T:_:n.local?y:m)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?w:"function"==typeof e?b:R)(t,e,null==n?"":n)):A(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?O:"function"==typeof e?S:I)(t,e)):this.node()[t]},classed:function(t,e){var n=L(t+"");if(arguments.length<2){for(var r=C(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?U:e?k:D)(n,e))},text:function(t){return arguments.length?this.each(null==t?j:("function"==typeof t?B:G)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?F:("function"==typeof t?V:H)(t)):this.node().innerHTML},raise:function(){return this.each(W)},lower:function(){return this.each(Y)},append:function(t){var e="function"==typeof t?t:$(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:$(t),r=null==e?q:"function"==typeof e?e:i(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(K)},clone:function(t){return this.select(t?Z:Q)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,o=nt(t+""),a=o.length;if(!(arguments.length<2)){for(u=e?it:rt,null==n&&(n=!1),r=0;r<a;++r)this.each(u(o[r],e,n));return this}var u=this.node().__on;if(u)for(var s,c=0,l=u.length;c<l;++c)for(r=0,s=u[c];r<a;++r)if((i=o[r]).type===s.type&&i.name===s.name)return s.value},dispatch:function(t,e){return this.each(("function"==typeof e?ut:at)(t,e))}};var ht=lt,ft={value:function(){}};function dt(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new pt(r)}function pt(t){this._=t}function vt(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function gt(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function Et(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=ft,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}pt.prototype=dt.prototype={constructor:pt,on:function(t,e){var n,r=this._,i=vt(t+"",r),o=-1,a=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<a;)if(n=(t=i[o]).type)r[n]=Et(r[n],t.name,e);else if(null==e)for(n in r)r[n]=Et(r[n],t.name,null);return this}for(;++o<a;)if((n=(t=i[o]).type)&&(n=gt(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new pt(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};var mt,yt,_t=dt,Tt=0,Nt=0,wt=0,Rt=0,bt=0,At=0,Ot="object"==typeof performance&&performance.now?performance:Date,It="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function St(){return bt||(It(Lt),bt=Ot.now()+At)}function Lt(){bt=0}function Ct(){this._call=this._time=this._next=null}function xt(t,e,n){var r=new Ct;return r.restart(t,e,n),r}function Mt(){bt=(Rt=Ot.now())+At,Tt=Nt=0;try{!function(){St(),++Tt;for(var t,e=mt;e;)(t=bt-e._time)>=0&&e._call.call(null,t),e=e._next;--Tt}()}finally{Tt=0,function(){for(var t,e,n=mt,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:mt=e);yt=t,kt(r)}(),bt=0}}function Pt(){var t=Ot.now(),e=t-Rt;e>1e3&&(At-=e,Rt=t)}function kt(t){Tt||(Nt&&(Nt=clearTimeout(Nt)),t-bt>24?(t<1/0&&(Nt=setTimeout(Mt,t-Ot.now()-At)),wt&&(wt=clearInterval(wt))):(wt||(Rt=Ot.now(),wt=setInterval(Pt,1e3)),Tt=1,It(Mt)))}Ct.prototype=xt.prototype={constructor:Ct,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?St():+n)+(null==e?0:+e),this._next||yt===this||(yt?yt._next=this:mt=this,yt=this),this._call=t,this._time=n,kt()},stop:function(){this._call&&(this._call=null,this._time=1/0,kt())}};var Dt=function(t,e,n){var r=new Ct;return e=null==e?0:+e,r.restart((function(n){r.stop(),t(n+e)}),e,n),r},Ut=_t("start","end","cancel","interrupt"),jt=[],Gt=function(t,e,n,r,i,o){var a=t.__transition;if(a){if(n in a)return}else t.__transition={};!function(t,e,n){var r,i=t.__transition;function o(t){n.state=1,n.timer.restart(a,n.delay,n.time),n.delay<=t&&a(t-n.delay)}function a(o){var c,l,h,f;if(1!==n.state)return s();for(c in i)if((f=i[c]).name===n.name){if(3===f.state)return Dt(a);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete i[c]):+c<e&&(f.state=6,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete i[c])}if(Dt((function(){3===n.state&&(n.state=4,n.timer.restart(u,n.delay,n.time),u(o))})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(h=n.tween.length),c=0,l=-1;c<h;++c)(f=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(r[++l]=f);r.length=l+1}}function u(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(s),n.state=5,1),o=-1,a=r.length;++o<a;)r[o].call(t,i);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),s())}function s(){for(var r in n.state=6,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=xt(o,0,n.time)}(t,n,{name:e,index:r,group:i,on:Ut,tween:jt,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})};function Bt(t,e){var n=Ht(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function Ft(t,e){var n=Ht(t,e);if(n.state>3)throw new Error("too late; already running");return n}function Ht(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}var Vt,Wt,Yt,Xt,zt=function(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}},$t=180/Math.PI,qt={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},Kt=function(t,e,n,r,i,o){var a,u,s;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(s=t*n+e*r)&&(n-=t*s,r-=e*s),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,s/=u),t*r<e*n&&(t=-t,e=-e,s=-s,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*$t,skewX:Math.atan(s)*$t,scaleX:a,scaleY:u}};function Qt(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(o,a){var u=[],s=[];return o=t(o),a=t(a),function(t,r,i,o,a,u){if(t!==i||r!==o){var s=a.push("translate(",null,e,null,n);u.push({i:s-4,x:zt(t,i)},{i:s-2,x:zt(r,o)})}else(i||o)&&a.push("translate("+i+e+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,u,s),function(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:zt(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(o.rotate,a.rotate,u,s),function(t,e,n,o){t!==e?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:zt(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(o.skewX,a.skewX,u,s),function(t,e,n,r,o,a){if(t!==n||e!==r){var u=o.push(i(o)+"scale(",null,",",null,")");a.push({i:u-4,x:zt(t,n)},{i:u-2,x:zt(e,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,u,s),o=a=null,function(t){for(var e,n=-1,r=s.length;++n<r;)u[(e=s[n]).i]=e.x(t);return u.join("")}}}var Zt=Qt((function(t){return"none"===t?qt:(Vt||(Vt=document.createElement("DIV"),Wt=document.documentElement,Yt=document.defaultView),Vt.style.transform=t,t=Yt.getComputedStyle(Wt.appendChild(Vt),null).getPropertyValue("transform"),Wt.removeChild(Vt),t=t.slice(7,-1).split(","),Kt(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}),"px, ","px)","deg)"),Jt=Qt((function(t){return null==t?qt:(Xt||(Xt=document.createElementNS("http://www.w3.org/2000/svg","g")),Xt.setAttribute("transform",t),(t=Xt.transform.baseVal.consolidate())?(t=t.matrix,Kt(t.a,t.b,t.c,t.d,t.e,t.f)):qt)}),", ",")",")");function te(t,e){var n,r;return function(){var i=Ft(this,t),o=i.tween;if(o!==n)for(var a=0,u=(r=n=o).length;a<u;++a)if(r[a].name===e){(r=r.slice()).splice(a,1);break}i.tween=r}}function ee(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=Ft(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var u={name:e,value:n},s=0,c=i.length;s<c;++s)if(i[s].name===e){i[s]=u;break}s===c&&i.push(u)}o.tween=i}}function ne(t,e,n){var r=t._id;return t.each((function(){var t=Ft(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return Ht(t,r).value[e]}}var re=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t};function ie(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function oe(){}var ae=.7,ue=1/ae,se="\\s*([+-]?\\d+)\\s*",ce="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",le="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",he=/^#([0-9a-f]{3,8})$/,fe=new RegExp("^rgb\\("+[se,se,se]+"\\)$"),de=new RegExp("^rgb\\("+[le,le,le]+"\\)$"),pe=new RegExp("^rgba\\("+[se,se,se,ce]+"\\)$"),ve=new RegExp("^rgba\\("+[le,le,le,ce]+"\\)$"),ge=new RegExp("^hsl\\("+[ce,le,le]+"\\)$"),Ee=new RegExp("^hsla\\("+[ce,le,le,ce]+"\\)$"),me={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function ye(){return this.rgb().formatHex()}function _e(){return this.rgb().formatRgb()}function Te(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=he.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Ne(e):3===n?new Ae(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?new Ae(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?new Ae(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=fe.exec(t))?new Ae(e[1],e[2],e[3],1):(e=de.exec(t))?new Ae(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=pe.exec(t))?we(e[1],e[2],e[3],e[4]):(e=ve.exec(t))?we(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=ge.exec(t))?Le(e[1],e[2]/100,e[3]/100,1):(e=Ee.exec(t))?Le(e[1],e[2]/100,e[3]/100,e[4]):me.hasOwnProperty(t)?Ne(me[t]):"transparent"===t?new Ae(NaN,NaN,NaN,0):null}function Ne(t){return new Ae(t>>16&255,t>>8&255,255&t,1)}function we(t,e,n,r){return r<=0&&(t=e=n=NaN),new Ae(t,e,n,r)}function Re(t){return t instanceof oe||(t=Te(t)),t?new Ae((t=t.rgb()).r,t.g,t.b,t.opacity):new Ae}function be(t,e,n,r){return 1===arguments.length?Re(t):new Ae(t,e,n,null==r?1:r)}function Ae(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function Oe(){return"#"+Se(this.r)+Se(this.g)+Se(this.b)}function Ie(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function Se(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function Le(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new xe(t,e,n,r)}function Ce(t){if(t instanceof xe)return new xe(t.h,t.s,t.l,t.opacity);if(t instanceof oe||(t=Te(t)),!t)return new xe;if(t instanceof xe)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,u=o-i,s=(o+i)/2;return u?(a=e===o?(n-r)/u+6*(n<r):n===o?(r-e)/u+2:(e-n)/u+4,u/=s<.5?o+i:2-o-i,a*=60):u=s>0&&s<1?0:a,new xe(a,u,s,t.opacity)}function xe(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Me(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}re(oe,Te,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:ye,formatHex:ye,formatHsl:function(){return Ce(this).formatHsl()},formatRgb:_e,toString:_e}),re(Ae,be,ie(oe,{brighter:function(t){return t=null==t?ue:Math.pow(ue,t),new Ae(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?ae:Math.pow(ae,t),new Ae(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Oe,formatHex:Oe,formatRgb:Ie,toString:Ie})),re(xe,(function(t,e,n,r){return 1===arguments.length?Ce(t):new xe(t,e,n,null==r?1:r)}),ie(oe,{brighter:function(t){return t=null==t?ue:Math.pow(ue,t),new xe(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?ae:Math.pow(ae,t),new xe(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Ae(Me(t>=240?t-240:t+120,i,r),Me(t,i,r),Me(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var Pe=function(t){return function(){return t}};function ke(t){return 1==(t=+t)?De:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):Pe(isNaN(e)?n:e)}}function De(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):Pe(isNaN(t)?e:t)}var Ue=function t(e){var n=ke(e);function r(t,e){var r=n((t=be(t)).r,(e=be(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),a=De(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1),je=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ge=new RegExp(je.source,"g"),Be=function(t,e){var n,r,i,o=je.lastIndex=Ge.lastIndex=0,a=-1,u=[],s=[];for(t+="",e+="";(n=je.exec(t))&&(r=Ge.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),u[a]?u[a]+=i:u[++a]=i),(n=n[0])===(r=r[0])?u[a]?u[a]+=r:u[++a]=r:(u[++a]=null,s.push({i:a,x:zt(n,r)})),o=Ge.lastIndex;return o<e.length&&(i=e.slice(o),u[a]?u[a]+=i:u[++a]=i),u.length<2?s[0]?function(t){return function(e){return t(e)+""}}(s[0].x):function(t){return function(){return t}}(e):(e=s.length,function(t){for(var n,r=0;r<e;++r)u[(n=s[r]).i]=n.x(t);return u.join("")})},Fe=function(t,e){var n;return("number"==typeof e?zt:e instanceof Te?Ue:(n=Te(e))?(e=n,Ue):Be)(t,e)};function He(t){return function(){this.removeAttribute(t)}}function Ve(t){return function(){this.removeAttributeNS(t.space,t.local)}}function We(t,e,n){var r,i,o=n+"";return function(){var a=this.getAttribute(t);return a===o?null:a===r?i:i=e(r=a,n)}}function Ye(t,e,n){var r,i,o=n+"";return function(){var a=this.getAttributeNS(t.space,t.local);return a===o?null:a===r?i:i=e(r=a,n)}}function Xe(t,e,n){var r,i,o;return function(){var a,u,s=n(this);if(null!=s)return(a=this.getAttribute(t))===(u=s+"")?null:a===r&&u===i?o:(i=u,o=e(r=a,s));this.removeAttribute(t)}}function ze(t,e,n){var r,i,o;return function(){var a,u,s=n(this);if(null!=s)return(a=this.getAttributeNS(t.space,t.local))===(u=s+"")?null:a===r&&u===i?o:(i=u,o=e(r=a,s));this.removeAttributeNS(t.space,t.local)}}function $e(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function qe(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Ke(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&qe(t,i)),n}return i._value=e,i}function Qe(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&$e(t,i)),n}return i._value=e,i}function Ze(t,e){return function(){Bt(this,t).delay=+e.apply(this,arguments)}}function Je(t,e){return e=+e,function(){Bt(this,t).delay=e}}function tn(t,e){return function(){Ft(this,t).duration=+e.apply(this,arguments)}}function en(t,e){return e=+e,function(){Ft(this,t).duration=e}}function nn(t,e){if("function"!=typeof e)throw new Error;return function(){Ft(this,t).ease=e}}function rn(t,e,n){var r,i,o=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?Bt:Ft;return function(){var a=o(this,t),u=a.on;u!==r&&(i=(r=u).copy()).on(e,n),a.on=i}}var on=ht.prototype.constructor;function an(t){return function(){this.style.removeProperty(t)}}function un(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function sn(t,e,n){var r,i;function o(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&un(t,o,n)),r}return o._value=e,o}function cn(t){return function(e){this.textContent=t.call(this,e)}}function ln(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&cn(r)),e}return r._value=t,r}var hn=0;function fn(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function dn(){return++hn}var pn=ht.prototype;fn.prototype=function(t){return ht().transition(t)}.prototype={constructor:fn,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=i(t));for(var r=this._groups,o=r.length,a=new Array(o),u=0;u<o;++u)for(var s,c,l=r[u],h=l.length,f=a[u]=new Array(h),d=0;d<h;++d)(s=l[d])&&(c=t.call(s,s.__data__,d,l))&&("__data__"in s&&(c.__data__=s.__data__),f[d]=c,Gt(f[d],e,n,d,f,Ht(s,n)));return new fn(a,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=a(t));for(var r=this._groups,i=r.length,o=[],u=[],s=0;s<i;++s)for(var c,l=r[s],h=l.length,f=0;f<h;++f)if(c=l[f]){for(var d,p=t.call(c,c.__data__,f,l),v=Ht(c,n),g=0,E=p.length;g<E;++g)(d=p[g])&&Gt(d,e,n,g,p,v);o.push(p),u.push(c)}return new fn(o,u,e,n)},filter:function(t){"function"!=typeof t&&(t=u(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,c=r[i]=[],l=0;l<s;++l)(o=a[l])&&t.call(o,o.__data__,l,a)&&c.push(o);return new fn(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),u=0;u<o;++u)for(var s,c=e[u],l=n[u],h=c.length,f=a[u]=new Array(h),d=0;d<h;++d)(s=c[d]||l[d])&&(f[d]=s);for(;u<r;++u)a[u]=e[u];return new fn(a,this._parents,this._name,this._id)},selection:function(){return new on(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=dn(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,u=r[o],s=u.length,c=0;c<s;++c)if(a=u[c]){var l=Ht(a,e);Gt(a,t,n,c,u,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new fn(r,this._parents,t,n)},call:pn.call,nodes:pn.nodes,node:pn.node,size:pn.size,empty:pn.empty,each:pn.each,on:function(t,e){var n=this._id;return arguments.length<2?Ht(this.node(),n).on.on(t):this.each(rn(n,t,e))},attr:function(t,e){var n=v(t),r="transform"===n?Jt:Fe;return this.attrTween(t,"function"==typeof e?(n.local?ze:Xe)(n,r,ne(this,"attr."+t,e)):null==e?(n.local?Ve:He)(n):(n.local?Ye:We)(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=v(t);return this.tween(n,(r.local?Ke:Qe)(r,e))},style:function(t,e,n){var r="transform"==(t+="")?Zt:Fe;return null==e?this.styleTween(t,function(t,e){var n,r,i;return function(){var o=A(this,t),a=(this.style.removeProperty(t),A(this,t));return o===a?null:o===n&&a===r?i:i=e(n=o,r=a)}}(t,r)).on("end.style."+t,an(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var r,i,o;return function(){var a=A(this,t),u=n(this),s=u+"";return null==u&&(this.style.removeProperty(t),s=u=A(this,t)),a===s?null:a===r&&s===i?o:(i=s,o=e(r=a,u))}}(t,r,ne(this,"style."+t,e))).each(function(t,e){var n,r,i,o,a="style."+e,u="end."+a;return function(){var s=Ft(this,t),c=s.on,l=null==s.value[a]?o||(o=an(e)):void 0;c===n&&i===l||(r=(n=c).copy()).on(u,i=l),s.on=r}}(this._id,t)):this.styleTween(t,function(t,e,n){var r,i,o=n+"";return function(){var a=A(this,t);return a===o?null:a===r?i:i=e(r=a,n)}}(t,r,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,sn(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(ne(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,ln(t))},remove:function(){return this.on("end.remove",(t=this._id,function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}));var t},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=Ht(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==e?te:ee)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Ze:Je)(e,t)):Ht(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?tn:en)(e,t)):Ht(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(nn(e,t)):Ht(this.node(),e).ease},end:function(){var t,e,n=this,r=n._id,i=n.size();return new Promise((function(o,a){var u={value:a},s={value:function(){0==--i&&o()}};n.each((function(){var n=Ft(this,r),i=n.on;i!==t&&((e=(t=i).copy())._.cancel.push(u),e._.interrupt.push(u),e._.end.push(s)),n.on=e}))}))}};var vn={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function gn(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return vn.time=St(),vn;return n}function En(t){return t.data.name}function mn(){var t,e="string"==typeof(t="body")?new ct([[document.querySelector(t)]],[document.documentElement]):new ct([[t]],st),n=null,r=En;function i(){n=e.append("div").style("display","none").style("position","absolute").style("opacity",0).style("pointer-events","none").attr("class","d3-flame-graph-tip")}return i.show=function(t){return n.style("display","block").transition().duration(200).style("opacity",1).style("pointer-events","all"),n.html(r(t)).style("left",event.pageX+5+"px").style("top",event.pageY+5+"px"),i},i.hide=function(){return n.style("display","none").transition().duration(200).style("opacity",0).style("pointer-events","none"),i},i.html=function(t){return arguments.length?(r=t,i):r},i}ht.prototype.interrupt=function(t){return this.each((function(){!function(t,e){var n,r,i,o=t.__transition,a=!0;if(o){for(i in e=null==e?null:e+"",o)(n=o[i]).name===e?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete t.__transition}}(this,t)}))},ht.prototype.transition=function(t){var e,n;t instanceof fn?(e=t._id,t=t._name):(e=dn(),(n=vn).time=St(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,u=r[o],s=u.length,c=0;c<s;++c)(a=u[c])&&Gt(a,t,e,c,u,n||gn(a,e));return new fn(r,this._parents,t,e)}}})},t.exports=n()}));const Ll=Object.prototype.hasOwnProperty;function Cl(t){const{input:e}=t,n=hc.getLabel(e);if(n)return n;if(t.isRoot())return"Main.main";return function(t){const{defined_class:e,method_id:n}=t;return e&&n?[e,n].join(t.static?".":"#"):qs(t)}({defined_class:(e.defined_class||"<unknown>").split(/_|\/|\$|\(.*\)/).filter((t=>t)).pop(),method_id:e.method_id,static:e.static})}const xl={zoom:!1};t.ComponentDiagram=class extends hc.EventSource{constructor(t,e={}){super();const n=Fs(Lc,e);this.container=new wc(t,n),this.container.containerController.setContextMenu(this),this.targetCount=10,this.element=r.default.select(this.container).append("svg").attr("class","appmap__component-diagram"),this.on("postrender",(()=>{this.container.containerController.fitViewport(this.container)})),this.container.containerController.element.addEventListener("click",(t=>{t.target.classList.contains("dropdown-item")||this.clearHighlights(),this.container.containerController.contextMenu&&this.container.containerController.contextMenu.close()})),this.container.containerController.element.addEventListener("move",(()=>{this.container.containerController.contextMenu&&this.container.containerController.contextMenu.close()})),this.container.containerController.element.addEventListener("dblclick",(()=>{this.clearFocus()}))}render(t){if(!t||"object"!=typeof t)return;this.initialModel||(this.initialModel={...t}),this.currentDiagramModel=Rc(t),this.graph=new xs.graphlib.Graph({compound:!0}).setGraph({rankdir:"LR"}).setDefaultEdgeLabel((function(){return{}}));const{nodes:e,edges:n}=function(t,e=10){if(!t||!t.package_calls||0===t.package_calls.length)return{};const{class_calls:n,class_callers:r,class_package:i,packages:o,package_calls:a,package_classes:u}=t,s={...a},c=t=>{let e=0;const n=u[t].length;return e+=Math.abs(3-n),e},l=[...o].sort(((t,e)=>c(e)-c(t)));for(;new Set(Object.entries(s).flat(2)).size<e&&0!==l.length;){const t=l.pop(),e=u[t];delete s[t],Object.values(s).forEach((e=>e.delete(t))),e.forEach((e=>{(r[e]||[]).forEach((n=>{const r=s[n]?n:i[n];r!==t&&(s[r]||(s[r]=new Set),s[r].add(e))}))})),e.forEach((e=>{(n[e]||[]).forEach((n=>{const r=i[n],o=s[r]?r:n;o!==t&&(s[e]||(s[e]=new Set),s[e].add(o))}))}))}Object.entries(s).forEach((([e,n])=>{if(!t.package_classes[e])return;const r=Array.from(t.package_classes[e]);if(1!==r.length)return;const i=r[0];i!==e&&(s[i]=n,delete s[e],Object.entries(s).forEach((([t,n])=>{n.has(e)&&(n.delete(e),n.add(i)),s[t]=n})))}));const h=Object.entries(s).map((([t,e])=>[t,[...e]])).map((([t,e])=>e.map((e=>[t,e])))).flat().filter((([t,e])=>t!==e)),f=Object.values(h.flat(2).reduce(((t,e)=>(t[e]={id:e,type:o.has(e)?"package":"class"},t)),{}));return{edges:h,nodes:f}}(this.currentDiagramModel,this.targetCount);e.forEach((t=>Ac(this.graph,t))),n.forEach((([t,e])=>{t!==e&&Oc(this.graph,t,e)})),Sc(this)}clearHighlights(t=!1){this.graphGroup.selectAll(".highlight, .highlight--inbound").classed("highlight highlight--inbound",!1),t||this.emit("highlight",null)}highlight(t){this.clearHighlights(!0),r.default.event&&r.default.event.stopPropagation();let e=[];Array.isArray(t)?e=t:"string"==typeof t&&(e=[t]);let n=!1;return e.forEach((t=>{const e=this.graph.node(t);e&&(e.elem.classList.add("highlight"),this.graph.nodeEdges(t).forEach((e=>{const n=this.graph.edge(e).elem;n.classList.add("highlight"),t===e.w&&n.classList.add("highlight--inbound")})),n=!0)})),n?(r.default.selectAll(".edgePath.highlight").raise(),this.scrollTo(t),this.emit("highlight",e)):this.emit("highlight",null),n}clearFocus(){this.graphGroup.selectAll(".dim").classed("dim",!1),this.emit("focus",null)}focus(t){r.default.event&&r.default.event.stopPropagation();const[e,n]=function(t,e){const n=new Set,r=new Set,i=[e];for(;i.length>0;){const e=i.pop();n.has(e)||(t.inEdges(e).forEach((t=>{r.add(t),i.push(t.v)})),n.add(e))}for(i.push(e),n.delete(e);i.length>0;){const e=i.pop();n.has(e)||(t.outEdges(e).forEach((t=>{r.add(t),i.push(t.w)})),n.add(e))}return[n,r]}(this.graph,t);this.graph.nodes().forEach((t=>{if(e.has(t))return;const n=this.graph.node(t);"cluster"!==n.type&&(n.elem.classList.add("dim"),n.labelElem.classList.add("dim"))})),this.graph.edges().forEach((t=>{n.has(t)||this.graph.edge(t).elem.classList.add("dim")})),r.default.selectAll(".edgePath.dim").lower(),this.scrollTo(t),this.emit("focus",t)}scrollTo(t){let e=[];Array.isArray(t)?e=t:"string"==typeof t&&(e=[t]),function(t,e){const n={top:[],left:[],right:[],bottom:[],x:[],y:[]};e.forEach((e=>{const r=t.graph.node(e);if(!r)return;const i=r.elem.getBoundingClientRect();n.top.push(i.top),n.left.push(i.left),n.right.push(i.right),n.bottom.push(i.bottom),n.x.push(r.x-i.width/2),n.y.push(r.y-i.height/2)})),n.top=Math.min(...n.top),n.left=Math.min(...n.left),n.right=Math.max(...n.right),n.bottom=Math.max(...n.bottom),n.offsetTop=Math.min(...n.y),n.offsetLeft=Math.min(...n.x),n.width=n.right-n.left,n.height=n.bottom-n.top;const{containerController:r}=t.container,i=r.element.getBoundingClientRect();if(Vs.contains(i,n))return!1;const o=i.width/n.width,a=i.height/n.height,u=o>1&&a>1?1:Math.min(o,a)-.01;return r.scaleTo(u),setTimeout((()=>{const t=n.width/2+n.offsetLeft,e=n.height/2+n.offsetTop;r.translateTo(t,e)}),200),!0}(this,e)&&this.emit("scrollTo",e)}expand(t){const e=new Set(this.currentDiagramModel.package_classes[t]);if(0===e.size||[...e][0]===t)return;this.graph.removeNode(t);const n={id:`${t}-cluster`,type:"cluster"};Ac(this.graph,n),e.forEach((t=>{Ac(this.graph,{id:t,type:"class"},n),bc(this,t,this.currentDiagramModel.class_calls,(e=>{t!==e&&Oc(this.graph,t,e)})),bc(this,t,this.currentDiagramModel.class_callers,(e=>{t!==e&&Oc(this.graph,e,t)}))})),Sc(this),this.scrollTo(Array.from(e)),this.emit("expand",t)}collapse(t){const e=this.currentDiagramModel.class_package[t];if(!e)return;const n=this.currentDiagramModel.package_classes[e];n&&(this.graph.removeNode(`${e}-cluster`),Ac(this.graph,{id:e,type:"package"}),n.forEach((t=>{this.graph.removeNode(t),bc(this,t,this.currentDiagramModel.class_calls,(t=>{t!==e&&Oc(this.graph,e,t)})),bc(this,t,this.currentDiagramModel.class_callers,(t=>{t!==e&&Oc(this.graph,t,e)}))})),Sc(this),this.scrollTo(e),this.emit("collapse",e))}makeRoot(t){const e=new Set,n=new Set,r=[t];for(;r.length>0;){const t=r.pop();e.has(t)||(this.graph.outEdges(t).forEach((t=>{n.add(t),r.push(t.w)})),e.add(t))}this.graph.nodes().forEach((t=>{e.has(t)||this.graph.removeNode(t)})),Sc(this),this.scrollTo(t)}sourceLocation(t){const e=this.currentDiagramModel.class_locations[t];if(!e)return null;const{url:n,commit:r}=this.currentDiagramModel.source_control;return function(t,e,n="master",r=null){if(!t||!e)return;const i={url:t,path:e,lineNumber:r,commit:n},o=Object.values(Ks);for(let t=0;t<o.length;++t){const e=o[t](i);if(e)return e}}(n,e,r)}hasPackage(t){return this.currentDiagramModel.packages.has(t)}},t.FlowView=class extends hc.EventSource{constructor(t,n={}){super(),this.container=new wc(t,n),this.element=document.createElement("div"),this.element.className="appmap__flow-view",this.container.appendChild(this.element),this.svg=e.select(this.element).append("svg").attr("width",window.innerWidth).attr("height",window.innerHeight),this.nodeGroup=e.select(this.element).append("ul").attr("id","nodes"),this.linkGroup=this.svg.append("g").attr("id","links"),this.valuePopper=e.select(this.element).append("div").attr("class","appmap__flow-view-popper"),document.addEventListener("click",(()=>this.hidePopper())),this.on("popper",(t=>function(t,e,n=0){if(!e)return;let{x:r,y:i}=Vs.delta(t.element.getBoundingClientRect(),e.getBoundingClientRect());r+=Math.sign(r)*n,i+=Math.sign(i)*n;const{k:o}=t.transform;r/=o,i/=o,t.translateBy(r,i)}(this.container.containerController,t,10)))}setCallTree(t){this.callTree=t,this.callTree.on("selectedEvent",(t=>{!function(t,e){if(!e||Qs(t,e))return;let n;const i=t.element.querySelector(".node.highlight");if(Qs(t,i)){const t=r.default.zoomTransform(i),e=getComputedStyle(i);n=t.apply([i.offsetLeft+Number.parseInt(e.borderLeftWidth,10),i.offsetTop+Number.parseInt(e.borderTopWidth,10)])}t.translateTo(e.offsetLeft,e.offsetTop,n)}(this.container.containerController,t.element),this.highlight(t?t.id:null)})),this.callTree.on("rootEvent",(()=>{this.render()}))}render(){const{rootEvent:t}=this.callTree,[n,r]=Ol(t),i=n.reduce(((t,e)=>(t[e.source]=e.target,t)),{}),o=n.reduce(((t,e)=>(t[e.target]=e.source,t)),{}),a=n=>{const r=n.filter((t=>t.data.behavior)).append("div").datum((t=>t.data.behavior)).classed("node",!0).classed("exception",(t=>t.exceptions.length>0)).attr("data-node-id",(t=>t.id)).attr("data-event-id",(t=>t.event_id)).on("click",(t=>this.callTree.selectedEvent=t.data)).on("dblclick",(t=>this.emit("dblclick",t.data))).on("contextmenu",(t=>this.callTree.selectedEvent=t.data));r.append("div").attr("data-type",(t=>t.type)).classed("header",!0).attr("draggable",!0).append("p").html((t=>t.name)).attr("draggable",!0);const a=r.append("div").classed("io",!0),u=a.append("div").classed("column left",!0);u.append("div").attr("data-connection-type","input").classed("connector",!0).classed("in-use",(t=>yl(o,t.id))),u.selectAll(null).data((t=>t.in.map((e=>({...e,id:t.id}))))).enter().append("div").classed("item",!0).classed("has-data",(t=>t&&t.value&&t.value.value)).attr("data-type",(t=>t.type)).attr("data-port-type","input").attr("data-port-id",(t=>t&&t.value&&t.value.object_id)).text((t=>t.name)).on("click",((n,r,i)=>{this.callTree.selectedEvent=t.find((t=>t.id===n.id)),Il(this,i[r],n.value,"left"),e.event.stopPropagation()}));const s=a.append("div").classed("column right",!0);s.append("div").attr("data-connection-type","output").classed("connector",!0).classed("in-use",(t=>yl(i,t.id))),s.selectAll(null).data((t=>t.out.map((e=>({...e,id:t.id}))))).enter().append("div").classed("item",!0).classed("has-data",(t=>t&&t.value&&t.value.value)).attr("data-type",(t=>t.type)).attr("data-port-type","output").attr("data-port-id",(t=>t&&t.value&&t.value.object_id)).text((t=>t.name)).on("click",((n,r,i)=>{this.callTree.selectedEvent=t.find((t=>t.id===n.id)),Il(this,i[r],n.value,"right"),e.event.stopPropagation()})),r.filter((t=>"sql"===t.type)).append("div").classed("sql",!0).text((t=>t.value))};this.nodeGroup.text(null),this.linkGroup.text(null),this.nodeGroup.datum(e.hierarchy(t)).call((function t(e){e.empty()||e.append("li").call(a).append("ul").selectAll(":scope > li").data((t=>t.children||[]),(t=>t.data.behavior.id)).join(t)})),this.nodeGroup.selectAll(".node").each(((t,e,n)=>t.data.element=n[e])),this.linkGroup.selectAll(".node-connection").data(n).enter().append("path").classed("connection",!0).classed("node-connection",!0).attr("d",(t=>{const e=Rl(t.source,"output"),n=Rl(t.target,"input");return e&&n?Nl(e.right,e.y,n.left,n.y):null})),this.linkGroup.selectAll(".port-connection").data(r).enter().append("path").attr("class",(t=>`type-${t.type}`)).classed("connection",!0).classed("port-connection",!0).attr("d",(t=>{const e=bl(t.output.nodeId,t.output.portId),n=bl(t.input.nodeId,t.input.portId);return e&&n?Nl(e.right,e.y,n.left,n.y):null}))}highlight(t){this.hidePopper(),this.nodeGroup.selectAll(".node").classed("highlight",!1).filter((e=>e.id===t)).classed("highlight",!0)}hidePopper(){this.valuePopper.attr("data-show",null)}},t.Models=hc,t.Timeline=class extends hc.EventSource{constructor(t,n={}){super();const r=Fs(xl,n);this.container=new wc(t,r),this.container.style.display="block",this.timelineGroup=e.select(this.container).append("div").classed("appmap__timeline",!0),this.timelineSelection=this.timelineGroup.append("svg").classed("appmap__timiline-graph",!0)}setCallTree(t){this.callTree=t,this.callTree.on("selectedEvent",(t=>{this.highlight(t,this.callTree.rootEvent)})),this.callTree.on("rootEvent",(()=>{this.render()}))}render(){const{rootEvent:t}=this.callTree;t.postOrderForEach((t=>{t.label=Cl(t),t.value=t.label.length,t.valueChildren=t.children.reduce(((t,e)=>{const n=e.valueChildren||0;return e.value>n?t+e.value:t+n}),0)})),t.preOrderForEach((e=>{e.value=Math.max(e.value,e.valueChildren);const n=e.caller;e!==t&&n&&n.value>n.valueChildren&&(e.value*=n.value/n.valueChildren)}));const e=Sl().width(9*t.value).cellHeight(22).minFrameSize(3).tooltip(!1).getName((t=>t.data.label)).setColorMapper((t=>t.highlight?"#4175ea":Ll.call(t.data.input,"http_server_request")?"#471553":Ll.call(t.data.input,"sql_query")?"rgba(17, 61, 128, 1)":"rgb(59, 72, 107)"));return this.timelineSelection.html(""),this.timelineSelection.datum(t).call(e),this.timelineSelection.attr("height",e.height()).attr("width",e.width()),this.timelineSelection.selectAll(".frame").on("click",(t=>this.callTree.selectedEvent=t.data)),this}select(t){const e=this.timelineSelection.selectAll("g.frame");e.selectAll("rect").style("opacity","0.4"),e.selectAll("div.d3-flame-graph-label").style("color","#404040");const n=e.filter((e=>e.data===t)).datum().descendants().map((t=>t.data.id)),r=e.filter((t=>n.includes(t.data.id)));r.selectAll("rect").style("opacity",null),r.selectAll("div.d3-flame-graph-label").style("color",null)}highlight(t,n,r=!0){if(this.timelineSelection.select("polyline").remove(),this.highlighted&&this.highlighted.remove(),!t)return;let i=[t,...t.ancestors()].reverse();const o=i.indexOf(n);i=i.slice(o);const a=this.timelineSelection.append("polyline").classed("highlight",!0),u=[],s=[];i.forEach((t=>{const e=this.timelineSelection.selectAll("g.frame").filter((e=>e&&e.data===t)),{x:n,y:r}=function(t){const e=t.node().transform.baseVal.getItem(0).matrix;return{x:e.e,y:e.f}}(e),i=Number(e.attr("width")),o=Number(e.attr("height"));u.push(n,r+o,n,r),s.unshift(n+i,r,n+i,r+o)})),a.attr("points",`${u.join(" ")} ${s.join(" ")}`);const c=this.timelineSelection.selectAll("g").filter((e=>e&&e.data===t));if(this.highlighted=c.insert("rect",":last-child").attr("class","highlight").attr("width",(function(){return e.select(this.parentElement).attr("width")})).attr("height",(function(){return e.select(this.parentElement).attr("height")})),c.node()){const{node:t,label:e}=function(t,e){const n=e.node().transform.baseVal.getItem(0).matrix,r=e.attr("width"),i=e.attr("height"),o=n.e,a=n.f,{clientWidth:u,clientHeight:s}=t.node(),{data:c}=e.data()[0];let l=9*c.value*.5;2*l>u&&(l=9*c.label.length*.5);const h=o+l-.5*u,f=a-.5*s,d=c.label.length;return{node:{top:a,left:o,right:o+r,bottom:a+i,center:{x:h,y:f}},label:{top:a,left:o,right:o+9*d,bottom:a+9,center:{x:o+9*d*.5,y:a+4.5}}}}(this.timelineGroup,c),n=this.timelineGroup.node(),{scrollLeft:i,clientWidth:o}=n,a=.1,u=i+a,s=i+o-a;if(t.left<u||e.right>s){const e={left:t.center.x};r&&(e.behavior="smooth"),n.scrollTo(e)}}}nearestNeighbor(t,e){const n=this.timelineSelection.selectAll("g").filter((e=>e&&e.data&&e.data.id===t.id)).datum();let r,i;return this.timelineSelection.selectAll("g").filter((t=>t&&t.data&&t.depth===n.depth&&(e<0?n.x0>t.x0:n.x0<t.x0))).data().forEach((t=>{const e=Math.abs(t.x0-n.x0);(!r||e&&e<i)&&(r=t,i=e)})),r?r.data:null}},Object.defineProperty(t,"__esModule",{value:!0})}));
